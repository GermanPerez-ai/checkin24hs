<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkin24hs - Panel de Administraci贸n</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" type="image/svg+xml" href="logo-checkin24hs-circular-olive.svg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f5f5;
            color: #333;
            display: flex;
        }

        /* Sidebar */
        .sidebar {
            width: 240px;
            background-color: #1976d2;
            color: white;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar-header h2 {
            font-size: 1.2rem;
            font-weight: 500;
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            color: white;
            text-decoration: none;
        }

        .menu-item:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .menu-item.active {
            background-color: rgba(255,255,255,0.2);
        }

        .menu-item .material-icons {
            margin-right: 12px;
            font-size: 20px;
        }

        /* Main Content */
        .main-content {
            margin-left: 240px;
            flex: 1;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background-color: white;
            padding: 16px 24px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 500;
            color: #333;
        }

        .user-menu {
            position: relative;
            display: inline-block;
        }

        .user-button {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background-color 0.3s;
        }

        .user-button:hover {
            background-color: #f5f5f5;
        }

        .user-dropdown {
            position: absolute;
            right: 0;
            top: 100%;
            background-color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border-radius: 8px;
            min-width: 200px;
            z-index: 1000;
            display: none;
        }

        .user-dropdown.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: background-color 0.3s;
        }

        .dropdown-item:hover {
            background-color: #f5f5f5;
        }

        .dropdown-item .material-icons {
            margin-right: 8px;
            font-size: 18px;
        }

        /* Content Area */
        .content {
            padding: 24px;
        }

        .page-title {
            font-size: 2rem;
            font-weight: 500;
            margin-bottom: 24px;
            color: #333;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background-color: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .stat-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            color: white;
        }

        .stat-info h3 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-info p {
            color: #666;
            font-size: 0.9rem;
        }

        .stat-trend {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }

        .trend-up {
            color: #2e7d32;
        }

        .trend-down {
            color: #d32f2f;
        }

        /* Activity and Chart Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .activity-card, .chart-card {
            background-color: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 20px;
            color: #333;
        }

        .activity-list {
            list-style: none;
        }

        .activity-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #1976d2;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            font-size: 0.9rem;
            margin-bottom: 4px;
        }

        .activity-time {
            font-size: 0.8rem;
            color: #666;
        }

        .chart-placeholder {
            height: 200px;
            background-color: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 0.9rem;
        }

        /* Form Buttons */
        .form-button {
            background-color: #1976d2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: background-color 0.3s;
            display: inline-flex;
            align-items: center;
        }

        .form-button:hover {
            background-color: #1565c0;
        }

        .form-button.secondary {
            background-color: #f5f5f5;
            color: #333;
            border: 1px solid #ddd;
        }

        .form-button.secondary:hover {
            background-color: #e0e0e0;
        }

        /* Table Styles */
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: #f5f5f5;
            font-weight: 500;
            color: #333;
        }

        tr:hover {
            background-color: #f9f9f9;
        }

        .hotel-name {
            font-weight: 500;
            color: #1976d2;
        }

        .hotel-location {
            color: #666;
            font-size: 0.9rem;
        }

        .rating-stars {
            color: #ffc107;
        }

        .status-active {
            background-color: #e8f5e8;
            color: #2e7d32;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .action-buttons {
            display: flex;
            gap: 4px;
            justify-content: center;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            color: #666;
            transition: all 0.3s;
        }

        .action-btn:hover {
            background-color: #f0f0f0;
            color: #333;
        }

        .action-btn.edit {
            color: #1976d2;
        }

        .action-btn.delete {
            color: #d32f2f;
        }

        .action-btn.view {
            color: #2e7d32;
        }
        
        /* Estilos para tabla de usuarios */
        .user-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .user-name {
            font-weight: 500;
            color: #333;
        }
        
        .user-email {
            font-size: 0.85rem;
            color: #666;
        }
        
        .user-type {
            font-size: 0.75rem;
            color: #999;
            font-style: italic;
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .status-badge.active {
            background-color: #e8f5e8;
            color: #2e7d32;
        }
        
        .status-badge.inactive {
            background-color: #ffebee;
            color: #c62828;
        }
        
        .btn-edit, .btn-delete {
            padding: 6px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        
        .btn-edit {
            background-color: #2196f3;
            color: white;
        }
        
        .btn-edit:hover {
            background-color: #1976d2;
        }
        
        .btn-delete {
            background-color: #f44336;
            color: white;
        }
        
        .btn-delete:hover {
            background-color: #d32f2f;
        }
        
        /* Estilos para la secci贸n de cotizaciones */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .empty-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-state h3 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .empty-state p {
            color: #666;
            font-size: 0.9rem;
        }
        
        .search-box {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .search-box input {
            padding: 10px 40px 10px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 0.9rem;
            width: 250px;
        }
        
        .search-box .material-icons {
            position: absolute;
            right: 12px;
            color: #666;
            font-size: 18px;
        }
        
        .quote-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .quote-status.pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .quote-status.processed {
            background: #d4edda;
            color: #155724;
        }
        
        .quote-status.rejected {
            background: #f8d7da;
            color: #721c24;
        }
        
        .action-btn.primary {
            background: #2196f3;
            color: white;
        }
        
        .action-btn.primary:hover {
            background: #1976d2;
        }
        
        .action-btn.secondary {
            background: #6c757d;
            color: white;
        }
        
        .action-btn.secondary:hover {
            background: #5a6268;
        }
        
        .action-btn.danger {
            background: #dc3545;
            color: white;
        }
        
        .action-btn.danger:hover {
            background: #c82333;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            position: relative;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }

        .close:hover {
            color: #000;
        }

        .modal-title {
            margin-bottom: 16px;
            color: #333;
            font-size: 1.3rem;
            font-weight: 500;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 12px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #333;
        }

        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: border-color 0.3s;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: #1976d2;
            box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.1);
        }

        .form-input[type="number"] {
            width: 100%;
        }

        .form-input[type="url"] {
            width: 100%;
        }

        textarea.form-input {
            resize: vertical;
            min-height: 80px;
        }

        /* Image Preview */
        .image-preview {
            max-width: 200px;
            max-height: 150px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            margin-top: 8px;
        }

        .photos-preview {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        .photo-preview {
            width: 80px;
            height: 60px;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
            object-fit: cover;
        }

        /* Image Manager Styles */
        .image-item {
            position: relative;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            width: 120px;
            height: 140px;
            display: inline-block;
            margin: 5px;
        }

        .image-item:hover {
            border-color: #1976d2;
            transform: scale(1.05);
        }

        .image-item.selected {
            border-color: #2e7d32;
            background-color: #e8f5e8;
        }

        .image-preview {
            width: 100%;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f5f5f5;
            position: relative;
        }
        
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
        }

        .photo-placeholder {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7rem;
            position: relative;
        }

        .photo-placeholder.selected {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
        }

        .photo-placeholder .material-icons {
            font-size: 20px;
            margin-bottom: 2px;
        }

        .photo-number {
            font-weight: bold;
            font-size: 0.6rem;
        }

        .image-item .image-name {
            padding: 5px;
            font-size: 0.7rem;
            color: #333;
            background-color: white;
            text-align: center;
            word-break: break-word;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-item .select-overlay {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: #2e7d32;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .image-item.selected .select-overlay {
            opacity: 1;
        }

        .image-actions {
            position: absolute;
            bottom: 5px;
            right: 5px;
            display: flex;
            gap: 2px;
        }

        .btn-view, .btn-delete {
            width: 20px;
            height: 20px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            transition: all 0.2s ease;
        }

        .btn-view {
            background: #2196f3;
            color: white;
        }

        .btn-view:hover {
            background: #1976d2;
        }

        .btn-delete {
            background: #f44336;
            color: white;
        }

        .btn-delete:hover {
            background: #d32f2f;
        }

        .photo-counter {
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.9rem;
            color: #388e3c;
        }

        .upload-progress {
            background-color: #f0f0f0;
            border-radius: 4px;
            height: 20px;
            margin-top: 10px;
            overflow: hidden;
        }

        .upload-progress-bar {
            background-color: #1976d2;
            height: 100%;
            width: 0%;
            transition: width 0.3s;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
                gap: 2px;
            }

            table {
                font-size: 0.8rem;
            }

            th, td {
                padding: 8px 4px;
            }
        }

        /* Mobile menu button */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
        }

        /* Estilos para el carrusel de fotos */
        #photoCarouselModal .modal-content {
            background: transparent;
            box-shadow: none;
        }

        #carouselImage {
            transition: all 0.3s ease;
        }

        #carouselImage:hover {
            transform: scale(1.02);
        }

        #prevButton:hover, #nextButton:hover {
            background: rgba(0,0,0,0.9) !important;
            transform: translateY(-50%) scale(1.1);
        }

        #carouselThumbnails::-webkit-scrollbar {
            height: 6px;
        }

        #carouselThumbnails::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
        }

        #carouselThumbnails::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.5);
            border-radius: 3px;
        }

        #carouselThumbnails::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.7);
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }
            
            #prevButton, #nextButton {
                width: 40px !important;
                height: 40px !important;
                font-size: 18px !important;
            }
            
            #carouselThumbnails {
                bottom: 60px !important;
                max-width: 90% !important;
            }
            
            #photoCounter {
                bottom: 15px !important;
                font-size: 12px !important;
            }
        }
        
        /* Estilos para botones de acci贸n */
        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 6px;
            border-radius: 4px;
            margin: 0 2px;
            transition: background-color 0.3s;
        }
        
        .action-btn.edit {
            color: #1976d2;
        }
        
        .action-btn.edit:hover {
            background-color: rgba(25, 118, 210, 0.1);
        }
        
        .action-btn.delete {
            color: #d32f2f;
        }
        
        .action-btn.delete:hover {
            background-color: rgba(211, 47, 47, 0.1);
        }
        
        .action-btn.view {
            color: #388e3c;
        }
        
        .action-btn.view:hover {
            background-color: rgba(56, 142, 60, 0.1);
        }
        
        /* Estilos para estados de hoteles */
        .status-activo {
            background-color: #4caf50;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-inactivo {
            background-color: #f44336;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-en-mantenimiento {
            background-color: #ff9800;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        /* Estilos para estados de reservas */
        .status-confirmada {
            background-color: #4caf50;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-pendiente {
            background-color: #ff9800;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-cancelada {
            background-color: #f44336;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        /* Estilos para el modal de edici贸n de reservas */
        .form-grid {
            display: grid;
            gap: 16px;
        }

        .form-section {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            margin-bottom: 12px;
        }

        .form-section h3 {
            margin: 0 0 12px 0;
            color: #333;
            font-size: 14px;
            font-weight: 600;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 12px;
        }

        .form-row:last-child {
            margin-bottom: 0;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 4px;
            font-weight: 500;
            color: #333;
            font-size: 13px;
        }

        .form-group input,
        .form-group select {
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #1976d2;
            box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.1);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #e9ecef;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: #1976d2;
            color: white;
        }

        .btn-primary:hover {
            background-color: #1565c0;
        }

        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }
        
        /* Estilos para la tabla de hoteles */
        .hotel-name {
            font-weight: 500;
            color: #333;
        }
        
        .hotel-location {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
        }
        
        /* Estilos para estrellas de calificaci贸n */
        .rating-stars {
            color: #ffc107;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Checkin24hs Admin</h2>
        </div>
        <div class="sidebar-menu">
            <a href="#" class="menu-item active" onclick="window.showSection('dashboard', event)">
                <span class="material-icons">dashboard</span>
                Dashboard
            </a>
            <a href="#" class="menu-item" onclick="window.showSection('hotels', event)">
                <span class="material-icons">hotel</span>
                Hoteles
            </a>
            <a href="#" class="menu-item" onclick="window.showSection('reservations', event)">
                <span class="material-icons">event</span>
                Reservas
            </a>
            <a href="#" class="menu-item" onclick="window.showSection('users', event)">
                <span class="material-icons">people</span>
                Usuarios
            </a>
            <a href="#" class="menu-item" onclick="window.showSection('quotes', event)">
                <span class="material-icons">receipt</span>
                Cotizaciones
            </a>
            <a href="#" class="menu-item" onclick="showHotelPromotions()">
                <span class="material-icons">local_offer</span>
                Promoci贸n Hoteles
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <button class="mobile-menu-btn" onclick="toggleSidebar()">
                <span class="material-icons">menu</span>
            </button>
            <h1>Panel de Administraci贸n</h1>
            <div class="user-menu">
                <button class="user-button" onclick="toggleUserMenu()">
                    <span class="material-icons">account_circle</span>
                </button>
                <div class="user-dropdown" id="userDropdown">
                    <div class="dropdown-item">
                        <span class="material-icons">person</span>
                        Administrador
                    </div>
                    <div class="dropdown-item" onclick="logout()">
                        <span class="material-icons">logout</span>
                        Cerrar Sesi贸n
                    </div>
                </div>
            </div>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Dashboard Section -->
            <div id="dashboard-section">
                <h2 class="page-title">Dashboard</h2>
                
                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #1976d2;">
                                <span class="material-icons">hotel</span>
                            </div>
                            <div class="stat-info">
                                <h3>0</h3>
                                <p>Total Hoteles</p>
                            </div>
                        </div>
                        <div class="stat-trend">
                            <span class="material-icons">info</span>
                            Sin datos disponibles
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #2e7d32;">
                                <span class="material-icons">people</span>
                            </div>
                            <div class="stat-info">
                                <h3>0</h3>
                                <p>Usuarios Activos</p>
                            </div>
                        </div>
                        <div class="stat-trend">
                            <span class="material-icons">info</span>
                            Sin datos disponibles
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #ed6c02;">
                                <span class="material-icons">receipt</span>
                            </div>
                            <div class="stat-info">
                                <h3>0</h3>
                                <p>Cotizaciones</p>
                            </div>
                        </div>
                        <div class="stat-trend">
                            <span class="material-icons">info</span>
                            Sin datos disponibles
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #9c27b0;">
                                <span class="material-icons">star</span>
                            </div>
                            <div class="stat-info">
                                <h3>0.0</h3>
                                <p>Calificaci贸n Promedio</p>
                            </div>
                        </div>
                        <div class="stat-trend">
                            <span class="material-icons">info</span>
                            Sin datos disponibles
                        </div>
                    </div>
                </div>

                <!-- Test Buttons for Debugging -->
                <div style="margin-bottom: 24px; padding: 16px; background: #f0f8ff; border-radius: 8px; border: 1px solid #1976d2;">
                    <h4 style="margin-bottom: 12px; color: #1976d2;"> Botones de Prueba</h4>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <button class="form-button" style="background: #ff9800; color: white;" onclick="crearUsuariosPrueba()">
                            <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">add_circle</span>
                            Crear Usuarios Prueba
                        </button>
                                                    <button class="form-button" style="background: #2196f3; color: white;" onclick="window.showSection('users', event)">
                            <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">people</span>
                            Ir a Usuarios
                        </button>
                        <button class="form-button" style="background: #4caf50; color: white;" onclick="loadUsersData()">
                            <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">refresh</span>
                            Cargar Datos
                        </button>
                        <button class="form-button" style="background: #f44336; color: white;" onclick="deleteAllUsers()">
                            <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">delete_forever</span>
                            Eliminar Todos los Usuarios
                        </button>
                    </div>
                </div>

                <!-- Activity and Chart Grid -->
                <div class="dashboard-grid">
                    <div class="activity-card">
                        <h3 class="card-title">Actividad Reciente</h3>
                        <ul class="activity-list">
                            <li class="activity-item">
                                <div class="activity-dot"></div>
                                <div class="activity-content">
                                    <div class="activity-text">No hay actividad reciente</div>
                                    <div class="activity-time">Sistema limpio</div>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="chart-card">
                        <h3 class="card-title">Ventas Mensuales</h3>
                        <div class="chart-placeholder">
                            Sin datos disponibles
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hotels Section -->
            <div id="hotels-section" style="display: none;">
                <h2 class="page-title">Gesti贸n de Hoteles</h2>
                
                <!-- Action Buttons -->
                <div style="margin-bottom: 24px; display: flex; gap: 12px; flex-wrap: wrap;">
                    <button class="form-button" onclick="addNewHotel()">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">add</span>
                        Agregar Hotel
                    </button>
                    <button class="form-button secondary" onclick="exportHotels()">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">download</span>
                        Exportar Datos
                    </button>
                    <button class="form-button secondary" onclick="refreshHotels()">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">refresh</span>
                        Actualizar
                    </button>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid" style="margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #1976d2;">
                                <span class="material-icons">hotel</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalHotels">0</h3>
                                <p>Total Hoteles</p>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #2e7d32;">
                                <span class="material-icons">star</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="avgRating">0.0</h3>
                                <p>Calificaci贸n Promedio</p>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #ed6c02;">
                                <span class="material-icons">location_on</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalLocations">0</h3>
                                <p>Ubicaciones</p>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #9c27b0;">
                                <span class="material-icons">attach_money</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="priceRange">$0-$0</h3>
                                <p>Rango de Precios</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hotels Table -->
                <div class="activity-card">
                    <h3 class="card-title">Hoteles Vigentes</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; margin-top: 16px;">
                            <thead>
                                <tr style="background-color: #f5f5f5; border-bottom: 2px solid #e0e0e0;">
                                    <th style="padding: 12px; text-align: left; font-weight: 500;">Hotel</th>
                                    <th style="padding: 12px; text-align: left; font-weight: 500;">Ubicaci贸n</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Calificaci贸n</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Precio</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Estado</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="hotelsTableBody">
                                <!-- Los hoteles se cargar谩n din谩micamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Reservations Section -->
            <div id="reservations-section" style="display: none;">
                <h2 class="page-title">Gesti贸n de Reservas</h2>
                
                <!-- Action Buttons -->
                <div style="margin-bottom: 24px; display: flex; gap: 12px; flex-wrap: wrap;">
                    <button class="form-button" onclick="addNewReservation()">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">add</span>
                        Nueva Reserva
                    </button>
                    <button class="form-button secondary" onclick="exportReservations()">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">download</span>
                        Exportar Reservas
                    </button>
                    <button class="form-button secondary" onclick="refreshReservations()">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">refresh</span>
                        Actualizar
                    </button>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid" style="margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #1976d2;">
                                <span class="material-icons">event</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalReservations">0</h3>
                                <p>Total Reservas</p>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #2e7d32;">
                                <span class="material-icons">check_circle</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="confirmedReservations">0</h3>
                                <p>Confirmadas</p>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #ed6c02;">
                                <span class="material-icons">pending</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="pendingReservations">0</h3>
                                <p>Pendientes</p>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #9c27b0;">
                                <span class="material-icons">attach_money</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalRevenue">$0</h3>
                                <p>Ingresos Totales</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reservations Table -->
                <div class="activity-card">
                    <h3 class="card-title">Reservas Activas</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; margin-top: 16px;">
                            <thead>
                                <tr style="background-color: #f5f5f5; border-bottom: 2px solid #e0e0e0;">
                                    <th style="padding: 12px; text-align: left; font-weight: 500;">C贸digo</th>
                                    <th style="padding: 12px; text-align: left; font-weight: 500;">Cliente</th>
                                    <th style="padding: 12px; text-align: left; font-weight: 500;">Hotel</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Fechas</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Personas</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Estado</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Total</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="reservationsTableBody">
                                <!-- Las reservas se cargar谩n din谩micamente -->
                            </tbody>
                        </table>
                                </div>
        </div>
    </div>

    <!-- Edit Reservation Modal -->
    <div id="editReservationModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px; width: 85%;">
            <div class="modal-header">
                <h2 id="editReservationTitle">Editar Reserva</h2>
                <button onclick="closeEditReservationModal()" class="close-btn">&times;</button>
            </div>
            <form id="editReservationForm" onsubmit="saveReservationChanges(event)">
                <div class="form-grid">
                    <!-- Informaci贸n del Cliente -->
                    <div class="form-section">
                        <h3> Informaci贸n del Cliente</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="editClientName">Nombre Completo *</label>
                                <input type="text" id="editClientName" name="clientName" required>
                            </div>
                            <div class="form-group">
                                <label for="editClientEmail">Email *</label>
                                <input type="email" id="editClientEmail" name="clientEmail" required>
                            </div>
                        </div>
                    </div>



                    <!-- Informaci贸n de Pago -->
                    <div class="form-section">
                        <h3> Informaci贸n de Pago</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="editStatus">Estado de la Reserva *</label>
                                <select id="editStatus" name="status" required>
                                    <option value="Pendiente">Pendiente</option>
                                    <option value="Confirmada">Confirmada</option>
                                    <option value="Cancelada">Cancelada</option>
                                    <option value="Completada">Completada</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editPaymentStatus">Estado del Pago *</label>
                                <select id="editPaymentStatus" name="paymentStatus" required>
                                    <option value="Pendiente">Pendiente</option>
                                    <option value="Pagado">Pagado</option>
                                    <option value="Parcial">Parcial</option>
                                    <option value="Reembolsado">Reembolsado</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="editTotalAmount">Total (USD) *</label>
                                <input type="number" id="editTotalAmount" name="totalAmount" min="0" required>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" onclick="closeEditReservationModal()" class="btn btn-secondary">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </div>

    <!-- New Reservation Modal -->
    <div id="newReservationModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px; width: 85%;">
            <div class="modal-header">
                <h2> Nueva Reserva</h2>
                <button onclick="closeNewReservationModal()" class="close-btn">&times;</button>
            </div>
            <form id="newReservationForm" onsubmit="saveNewReservation(event)">
                <div class="form-grid">
                    <!-- Informaci贸n del Cliente -->
                    <div class="form-section">
                        <h3> Informaci贸n del Cliente</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newClientName">Nombre Completo *</label>
                                <input type="text" id="newClientName" name="clientName" required>
                            </div>
                            <div class="form-group">
                                <label for="newClientEmail">Email *</label>
                                <input type="email" id="newClientEmail" name="clientEmail" required>
                            </div>
                        </div>
                    </div>

                    <!-- Informaci贸n de la Reserva -->
                    <div class="form-section">
                        <h3> Informaci贸n de la Reserva</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newHotelSelect">Hotel *</label>
                                <select id="newHotelSelect" name="hotelId" required>
                                    <option value="">Seleccionar hotel...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="newReservationCode">C贸digo de Reserva *</label>
                                <input type="text" id="newReservationCode" name="reservationCode" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newCheckIn">Fecha de Entrada *</label>
                                <input type="date" id="newCheckIn" name="checkIn" required>
                            </div>
                            <div class="form-group">
                                <label for="newCheckOut">Fecha de Salida *</label>
                                <input type="date" id="newCheckOut" name="checkOut" required>
                            </div>
                        </div>

                    </div>

                    <!-- Informaci贸n de Pago -->
                    <div class="form-section">
                        <h3> Informaci贸n de Pago</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newStatus">Estado de la Reserva *</label>
                                <select id="newStatus" name="status" required>
                                    <option value="Pendiente">Pendiente</option>
                                    <option value="Confirmada">Confirmada</option>
                                    <option value="Cancelada">Cancelada</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newTotalAmount">Total (USD) *</label>
                                <input type="number" id="newTotalAmount" name="totalAmount" min="0" required>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" onclick="closeNewReservationModal()" class="btn btn-secondary">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Crear Reserva</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Users Section -->
            <div id="users-section" style="display: none;">
                <h2 class="page-title">Gesti贸n de Usuarios</h2>
                
                <!-- Action Buttons -->
                <div style="margin-bottom: 24px; display: flex; gap: 12px; flex-wrap: wrap;">
                    <button class="form-button secondary" onclick="exportUsers()">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">download</span>
                        Exportar Usuarios
                    </button>
                    <button class="form-button secondary" onclick="refreshUsers()">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">refresh</span>
                        Actualizar
                    </button>
                    <button class="form-button" style="background: #4caf50; color: white;" onclick="showMarketingTools()">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">campaign</span>
                        Herramientas Marketing
                    </button>
                    <button class="form-button" style="background: #2196f3; color: white;" onclick="showUserAnalytics()">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">analytics</span>
                        An谩lisis Usuarios
                    </button>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid" style="margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #1976d2;">
                                <span class="material-icons">people</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalUsers">0</h3>
                                <p>Total Usuarios</p>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #2e7d32;">
                                <span class="material-icons">person_add</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="newUsers">0</h3>
                                <p>Nuevos este mes</p>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #ed6c02;">
                            <span class="material-icons">receipt</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalQuotes">0</h3>
                                <p>Total Cotizaciones</p>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background-color: #9c27b0;">
                                <span class="material-icons">star</span>
                            </div>
                            <div class="stat-info">
                                <h3 id="avgUserRating">0.0</h3>
                                <p>Calificaci贸n Promedio</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users Table -->
                <div class="activity-card">
                    <h3 class="card-title">Usuarios Registrados - Panel de Administraci贸n</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; margin-top: 16px;">
                            <thead>
                                <tr style="background-color: #f5f5f5; border-bottom: 2px solid #e0e0e0;">
                                    <th style="padding: 12px; text-align: left; font-weight: 500;">Usuario</th>
                                    <th style="padding: 12px; text-align: left; font-weight: 500;">Email</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Tel茅fono</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Cotizaciones</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">ltima Actividad</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Estado</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Marketing</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 500;">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <!-- Los usuarios se cargar谩n din谩micamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Quotes Section -->
            <div id="quotes-section" style="display: none;">
                <h2 class="page-title">Gesti贸n de Cotizaciones</h2>
                
                <!-- Estad铆sticas de Cotizaciones -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalQuotes">0</div>
                            <div class="stat-label">Total Cotizaciones</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-content">
                            <div class="stat-number" id="pendingQuotes">0</div>
                            <div class="stat-label">Pendientes</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-content">
                            <div class="stat-number" id="processedQuotes">0</div>
                            <div class="stat-label">Procesadas</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-content">
                            <div class="stat-number" id="avgQuotesPerDay">0</div>
                            <div class="stat-label">Promedio/D铆a</div>
                        </div>
                    </div>
                </div>

                <!-- Controles de Cotizaciones -->
                <div class="action-bar">
                    <div class="action-buttons">
                        <button class="action-btn primary" onclick="refreshQuotes()">
                            <span class="material-icons">refresh</span>
                            Actualizar
                        </button>
                        <button class="action-btn secondary" onclick="exportQuotes()">
                            <span class="material-icons">download</span>
                            Exportar
                        </button>
                        <button class="action-btn danger" onclick="clearAllQuotes()">
                            <span class="material-icons">delete_sweep</span>
                            Limpiar Todo
                        </button>
                        <button class="action-btn primary" onclick="testQuotesSync()">
                            <span class="material-icons">bug_report</span>
                            Probar Sincronizaci贸n
                        </button>
                    </div>
                    <div class="search-box">
                        <input type="text" id="quotesSearch" placeholder="Buscar cotizaciones..." onkeyup="filterQuotes()">
                        <span class="material-icons">search</span>
                    </div>
                </div>

                <!-- Tabla de Cotizaciones -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Hotel</th>
                                <th>Cliente</th>
                                <th>Fechas</th>
                                <th>Hu茅spedes</th>
                                <th>Estado</th>
                                <th>Fecha</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="quotesTableBody">
                            <!-- Las cotizaciones se cargar谩n din谩micamente aqu铆 -->
                        </tbody>
                    </table>
                </div>

                <!-- Mensaje cuando no hay cotizaciones -->
                <div id="noQuotesMessage" class="empty-state" style="display: none;">
                    <div class="empty-icon"></div>
                    <h3>No hay cotizaciones</h3>
                    <p>Las cotizaciones enviadas desde el sitio web aparecer谩n aqu铆 autom谩ticamente.</p>
                </div>
            </div>
        </div>
    </div>



    <!-- Modal de Edici贸n de Hotel -->
    <div id="editHotelModal" class="modal">
                        <div class="modal-content" style="max-width: 650px; max-height: 85vh; overflow-y: auto;">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h2 class="modal-title">Editar Hotel</h2>
            
            <form id="editHotelForm">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <!-- Columna Izquierda -->
                    <div>
                        <div class="form-group">
                            <label class="form-label">Nombre del Hotel *</label>
                            <input type="text" class="form-input" id="editHotelName" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Ubicaci贸n *</label>
                            <input type="text" class="form-input" id="editHotelLocation" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label"> Ubicaci贸n Google Maps</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="text" class="form-input" id="editHotelGoogleMaps" placeholder="https://maps.google.com/?q=..." style="flex: 1;" onchange="testCoordinatesExtraction()">
                                <button type="button" class="form-button secondary" onclick="openGoogleMapsHelp()" style="white-space: nowrap;" title="Ayuda para obtener enlace de Google Maps">
                                    <span class="material-icons" style="font-size: 16px;">help</span>
                                </button>
                                <button type="button" class="form-button secondary" onclick="testCoordinatesExtraction()" style="white-space: nowrap;" title="Probar extracci贸n de coordenadas">
                                    <span class="material-icons" style="font-size: 16px;">location_on</span>
                                </button>
                            </div>
                            <div style="margin-top: 5px; font-size: 0.85rem; color: #666;">
                                 <strong>Tip:</strong> Busca el hotel en Google Maps, haz clic en "Compartir" y copia el enlace
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Calificaci贸n (1-5)</label>
                            <input type="number" class="form-input" id="editHotelRating" min="1" max="5" step="0.1">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Rango de Precio</label>
                            <input type="text" class="form-input" id="editHotelPrice" placeholder="$150-$300 USD">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Categor铆a de Precio</label>
                            <select class="form-input" id="editHotelPriceRange">
                                <option value="low">Bajo</option>
                                <option value="medium">Medio</option>
                                <option value="high">Alto</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Estado</label>
                            <select class="form-input" id="editHotelStatus">
                                <option value="Activo">Activo</option>
                                <option value="Inactivo">Inactivo</option>
                                <option value="Mantenimiento">Mantenimiento</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Columna Derecha -->
                    <div>
                        <div class="form-group">
                            <label class="form-label">Imagen Principal *</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="text" class="form-input" id="editHotelImage" placeholder="Ruta de la imagen (ej: hotel-images/hotel-1-puyehue/main.jpg)" required style="flex: 1;">
                                <button type="button" class="form-button secondary" onclick="openImageManager('main')" style="white-space: nowrap;">
                                    <span class="material-icons" style="font-size: 16px;">folder_open</span>
                                    Seleccionar
                                </button>
                                <button type="button" class="form-button secondary" onclick="showImageHelp()" style="white-space: nowrap;" title="Ayuda">
                                    <span class="material-icons" style="font-size: 16px;">help</span>
                                </button>
                            </div>
                            <div id="editImagePreview" style="margin-top: 10px; text-align: center;"></div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Descripci贸n</label>
                            <textarea class="form-input" id="editHotelDescription" rows="4" placeholder="Descripci贸n detallada del hotel"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Amenities (separadas por comas)</label>
                            <input type="text" class="form-input" id="editHotelAmenities" placeholder="Spa, Restaurante, WiFi, Parking">
                        </div>
                    </div>
                </div>
                
                <!-- Galer铆a de Fotos -->
                <div class="form-group">
                    <label class="form-label">Galer铆a de Fotos</label>
                    <div style="display: flex; gap: 10px; align-items: flex-start; margin-bottom: 10px;">
                        <textarea class="form-input" id="editHotelPhotos" rows="3" placeholder="Rutas separadas por comas: hotel-images/hotel-1-puyehue/gallery-1.jpg, hotel-images/hotel-1-puyehue/gallery-2.jpg" style="flex: 1;"></textarea>
                        <button type="button" class="form-button secondary" onclick="openImageManager('gallery')" style="white-space: nowrap; align-self: flex-start;">
                            <span class="material-icons" style="font-size: 16px;">folder_open</span>
                            Seleccionar
                        </button>
                    </div>
                    <div id="editPhotosPreview" style="margin-top: 10px; display: flex; gap: 10px; flex-wrap: wrap;"></div>
                </div>
                
                <!-- Botones -->
                <div style="margin-top: 20px; display: flex; gap: 12px; justify-content: flex-end;">
                    <button type="button" class="form-button secondary" onclick="closeEditModal()">Cancelar</button>
                    <button type="button" class="form-button" onclick="saveHotelChanges()">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal del Gestor de Im谩genes -->
    <div id="imageManagerModal" class="modal">
                        <div class="modal-content" style="max-width: 700px; max-height: 75vh; overflow-y: auto;">
            <span class="close" onclick="closeImageManager()">&times;</span>
            <h2 class="modal-title">Gestor de Im谩genes - <span id="currentHotelName"></span></h2>
            
            <div style="margin-bottom: 20px;">
                <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px;">
                    <label class="form-label" style="margin: 0;">Subir nuevas im谩genes:</label>
                    <input type="file" id="imageUpload" multiple accept="image/*" style="flex: 1;">
                    <button type="button" class="form-button" onclick="uploadImages()">
                        <span class="material-icons" style="font-size: 16px;">cloud_upload</span>
                        Subir
                    </button>
                </div>
                
                <div style="display: flex; gap: 8px; margin-bottom: 15px;">
                    <button type="button" class="form-button secondary" onclick="cleanDuplicateImages()" title="Limpiar duplicados">
                        <span class="material-icons" style="font-size: 14px;">cleaning_services</span>
                        Limpiar
                    </button>
                    <button type="button" class="form-button secondary" onclick="resetImageManager()" title="Resetear gestor">
                        <span class="material-icons" style="font-size: 14px;">refresh</span>
                        Resetear
                    </button>
                    <button type="button" class="form-button secondary" onclick="showImageHelp()" title="Ayuda">
                        <span class="material-icons" style="font-size: 14px;">help</span>
                        Ayuda
                    </button>
                </div>
                
                <div style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <h4 style="margin: 0 0 10px 0; color: #333;">Carpeta del Hotel:</h4>
                    <p style="margin: 0; color: #666; font-size: 0.9rem;" id="hotelFolderPath"></p>
                    <div class="photo-counter" id="photoCounter" style="margin-top: 10px; text-align: center; font-weight: bold; color: #388e3c;">0/10 fotos seleccionadas</div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <!-- Im谩genes Disponibles -->
                <div>
                    <h3 style="margin-bottom: 15px; color: #333;">Im谩genes Disponibles</h3>
                    <div id="availableImages" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; max-height: 400px; overflow-y: auto;">
                        <!-- Las im谩genes se cargar谩n din谩micamente -->
                    </div>
                </div>
                
                <!-- Im谩genes Seleccionadas -->
                <div>
                    <h3 style="margin-bottom: 15px; color: #333;">Im谩genes Seleccionadas</h3>
                    <div id="selectedImages" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; max-height: 400px; overflow-y: auto;">
                        <!-- Las im谩genes seleccionadas se mostrar谩n aqu铆 -->
                    </div>
                </div>
            </div>
            
            <!-- Botones -->
            <div style="margin-top: 20px; display: flex; gap: 12px; justify-content: flex-end;">
                <button type="button" class="form-button secondary" onclick="closeImageManager()">Cancelar</button>
                <button type="button" class="form-button" onclick="applyImageSelection()">Aplicar Selecci贸n</button>
            </div>
        </div>
    </div>

    <!-- Modal del Carrusel de Fotos -->
    <div id="photoCarouselModal" class="modal">
                        <div class="modal-content" style="max-width: 85vw; max-height: 85vh; padding: 0; background: transparent; box-shadow: none;">
            <div style="position: relative; width: 100%; height: 100%;">
                <!-- Bot贸n cerrar -->
                <button class="close" onclick="closePhotoCarousel()" style="position: absolute; top: 20px; right: 20px; z-index: 1001; background: rgba(0,0,0,0.7); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer;">&times;</button>
                
                <!-- Imagen principal -->
                <div id="carouselImageContainer" style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.9);">
                    <img id="carouselImage" src="" alt="Foto" style="max-width: 90%; max-height: 90%; object-fit: contain; border-radius: 8px;">
                </div>
                
                <!-- Controles de navegaci贸n -->
                <button id="prevButton" onclick="previousPhoto()" style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.7); color: white; border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 24px; cursor: pointer; z-index: 1001;"></button>
                <button id="nextButton" onclick="nextPhoto()" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.7); color: white; border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 24px; cursor: pointer; z-index: 1001;"></button>
                
                <!-- Indicador de posici贸n -->
                <div id="photoCounter" style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 10px 20px; border-radius: 20px; font-size: 14px; z-index: 1001;"></div>
                
                <!-- Miniaturas -->
                <div id="carouselThumbnails" style="position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; z-index: 1001; max-width: 80%; overflow-x: auto; padding: 10px;"></div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentSection = 'dashboard';
        
        // Funci贸n global para evitar errores de referencia
        window.showSection = function(section, event) {
            console.log(' Cambiando a secci贸n:', section);
            
            // Ocultar todas las secciones
            document.querySelectorAll('[id$="-section"]').forEach(el => {
                el.style.display = 'none';
            });

            // Mostrar la secci贸n seleccionada
            const targetSection = document.getElementById(section + '-section');
            
            if (targetSection) {
                targetSection.style.display = 'block';
                console.log(' Secci贸n mostrada:', section);
            } else {
                console.error(' Secci贸n no encontrada:', section + '-section');
            }

            // Actualizar men煤 activo
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Solo actualizar el men煤 activo si se proporciona el evento
            if (event && event.target) {
                event.target.classList.add('active');
            } else {
                // Si no hay evento, buscar el elemento del men煤 correspondiente
                const menuItem = document.querySelector(`[onclick*="window.showSection('${section}')"]`);
                if (menuItem) {
                    menuItem.classList.add('active');
                }
            }

            currentSection = section;
            
            // Cargar datos espec铆ficos seg煤n la secci贸n
            if (section === 'users') {
                setTimeout(() => {
                    if (typeof loadUsersData === 'function') {
                        loadUsersData();
                    }
                }, 100);
            }
            
            if (section === 'hotels') {
                setTimeout(() => {
                    if (typeof loadHotelsTable === 'function') {
                        loadHotelsTable();
                    }
                    if (typeof updateHotelsStats === 'function') {
                        updateHotelsStats();
                    }
                }, 100);
            }
            
            if (section === 'reservations') {
                setTimeout(() => {
                    if (typeof loadReservationsTable === 'function') {
                        loadReservationsTable();
                    }
                    if (typeof updateReservationsStats === 'function') {
                        updateReservationsStats();
                    }
                }, 100);
            }
        };

        // Funci贸n para cerrar modal de edici贸n de hoteles
        function closeEditHotelModal() {
            const modal = document.getElementById('editHotelModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Funci贸n para cerrar modal de vista previa de im谩genes
        function closeImagePreviewModal() {
            const modal = document.getElementById('imagePreviewModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Funci贸n para toggle del men煤 de usuario
        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown) {
                dropdown.classList.toggle('show');
            }
        }

        // Funci贸n para toggle del sidebar en m贸vil
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar) {
                sidebar.classList.toggle('open');
            }
        }

        // Funci贸n de logout
        function logout() {
            if (confirm('驴Est谩s seguro de que quieres cerrar sesi贸n?')) {
                // Aqu铆 puedes agregar l贸gica de logout
                alert('Sesi贸n cerrada');
                // Redirigir a login si es necesario
                // window.location.href = 'login.html';
            }
        }

        // Cerrar dropdown cuando se hace clic fuera
        document.addEventListener('click', function(event) {
            const userMenu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('userDropdown');
            
            if (userMenu && dropdown && !userMenu.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });

        // Cerrar sidebar en m贸vil cuando se hace clic en un enlace
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function() {
                if (window.innerWidth <= 768) {
                    const sidebar = document.getElementById('sidebar');
                    if (sidebar) {
                        sidebar.classList.remove('open');
                    }
                }
            });
        });

        // Datos de hoteles (sistema limpio)
        const hotels = [];

        // Funci贸n para generar estrellas
        function getStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    stars += '<span class="material-icons rating-stars">star</span>';
                } else if (i - 0.5 <= rating) {
                    stars += '<span class="material-icons rating-stars">star_half</span>';
                } else {
                    stars += '<span class="material-icons" style="color: #e0e0e0;">star</span>';
                }
            }
            return stars;
        }

        // Funci贸n para cargar hoteles en la tabla
        function loadHotelsTable() {
            console.log(' Cargando tabla de hoteles...');
            
            const tbody = document.getElementById('hotelsTableBody');
            if (!tbody) {
                console.error(' Tbody de hoteles no encontrado');
                return;
            }
            
            // Obtener hoteles del localStorage
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            console.log(` Encontrados ${hotels.length} hoteles en localStorage:`, hotels.map(h => h.name));
            
            tbody.innerHTML = '';

            if (hotels.length === 0) {
                // Mostrar mensaje si no hay hoteles
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="6" style="text-align: center; padding: 40px; color: #666;">
                        <div style="margin-bottom: 20px;">
                            <i class="fas fa-hotel" style="font-size: 3rem; color: #ddd;"></i>
                        </div>
                        <h3 style="margin-bottom: 10px; color: #333;">No hay hoteles registrados</h3>
                        <p style="margin-bottom: 20px; color: #666;">Comienza agregando tu primer hotel</p>
                        <button onclick="addNewHotel()" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Agregar Primer Hotel
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
                return;
            }

            hotels.forEach(hotel => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div>
                            <div class="hotel-name">${hotel.name}</div>
                            <div class="hotel-location">${hotel.location}</div>
                        </div>
                    </td>
                    <td>${hotel.location}</td>
                    <td style="text-align: center;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 4px;">
                            ${getStars(hotel.rating)}
                            <span style="margin-left: 4px;">${hotel.rating}</span>
                        </div>
                    </td>
                    <td style="text-align: center;">${hotel.price || 'No especificado'}</td>
                    <td style="text-align: center;">
                        <span class="status-${hotel.status?.toLowerCase() || 'activo'}">${hotel.status || 'Activo'}</span>
                    </td>
                    <td style="text-align: center;">
                        <button onclick="editHotel('${hotel.id}')" class="action-btn edit" title="Editar">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button onclick="deleteHotel('${hotel.id}')" class="action-btn delete" title="Eliminar">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button onclick="viewHotel('${hotel.id}')" class="action-btn view" title="Ver">
                            <i class="fas fa-eye"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            console.log(` Tabla de hoteles cargada con ${hotels.length} hoteles`);
        }

        // Funci贸n para actualizar estad铆sticas
        function updateStats() {
            // Implementar l贸gica de estad铆sticas
            console.log('Actualizando estad铆sticas...');
        }



        // Funci贸n para editar hotel
        function editHotel(hotelId) {
            // Implementar l贸gica para editar hotel
            console.log('Editando hotel:', hotelId);
        }

        // Funci贸n para cerrar modal de edici贸n
        function closeEditModal() {
            const modal = document.getElementById('editHotelModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Funci贸n para actualizar vista previa de imagen
        function updateImagePreview() {
            // Implementar l贸gica de vista previa
            console.log('Actualizando vista previa de imagen...');
        }

        // Funci贸n para actualizar vista previa de fotos
        function updatePhotosPreview() {
            // Implementar l贸gica de vista previa de fotos
            console.log('Actualizando vista previa de fotos...');
        }

        // Funci贸n para guardar cambios del hotel
        function saveHotelChanges() {
            // Implementar l贸gica para guardar cambios
            console.log('Guardando cambios del hotel...');
            closeEditHotelModal();
        }

        // Funci贸n para sincronizar con index.html
        function syncWithIndexHtml() {
            // Implementar sincronizaci贸n
            console.log('Sincronizando con index.html...');
        }

        // Funci贸n para abrir gestor de im谩genes
        function openImageManager(mode) {
            // Implementar gestor de im谩genes
            console.log('Abriendo gestor de im谩genes en modo:', mode);
        }

        // Funci贸n para cerrar gestor de im谩genes
        function closeImageManager() {
            // Implementar cierre del gestor
            console.log('Cerrando gestor de im谩genes...');
        }

        // Funci贸n para obtener slug del hotel
        function getHotelSlug(name) {
            return name.toLowerCase().replace(/[^a-z0-9]/g, '-');
        }

        // Funci贸n para cargar im谩genes disponibles
        function loadAvailableImages(hotelId) {
            // Implementar carga de im谩genes
            console.log('Cargando im谩genes para hotel:', hotelId);
        }

        // Funci贸n para cargar fotos del hotel
        function loadHotelPhotos(hotel) {
            // Implementar carga de fotos
            console.log('Cargando fotos del hotel:', hotel);
        }

        // Funci贸n para renderizar gestor de im谩genes
        function renderImageManager() {
            // Implementar renderizado del gestor
            console.log('Renderizando gestor de im谩genes...');
        }

        // Funci贸n para alternar selecci贸n de imagen
        function toggleImageSelection(imagePath) {
            // Implementar selecci贸n de imagen
            console.log('Alternando selecci贸n de imagen:', imagePath);
        }

        // Funci贸n para ver foto
        function viewPhoto(imagePath) {
            // Implementar vista de foto
            console.log('Viendo foto:', imagePath);
        }

        // Funci贸n para eliminar foto
        function deletePhoto(imagePath) {
            // Implementar eliminaci贸n de foto
            console.log('Eliminando foto:', imagePath);
        }

        // Funci贸n para actualizar contador de fotos
        function updatePhotoCounter() {
            // Implementar actualizaci贸n de contador
            console.log('Actualizando contador de fotos...');
        }

        // Funci贸n para aplicar selecci贸n de imagen
        function applyImageSelection() {
            // Implementar aplicaci贸n de selecci贸n
            console.log('Aplicando selecci贸n de imagen...');
        }

        // Funci贸n para subir im谩genes
        function uploadImages() {
            // Implementar subida de im谩genes
            console.log('Subiendo im谩genes...');
        }

        // Funci贸n para crear archivo de imagen
        function createImageFile(path, fileName, hotel, photoNumber) {
            // Implementar creaci贸n de archivo
            console.log('Creando archivo de imagen:', fileName);
        }

        // Funci贸n para verificar si existe imagen
        function checkImageExists(imagePath) {
            // Implementar verificaci贸n de imagen
            console.log('Verificando imagen:', imagePath);
            return true;
        }

        // Funci贸n para validar ruta de imagen
        function validateImagePath(imagePath) {
            // Implementar validaci贸n de ruta
            console.log('Validando ruta:', imagePath);
            return true;
        }

        // Funci贸n para mostrar ayuda de imagen
        function showImageHelp() {
            // Implementar ayuda de imagen
            console.log('Mostrando ayuda de imagen...');
        }

        // Funci贸n para eliminar hotel
        function deleteHotel(hotelId) {
            if (confirm('驴Est谩s seguro de que quieres eliminar este hotel?')) {
                // Implementar eliminaci贸n
                console.log('Eliminando hotel:', hotelId);
            }
        }

        // Funci贸n para ver hotel
        function viewHotel(hotelId) {
            // Implementar vista de hotel
            console.log('Viendo hotel:', hotelId);
        }

        // Funci贸n para exportar hoteles
        function exportHotels() {
            // Implementar exportaci贸n
            console.log('Exportando hoteles...');
        }

        // Funci贸n para refrescar hoteles
        function refreshHotels() {
            loadHotelsTable();
            updateStats();
            alert('Datos actualizados correctamente');
        }

        // Funci贸n para inicializar dashboard
        function initializeDashboard() {
            // Inicializar bases de datos
            if (typeof initClientesDB === 'function') {
                initClientesDB();
            }
            if (typeof initHotelsDB === 'function') {
                initHotelsDB();
            }
            if (typeof initReservationsDB === 'function') {
                initReservationsDB();
            }
            if (typeof initQuotesDB === 'function') {
                initQuotesDB();
            }
            if (typeof syncQuotesFromIndex === 'function') {
                syncQuotesFromIndex();
            }
            
            window.showSection('dashboard', null);
            
            if (typeof loadHotelsTable === 'function') {
                loadHotelsTable();
            }
            if (typeof updateHotelsStats === 'function') {
                updateHotelsStats();
            }
            
            // Event listeners para el formulario de edici贸n de hoteles
            const editHotelForm = document.getElementById('editHotelForm');
            if (editHotelForm) {
                editHotelForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    saveHotelChanges();
                });
            }
            
            // Event listeners para previews en tiempo real
            const imageInput = document.getElementById('editHotelImage');
            if (imageInput) {
                imageInput.addEventListener('input', updateImagePreview);
            }
            
            const photosInput = document.getElementById('editHotelPhotos');
            if (photosInput) {
                photosInput.addEventListener('input', updatePhotosPreview);
            }
            
            // Cerrar modal al hacer clic fuera
            window.addEventListener('click', function(event) {
                const editModal = document.getElementById('editHotelModal');
                const imageModal = document.getElementById('imageManagerModal');
                const carouselModal = document.getElementById('photoCarouselModal');
                
                if (event.target === editModal) {
                    closeEditModal();
                }
                if (event.target === imageModal) {
                    closeImageManager();
                }
                if (event.target === carouselModal) {
                    // Implementar cierre de carrusel
                }
            });
        }

        // Funci贸n para limpiar im谩genes duplicadas
        function cleanDuplicateImages() {
            // Implementar limpieza
            console.log('Limpiando im谩genes duplicadas...');
        }

        // Funci贸n para resetear gestor de im谩genes
        function resetImageManager() {
            // Implementar reset
            console.log('Reseteando gestor de im谩genes...');
        }

        // Funci贸n para abrir carrusel de fotos
        function openPhotoCarousel() {
            // Implementar carrusel
            console.log('Abriendo carrusel de fotos...');
        }

        // Funci贸n para cerrar carrusel de fotos
        function closePhotoCarousel() {
            // Implementar cierre de carrusel
            console.log('Cerrando carrusel de fotos...');
        }

        // Funci贸n para actualizar imagen del carrusel
        function updateCarouselImage() {
            // Implementar actualizaci贸n de imagen
            console.log('Actualizando imagen del carrusel...');
        }

        // Funci贸n para actualizar miniaturas del carrusel
        function updateCarouselThumbnails() {
            // Implementar actualizaci贸n de miniaturas
            console.log('Actualizando miniaturas del carrusel...');
        }

        // Funci贸n para actualizar contador del carrusel
        function updateCarouselCounter() {
            // Implementar contador
            console.log('Actualizando contador del carrusel...');
        }

        // Funci贸n para foto anterior
        function previousPhoto() {
            // Implementar foto anterior
            console.log('Foto anterior...');
        }

        // Funci贸n para foto siguiente
        function nextPhoto() {
            // Implementar foto siguiente
            console.log('Foto siguiente...');
        }

        // Funci贸n para manejar teclas del carrusel
        function handleCarouselKeydown(event) {
            // Implementar manejo de teclas
            console.log('Manejando tecla:', event.key);
        }

        // Funci贸n para cargar fotos guardadas
        function loadSavedPhotos() {
            // Implementar carga de fotos
            console.log('Cargando fotos guardadas...');
        }

        // ===== FUNCIONES PARA GESTIN DE COTIZACIONES =====
        
        // Funci贸n para inicializar base de datos de cotizaciones
        function initQuotesDB() {
            console.log(' Inicializando base de datos de cotizaciones...');
            
            // Verificar si ya existen cotizaciones en localStorage
            const existingQuotes = JSON.parse(localStorage.getItem('quotesDB') || '[]');
            console.log(` Estado inicial: ${existingQuotes.length} cotizaciones en localStorage`);
            
            if (existingQuotes.length === 0) {
                console.log(' No hay cotizaciones, la base de datos se inicializar谩 cuando lleguen las primeras cotizaciones');
            }
            
            // Cargar cotizaciones iniciales
            loadQuotesTable();
            updateQuotesStats();
        }
        
        // Funci贸n para cargar tabla de cotizaciones
        function loadQuotesTable() {
            console.log(' Cargando tabla de cotizaciones...');
            
            const quotes = JSON.parse(localStorage.getItem('quotesDB') || '[]');
            const tbody = document.getElementById('quotesTableBody');
            const noQuotesMessage = document.getElementById('noQuotesMessage');
            
            if (!tbody) {
                console.error(' No se encontr贸 el tbody de cotizaciones');
                return;
            }
            
            if (quotes.length === 0) {
                tbody.innerHTML = '';
                if (noQuotesMessage) noQuotesMessage.style.display = 'block';
                console.log(' No hay cotizaciones para mostrar');
                return;
            }
            
            if (noQuotesMessage) noQuotesMessage.style.display = 'none';
            
            tbody.innerHTML = '';
            
            quotes.forEach((quote, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${quote.id || `COT-${String(index + 1).padStart(3, '0')}`}</td>
                    <td>${quote.hotel}</td>
                    <td>${quote.clientName || 'An贸nimo'}</td>
                    <td>${quote.dateRange}</td>
                    <td>${quote.travelers}</td>
                    <td><span class="quote-status ${quote.status || 'pending'}">${quote.status || 'Pendiente'}</span></td>
                    <td>${formatDate(quote.timestamp || new Date())}</td>
                    <td>
                        <button onclick="viewQuote('${quote.id || index}')" class="action-btn view" title="Ver detalles">
                            <span class="material-icons">visibility</span>
                        </button>
                        <button onclick="processQuote('${quote.id || index}')" class="action-btn edit" title="Procesar">
                            <span class="material-icons">check_circle</span>
                        </button>
                        <button onclick="deleteQuote('${quote.id || index}')" class="action-btn delete" title="Eliminar">
                            <span class="material-icons">delete</span>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            console.log(` Tabla de cotizaciones cargada: ${quotes.length} cotizaciones`);
        }
        
        // Funci贸n para actualizar estad铆sticas de cotizaciones
        function updateQuotesStats() {
            console.log(' Actualizando estad铆sticas de cotizaciones...');
            
            const quotes = JSON.parse(localStorage.getItem('quotesDB') || '[]');
            
            // Calcular estad铆sticas
            const totalQuotes = quotes.length;
            const pendingQuotes = quotes.filter(q => !q.status || q.status === 'pending').length;
            const processedQuotes = quotes.filter(q => q.status === 'processed').length;
            
            // Calcular promedio por d铆a (煤ltimos 7 d铆as)
            const last7Days = quotes.filter(q => {
                const quoteDate = new Date(q.timestamp);
                const weekAgo = new Date();
                weekAgo.setDate(weekAgo.getDate() - 7);
                return quoteDate >= weekAgo;
            });
            const avgQuotesPerDay = last7Days.length / 7;
            
            // Actualizar elementos en el DOM
            const totalElement = document.getElementById('totalQuotes');
            const pendingElement = document.getElementById('pendingQuotes');
            const processedElement = document.getElementById('processedQuotes');
            const avgElement = document.getElementById('avgQuotesPerDay');
            
            if (totalElement) totalElement.textContent = totalQuotes;
            if (pendingElement) pendingElement.textContent = pendingQuotes;
            if (processedElement) processedElement.textContent = processedQuotes;
            if (avgElement) avgElement.textContent = avgQuotesPerDay.toFixed(1);
            
            console.log(` Estad铆sticas actualizadas: Total=${totalQuotes}, Pendientes=${pendingQuotes}, Procesadas=${processedQuotes}, Promedio/D铆a=${avgQuotesPerDay.toFixed(1)}`);
        }
        
        // Funci贸n para ver detalles de una cotizaci贸n
        function viewQuote(quoteId) {
            console.log('锔 Viendo detalles de cotizaci贸n:', quoteId);
            
            const quotes = JSON.parse(localStorage.getItem('quotesDB') || '[]');
            const quote = quotes.find(q => q.id === quoteId || quotes.indexOf(q) === parseInt(quoteId));
            
            if (!quote) {
                alert(' Cotizaci贸n no encontrada');
                return;
            }
            
            // Crear modal con detalles de la cotizaci贸n
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'flex';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 500px;">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>Detalles de Cotizaci贸n</h2>
                    
                    <div style="display: grid; gap: 15px;">
                        <div style="display: flex; align-items: center; gap: 10px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <span style="font-size: 1.5rem;"></span>
                            <div>
                                <div style="font-weight: 600; color: #333;">Hotel</div>
                                <div style="color: #666;">${quote.hotel}</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 10px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <span style="font-size: 1.5rem;"></span>
                            <div>
                                <div style="font-weight: 600; color: #333;">Fechas</div>
                                <div style="color: #666;">${quote.dateRange}</div>
                                <div style="font-size: 0.8rem; color: #888;">Check-in: ${quote.checkIn} | Check-out: ${quote.checkOut}</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 10px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <span style="font-size: 1.5rem;"></span>
                            <div>
                                <div style="font-weight: 600; color: #333;">Hu茅spedes</div>
                                <div style="color: #666;">${quote.travelers}</div>
                                ${quote.children > 0 ? `<div style="font-size: 0.8rem; color: #888;">Edades: ${quote.childrenAges.join(', ')} a帽os</div>` : ''}
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 10px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <span style="font-size: 1.5rem;"></span>
                            <div>
                                <div style="font-weight: 600; color: #333;">Estado</div>
                                <div style="color: #666;"><span class="quote-status ${quote.status || 'pending'}">${quote.status || 'Pendiente'}</span></div>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 10px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <span style="font-size: 1.5rem;"></span>
                            <div>
                                <div style="font-weight: 600; color: #333;">Fecha de Solicitud</div>
                                <div style="color: #666;">${formatDate(quote.timestamp)}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button onclick="processQuote('${quoteId}')" class="form-button" style="background: #28a745; color: white;">
                             Marcar como Procesada
                        </button>
                        <button onclick="deleteQuote('${quoteId}')" class="form-button" style="background: #dc3545; color: white;">
                            锔 Eliminar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Cerrar modal al hacer clic fuera
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }
        
        // Funci贸n para procesar una cotizaci贸n
        function processQuote(quoteId) {
            console.log(' Procesando cotizaci贸n:', quoteId);
            
            const quotes = JSON.parse(localStorage.getItem('quotesDB') || '[]');
            const quoteIndex = quotes.findIndex(q => q.id === quoteId || quotes.indexOf(q) === parseInt(quoteId));
            
            if (quoteIndex === -1) {
                alert(' Cotizaci贸n no encontrada');
                return;
            }
            
            quotes[quoteIndex].status = 'processed';
            quotes[quoteIndex].processedAt = new Date().toISOString();
            
            localStorage.setItem('quotesDB', JSON.stringify(quotes));
            
            // Actualizar tabla y estad铆sticas
            loadQuotesTable();
            updateQuotesStats();
            
            alert(' Cotizaci贸n marcada como procesada');
            
            // Cerrar modal si est谩 abierto
            const modal = document.querySelector('.modal');
            if (modal) modal.remove();
        }
        
        // Funci贸n para eliminar una cotizaci贸n
        function deleteQuote(quoteId) {
            console.log('锔 Eliminando cotizaci贸n:', quoteId);
            
            if (!confirm('驴Est谩s seguro de que quieres eliminar esta cotizaci贸n?')) {
                return;
            }
            
            const quotes = JSON.parse(localStorage.getItem('quotesDB') || '[]');
            const quoteIndex = quotes.findIndex(q => q.id === quoteId || quotes.indexOf(q) === parseInt(quoteId));
            
            if (quoteIndex === -1) {
                alert(' Cotizaci贸n no encontrada');
                return;
            }
            
            quotes.splice(quoteIndex, 1);
            localStorage.setItem('quotesDB', JSON.stringify(quotes));
            
            // Actualizar tabla y estad铆sticas
            loadQuotesTable();
            updateQuotesStats();
            
            alert(' Cotizaci贸n eliminada');
            
            // Cerrar modal si est谩 abierto
            const modal = document.querySelector('.modal');
            if (modal) modal.remove();
        }
        
        // Funci贸n para actualizar cotizaciones
        function refreshQuotes() {
            console.log(' Actualizando cotizaciones...');
            loadQuotesTable();
            updateQuotesStats();
            alert(' Cotizaciones actualizadas');
        }
        
        // Funci贸n para exportar cotizaciones
        function exportQuotes() {
            console.log(' Exportando cotizaciones...');
            
            const quotes = JSON.parse(localStorage.getItem('quotesDB') || '[]');
            
            if (quotes.length === 0) {
                alert(' No hay cotizaciones para exportar');
                return;
            }
            
            // Crear CSV
            let csv = 'ID,Hotel,Cliente,Fechas,Hu茅spedes,Estado,Fecha\n';
            
            quotes.forEach((quote, index) => {
                csv += `${quote.id || `COT-${String(index + 1).padStart(3, '0')}`},`;
                csv += `"${quote.hotel}",`;
                csv += `"${quote.clientName || 'An贸nimo'}",`;
                csv += `"${quote.dateRange}",`;
                csv += `"${quote.travelers}",`;
                csv += `"${quote.status || 'Pendiente'}",`;
                csv += `"${formatDate(quote.timestamp)}"\n`;
            });
            
            // Descargar archivo
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `cotizaciones_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
            
            alert(' Cotizaciones exportadas correctamente');
        }
        
        // Funci贸n para limpiar todas las cotizaciones
        function clearAllQuotes() {
            console.log('锔 Limpiando todas las cotizaciones...');
            
            if (!confirm('驴Est谩s seguro de que quieres eliminar TODAS las cotizaciones? Esta acci贸n no se puede deshacer.')) {
                return;
            }
            
            localStorage.removeItem('quotesDB');
            loadQuotesTable();
            updateQuotesStats();
            
            alert(' Todas las cotizaciones han sido eliminadas');
        }
        
        // Funci贸n para filtrar cotizaciones
        function filterQuotes() {
            console.log(' Filtrando cotizaciones...');
            
            const searchTerm = document.getElementById('quotesSearch').value.toLowerCase();
            const tbody = document.getElementById('quotesTableBody');
            const rows = tbody.querySelectorAll('tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }
        
        // Funciones auxiliares para promociones de hoteles
        function showPromotionTab(tabName) {
            console.log(' Cambiando a pesta帽a de promoci贸n:', tabName);
            
            // Ocultar todas las pesta帽as
            const tabContents = document.querySelectorAll('.promotion-tab-content');
            tabContents.forEach(content => {
                content.style.display = 'none';
            });
            
            // Mostrar la pesta帽a seleccionada
            const selectedTab = document.getElementById(tabName + '-tab');
            if (selectedTab) {
                selectedTab.style.display = 'block';
            }
        }
        
        function editHotelPromotion(hotelId) {
            console.log('锔 Editando promoci贸n del hotel:', hotelId);
            
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            const hotel = hotels.find(h => h.id === hotelId);
            
            if (!hotel) {
                alert('Hotel no encontrado');
                return;
            }
            
            // Cargar promociones existentes del hotel
            const hotelPromotions = JSON.parse(localStorage.getItem(`promotions_${hotelId}`) || '[]');
            
            showEditPromotionModal(hotel, hotelPromotions);
        }
        
        function viewHotelPromotion(hotelId) {
            console.log('锔 Viendo promoci贸n del hotel:', hotelId);
            
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            const hotel = hotels.find(h => h.id === hotelId);
            
            if (!hotel) {
                alert('Hotel no encontrado');
                return;
            }
            
            const hotelPromotions = JSON.parse(localStorage.getItem(`promotions_${hotelId}`) || '[]');
            showViewPromotionModal(hotel, hotelPromotions);
        }
        
        function deactivateHotelPromotion(hotelId) {
            console.log('革 Pausando promoci贸n del hotel:', hotelId);
            
            if (confirm('驴Est谩s seguro de que quieres pausar esta promoci贸n?')) {
                const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
                const hotelIndex = hotels.findIndex(h => h.id === hotelId);
                
                if (hotelIndex !== -1) {
                    hotels[hotelIndex].promotionStatus = 'paused';
                    localStorage.setItem('hotelsDB', JSON.stringify(hotels));
                    
                    // Actualizar la interfaz
                    showHotelPromotions();
                    alert('Promoci贸n pausada correctamente');
                }
            }
        }
        
        function createHotelPromotion() {
            console.log(' Creando nueva promoci贸n de hotel...');
            
            const hotelId = document.getElementById('promotionHotel').value;
            const promotionType = document.getElementById('promotionType').value;
            const discount = document.getElementById('promotionDiscount').value;
            const price = document.getElementById('promotionPrice').value;
            const description = document.getElementById('promotionDescription').value;
            const startDate = document.getElementById('promotionStartDate').value;
            const endDate = document.getElementById('promotionEndDate').value;
            
            if (!hotelId || !promotionType || !description || !startDate || !endDate) {
                alert(' Por favor completa todos los campos obligatorios');
                return;
            }
            
            // Aqu铆 se guardar铆a la promoci贸n en localStorage
            const promotion = {
                id: `PROM-${Date.now()}`,
                hotelId: hotelId,
                type: promotionType,
                discount: discount,
                price: price,
                description: description,
                startDate: startDate,
                endDate: endDate,
                status: 'active',
                createdAt: new Date().toISOString()
            };
            
            // Guardar en localStorage (implementaci贸n futura)
            console.log(' Promoci贸n creada:', promotion);
            alert(' Promoci贸n creada correctamente');
            
            // Cerrar modal
            const modal = document.querySelector('.modal');
            if (modal) modal.remove();
        }
        
        // Funci贸n para mostrar modal de edici贸n de promociones
        function showEditPromotionModal(hotel, existingPromotions) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1001;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 12px; padding: 24px; max-width: 90%; max-height: 90%; overflow-y: auto; width: 800px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                        <h2 style="margin: 0; color: #333;">锔 Editar Promociones - ${hotel.name}</h2>
                        <button onclick="this.closest('.modal').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
                    </div>
                    
                    <!-- Promociones existentes -->
                    <div style="margin-bottom: 24px;">
                        <h3 style="margin-bottom: 16px; color: #333;">Promociones Existentes</h3>
                        <div id="existing-promotions" style="display: grid; gap: 12px;">
                            ${existingPromotions.map((promo, index) => `
                                <div style="background: #f5f5f5; padding: 16px; border-radius: 8px; border-left: 4px solid #2196f3;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <h4 style="margin: 0; color: #333;">${promo.name}</h4>
                                        <span style="background: ${promo.status === 'active' ? '#4caf50' : '#f44336'}; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">${promo.status === 'active' ? 'Activo' : 'Pausado'}</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #666;">${promo.description}</p>
                                    <div style="display: flex; gap: 8px;">
                                        <button onclick="editSpecificPromotion('${hotel.id}', ${index})" style="background: #2196f3; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">Editar</button>
                                        <button onclick="deletePromotion('${hotel.id}', ${index})" style="background: #f44336; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">Eliminar</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <!-- Formulario para nueva promoci贸n -->
                    <div style="border-top: 2px solid #e0e0e0; padding-top: 24px;">
                        <h3 style="margin-bottom: 16px; color: #333;"> Agregar Nueva Promoci贸n</h3>
                        
                        <form id="newPromotionForm" style="display: grid; gap: 16px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">Nombre de la Promoci贸n</label>
                                    <input type="text" id="promoName" placeholder="Ej: Descuento de Verano" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">Tipo de Promoci贸n</label>
                                    <select id="promoType" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                        <option value="discount">Descuento</option>
                                        <option value="package">Paquete</option>
                                        <option value="early-bird">Early Bird</option>
                                        <option value="last-minute">Last Minute</option>
                                        <option value="seasonal">Temporada</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 500;">Descripci贸n</label>
                                <textarea id="promoDescription" placeholder="Describe la promoci贸n..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; height: 80px; resize: vertical;"></textarea>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px;">
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">Descuento (%)</label>
                                    <input type="number" id="promoDiscount" min="0" max="100" placeholder="20" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">Fecha Inicio</label>
                                    <input type="date" id="promoStartDate" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">Fecha Fin</label>
                                    <input type="date" id="promoEndDate" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 12px; justify-content: flex-end;">
                                <button type="button" onclick="this.closest('.modal').remove()" style="background: #6c757d; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer;">Cancelar</button>
                                <button type="submit" style="background: #4caf50; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer;">Guardar Promoci贸n</button>
                            </div>
                        </form>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Event listener para el formulario
            document.getElementById('newPromotionForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveNewPromotion(hotel.id);
            });
        }
        
        // Funci贸n para guardar nueva promoci贸n
        function saveNewPromotion(hotelId) {
            const promoData = {
                id: Date.now() + Math.random().toString(36).substr(2, 9),
                name: document.getElementById('promoName').value,
                type: document.getElementById('promoType').value,
                description: document.getElementById('promoDescription').value,
                discount: document.getElementById('promoDiscount').value,
                startDate: document.getElementById('promoStartDate').value,
                endDate: document.getElementById('promoEndDate').value,
                status: 'active',
                createdAt: new Date().toISOString()
            };
            
            // Validar datos
            if (!promoData.name || !promoData.description) {
                alert('Por favor completa todos los campos obligatorios');
                return;
            }
            
            // Guardar promoci贸n
            const existingPromotions = JSON.parse(localStorage.getItem(`promotions_${hotelId}`) || '[]');
            existingPromotions.push(promoData);
            localStorage.setItem(`promotions_${hotelId}`, JSON.stringify(existingPromotions));
            
            alert('Promoci贸n guardada correctamente');
            document.querySelector('.modal').remove();
            showHotelPromotions(); // Recargar la vista
        }
        
        // Funci贸n para mostrar modal de vista de promociones
        function showViewPromotionModal(hotel, promotions) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1001;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 12px; padding: 24px; max-width: 90%; max-height: 90%; overflow-y: auto; width: 800px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                        <h2 style="margin: 0; color: #333;">锔 Ver Promociones - ${hotel.name}</h2>
                        <button onclick="this.closest('.modal').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
                    </div>
                    
                    <div style="display: grid; gap: 16px;">
                        ${promotions.length > 0 ? promotions.map(promo => `
                            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; border-left: 4px solid #4caf50;">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                                    <h3 style="margin: 0; color: #333;">${promo.name}</h3>
                                    <span style="background: ${promo.status === 'active' ? '#4caf50' : '#f44336'}; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">${promo.status === 'active' ? 'Activo' : 'Pausado'}</span>
                                </div>
                                <p style="margin: 0 0 12px 0; color: #666;">${promo.description}</p>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 12px;">
                                    <div>
                                        <strong>Tipo:</strong> ${promo.type}
                                    </div>
                                    <div>
                                        <strong>Descuento:</strong> ${promo.discount}%
                                    </div>
                                    <div>
                                        <strong>Inicio:</strong> ${promo.startDate}
                                    </div>
                                    <div>
                                        <strong>Fin:</strong> ${promo.endDate}
                                    </div>
                                </div>
                                <div style="font-size: 0.9rem; color: #666;">
                                    <strong>Creado:</strong> ${new Date(promo.createdAt).toLocaleDateString()}
                                </div>
                            </div>
                        `).join('') : `
                            <div style="text-align: center; padding: 40px; color: #666;">
                                <p>No hay promociones activas para este hotel</p>
                            </div>
                        `}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        // Funci贸n para editar promoci贸n espec铆fica
        function editSpecificPromotion(hotelId, promoIndex) {
            console.log('锔 Editando promoci贸n espec铆fica:', hotelId, promoIndex);
            // Implementar edici贸n de promoci贸n espec铆fica
            alert('Funci贸n de edici贸n espec铆fica en desarrollo');
        }
        
        // Funci贸n para eliminar promoci贸n
        function deletePromotion(hotelId, promoIndex) {
            if (confirm('驴Est谩s seguro de que quieres eliminar esta promoci贸n?')) {
                const promotions = JSON.parse(localStorage.getItem(`promotions_${hotelId}`) || '[]');
                promotions.splice(promoIndex, 1);
                localStorage.setItem(`promotions_${hotelId}`, JSON.stringify(promotions));
                
                alert('Promoci贸n eliminada correctamente');
                showHotelPromotions(); // Recargar la vista
            }
        }
        
        // Funci贸n para probar la sincronizaci贸n de cotizaciones
        function testQuotesSync() {
            console.log('И Probando sincronizaci贸n de cotizaciones...');
            
            // Crear una cotizaci贸n de prueba
            const testQuote = {
                id: `TEST-${Date.now()}`,
                hotel: 'Hotel de Prueba',
                clientName: 'Usuario de Prueba',
                dateRange: '15/12/2025 - 18/12/2025',
                travelers: '2 adultos  1 ni帽o',
                status: 'pending',
                timestamp: new Date().toLocaleString('es-ES'),
                checkIn: '2025-12-15',
                checkOut: '2025-12-18',
                adults: 2,
                children: 1,
                childrenAges: [8]
            };
            
            // Agregar a localStorage
            const existingQuotes = JSON.parse(localStorage.getItem('quotesDB') || '[]');
            existingQuotes.push(testQuote);
            localStorage.setItem('quotesDB', JSON.stringify(existingQuotes));
            
            // Disparar evento
            window.dispatchEvent(new CustomEvent('quotesDBChanged'));
            
            console.log(' Cotizaci贸n de prueba agregada');
            alert(' Cotizaci贸n de prueba agregada. Verifica que aparezca en la tabla.');
        }
        
        // Funci贸n para sincronizar cotizaciones desde index.html
        function syncQuotesFromIndex() {
            console.log(' Sincronizando cotizaciones desde index.html...');
            
            // Escuchar cambios en localStorage de cotizaciones (desde otras pesta帽as)
            window.addEventListener('storage', function(e) {
                if (e.key === 'quotesDB') {
                    console.log(' Cambio detectado en quotesDB desde otra pesta帽a, actualizando...');
                    loadQuotesTable();
                    updateQuotesStats();
                }
            });
            
            // Escuchar eventos personalizados (desde la misma pesta帽a)
            window.addEventListener('quotesDBChanged', function() {
                console.log(' Evento local detectado, actualizando...');
                loadQuotesTable();
                updateQuotesStats();
            });
            
            // Tambi茅n verificar cambios peri贸dicamente (como respaldo)
            setInterval(function() {
                const currentQuotes = JSON.parse(localStorage.getItem('quotesDB') || '[]');
                if (window.lastQuotesCount === undefined) {
                    window.lastQuotesCount = currentQuotes.length;
                } else if (window.lastQuotesCount !== currentQuotes.length) {
                    console.log(' Cambio detectado en quotesDB (verificaci贸n peri贸dica), actualizando...');
                    window.lastQuotesCount = currentQuotes.length;
                    loadQuotesTable();
                    updateQuotesStats();
                }
            }, 2000); // Verificar cada 2 segundos
        }

        // Funci贸n para inicializar base de datos de hoteles
        function initHotelsDB() {
            console.log(' Inicializando base de datos de hoteles...');
            
            // Verificar si ya existen hoteles en localStorage
            const existingHotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            console.log(` Estado inicial: ${existingHotels.length} hoteles en localStorage`);
            
            if (existingHotels.length > 0) {
                console.log(' Hoteles existentes:', existingHotels.map(h => h.name));
            }
            
            // Forzar la carga de hoteles por defecto si no hay suficientes
            if (existingHotels.length < 6) {
                console.log(` Solo hay ${existingHotels.length} hoteles, agregando hoteles por defecto...`);
                
                // Limpiar localStorage para asegurar una carga limpia
                localStorage.removeItem('hotelsDB');
                
                // Hoteles por defecto basados en index.html
                const defaultHotels = [
                    {
                        id: 'hotel-termas-chillan',
                        name: 'Hotel Termas Chill谩n',
                        location: 'Chill谩n, uble, Chile',
                        description: 'Termas y Spa en la cordillera de Chill谩n',
                        rating: 4.3,
                        price: '$160',
                        status: 'Activo',
                        amenities: ['Termas', 'Spa', 'Restaurante', 'WiFi', 'Estacionamiento'],
                        badge: 'Termas',
                        airport: {
                            name: 'Aeropuerto Carriel Sur',
                            code: 'CCP',
                            distance: '85 km',
                            city: 'Concepci贸n'
                        },
                        borderCrossing: {
                            name: 'Paso Pehuenche',
                            distance: '120 km',
                            route: 'Ruta CH-115'
                        },
                        image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                        images: [
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop'
                        ],
                        coordinates: { lat: -36.6064, lng: -71.2167 },
                        googleMaps: 'https://maps.google.com/?q=Hotel+Termas+Chill谩n,+Chill谩n,+uble,+Chile',
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    },
                    {
                        id: 'hotel-puyehue',
                        name: 'Hotel Terma de Puyehue',
                        location: 'Osorno, Los Lagos, Chile',
                        description: 'Termas y Spa de lujo en la Patagonia',
                        rating: 4.5,
                        price: '$200',
                        status: 'Activo',
                        amenities: ['Piscina', 'Spa', 'Restaurante', 'WiFi', 'Estacionamiento'],
                        badge: 'Termas',
                        airport: {
                            name: 'Aeropuerto Ca帽al Bajo Carlos Hott Siebert',
                            code: 'ZOS',
                            distance: '45 km',
                            city: 'Osorno'
                        },
                        borderCrossing: {
                            name: 'Paso Cardenal Samor茅',
                            distance: '45 km',
                            route: 'Ruta CH-215'
                        },
                        image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                        images: [
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop'
                        ],
                        coordinates: { lat: -40.683222, lng: -72.274986 },
                        googleMaps: 'https://maps.google.com/?q=Termas+de+Puyehue,+Osorno,+Los+Lagos,+Chile',
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    },
                    {
                        id: 'hotel-huilo-huilo',
                        name: 'Hotel Huilo-Huilo',
                        location: 'Panguipulli, Los R铆os, Chile',
                        description: 'Inmersi贸n en el bosque nativo',
                        rating: 4.2,
                        price: '$160',
                        status: 'Activo',
                        amenities: ['Naturaleza', 'Trekking', 'Aves', 'Restaurante', 'WiFi'],
                        badge: 'Bosque',
                        airport: {
                            name: 'Aeropuerto Puc贸n',
                            code: 'ZPC',
                            distance: '45 km',
                            city: 'Puc贸n'
                        },
                        borderCrossing: {
                            name: 'Paso Mamuil Malal',
                            distance: '85 km',
                            route: 'Ruta CH-199'
                        },
                        image: 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                        images: [
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop'
                        ],
                        coordinates: { lat: -39.8500, lng: -72.0000 },
                        googleMaps: 'https://maps.google.com/?q=Hotel+Huilo-Huilo,+Panguipulli,+Los+R铆os,+Chile',
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    },
                    {
                        id: 'hotel-corralco',
                        name: 'Hotel Corralco Resort',
                        location: 'Lonquimay, La Araucan铆a, Chile',
                        description: 'Esqu铆 y aventura en la monta帽a',
                        rating: 4.7,
                        price: '$240',
                        status: 'Activo',
                        amenities: ['Esqu铆', 'Monta帽a', 'Chimenea', 'Restaurante', 'WiFi'],
                        badge: 'Esqu铆',
                        airport: {
                            name: 'Aeropuerto La Araucan铆a',
                            code: 'ZCO',
                            distance: '65 km',
                            city: 'Temuco'
                        },
                        borderCrossing: {
                            name: 'Paso Icalma',
                            distance: '95 km',
                            route: 'Ruta CH-181'
                        },
                        image: 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop',
                        images: [
                            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop'
                        ],
                        coordinates: { lat: -38.6500, lng: -71.6500 },
                        googleMaps: 'https://maps.google.com/?q=Hotel+Corralco+Resort,+Lonquimay,+La+Araucan铆a,+Chile',
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    },
                    {
                        id: 'hotel-futangue',
                        name: 'Hotel Futangue',
                        location: 'Lago Ranco, Los R铆os, Chile',
                        description: 'Lujo y naturaleza en su m谩xima expresi贸n',
                        rating: 5.0,
                        price: '$330',
                        status: 'Activo',
                        amenities: ['5 Estrellas', 'Vinos', 'Piscina', 'Spa', 'Restaurante'],
                        badge: 'Lujo',
                        airport: {
                            name: 'Aeropuerto Ca帽al Bajo Carlos Hott Siebert',
                            code: 'ZOS',
                            distance: '75 km',
                            city: 'Osorno'
                        },
                        borderCrossing: {
                            name: 'Paso Cardenal Samor茅',
                            distance: '110 km',
                            route: 'Ruta CH-215'
                        },
                        image: 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop',
                        images: [
                            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop'
                        ],
                        coordinates: { lat: -40.3500, lng: -72.4500 },
                        googleMaps: 'https://maps.google.com/?q=Hotel+Futangue,+Lago+Ranco,+Los+R铆os,+Chile',
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    },
                    {
                        id: 'cabanas-aguas-calientes',
                        name: 'Caba帽as Termas de Aguas Calientes',
                        location: 'Osorno, Los Lagos, Chile',
                        description: 'Aguas Calientes - Experiencia 煤nica',
                        rating: 4.0,
                        price: '$110',
                        status: 'Activo',
                        amenities: ['Caba帽as', 'Termas', 'Naturaleza', 'WiFi', 'Estacionamiento'],
                        badge: 'Caba帽as',
                        airport: {
                            name: 'Aeropuerto Ca帽al Bajo Carlos Hott Siebert',
                            code: 'ZOS',
                            distance: '25 km',
                            city: 'Osorno'
                        },
                        borderCrossing: {
                            name: 'Paso Cardenal Samor茅',
                            distance: '35 km',
                            route: 'Ruta CH-215'
                        },
                        image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                        images: [
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop'
                        ],
                        coordinates: { lat: -40.735366, lng: -72.307616 },
                        googleMaps: 'https://maps.google.com/?q=Termas+Aguas+Calientes,+Osorno,+Los+Lagos,+Chile',
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    }
                ];
                
                // Guardar hoteles por defecto en localStorage
                localStorage.setItem('hotelsDB', JSON.stringify(defaultHotels));
                
                console.log(` ${defaultHotels.length} hoteles por defecto agregados a la base de datos`);
                console.log(' Hoteles agregados:', defaultHotels.map(h => h.name));
                
                // Verificar que se guardaron correctamente
                const savedHotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
                console.log(` Verificaci贸n: ${savedHotels.length} hoteles guardados en localStorage`);
                console.log(' Hoteles guardados:', savedHotels.map(h => h.name));
                
                // Notificar a index.html sobre el cambio
                window.dispatchEvent(new StorageEvent('storage', {
                    key: 'hotelsDB',
                    newValue: JSON.stringify(defaultHotels),
                    oldValue: '[]'
                }));
                
            } else {
                console.log(`癸 Ya existen ${existingHotels.length} hoteles en la base de datos`);
            }
            
            // Mostrar estado final
            showHotelsStatus();
        }

        // Funci贸n para mostrar estado actual de hoteles
        function showHotelsStatus() {
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            console.log(' ESTADO ACTUAL DE HOTELES EN DASHBOARD:');
            console.log(` Total de hoteles: ${hotels.length}`);
            console.log(' Lista de hoteles:');
            hotels.forEach((hotel, index) => {
                console.log(`   ${index + 1}. ${hotel.name} (${hotel.location})`);
            });
            
            if (hotels.length === 0) {
                console.log('锔 No hay hoteles en localStorage');
            } else if (hotels.length < 6) {
                console.log(`锔 Solo hay ${hotels.length} hoteles, deber铆an ser 6`);
            } else {
                console.log(' Todos los hoteles est谩n cargados correctamente');
            }
        }
        
        // Funci贸n para guardar base de datos de hoteles
        function saveHotelsDB() {
            // Implementar guardado
            console.log('Guardando base de datos de hoteles...');
        }

        // Funci贸n para agregar nuevo hotel
        function addNewHotel() {
            console.log(' Abriendo formulario para agregar nuevo hotel...');
            
            // Verificar si el modal existe
            const modal = document.getElementById('editHotelModal');
            if (!modal) {
                console.error(' Modal no encontrado');
                alert(' Error: Modal no encontrado');
                return;
            }
            
            console.log(' Modal encontrado, procediendo...');
            
            // Limpiar el formulario
            const form = document.getElementById('editHotelForm');
            if (form) {
                form.reset();
                console.log(' Formulario reseteado');
            } else {
                console.error(' Formulario no encontrado');
            }
            
            // Limpiar campos espec铆ficos
            const nameInput = document.getElementById('editHotelName');
            const locationInput = document.getElementById('editHotelLocation');
            const ratingInput = document.getElementById('editHotelRating');
            const priceInput = document.getElementById('editHotelPrice');
            const descriptionTextarea = document.getElementById('editHotelDescription');
            const amenitiesInput = document.getElementById('editHotelAmenities');
            const statusSelect = document.getElementById('editHotelStatus');
            
            console.log('Campos encontrados:', {
                nameInput: !!nameInput,
                locationInput: !!locationInput,
                ratingInput: !!ratingInput,
                priceInput: !!priceInput,
                descriptionTextarea: !!descriptionTextarea,
                amenitiesInput: !!amenitiesInput,
                statusSelect: !!statusSelect
            });
            
            if (nameInput) nameInput.value = '';
            if (locationInput) locationInput.value = '';
            if (ratingInput) ratingInput.value = '';
            if (priceInput) priceInput.value = '';
            if (descriptionTextarea) descriptionTextarea.value = '';
            if (amenitiesInput) amenitiesInput.value = '';
            if (statusSelect) statusSelect.value = 'Activo';
            
            // Cambiar el t铆tulo del modal
            const modalTitle = document.querySelector('#editHotelModal h2');
            if (modalTitle) {
                modalTitle.textContent = ' Agregar Nuevo Hotel';
                console.log(' T铆tulo del modal actualizado');
            } else {
                console.error(' T铆tulo del modal no encontrado');
            }
            
            // Mostrar el modal
            modal.style.display = 'block';
            console.log(' Modal mostrado');
            
            // Configurar el formulario para modo "agregar"
            if (form) {
                form.dataset.mode = 'add';
                form.dataset.hotelId = null;
                console.log(' Formulario configurado para modo agregar');
            }
            
            console.log(' Funci贸n addNewHotel completada');
        }

        // Funci贸n para actualizar hotel
        function updateHotel(hotelId, updatedData) {
            // Implementar actualizaci贸n
            console.log('Actualizando hotel:', hotelId);
        }

        // Funci贸n para eliminar hotel
        function deleteHotel(hotelId) {
            console.log('锔 Eliminando hotel:', hotelId);
            
            if (!confirm('驴Est谩s seguro de que quieres eliminar este hotel? Esta acci贸n no se puede deshacer.')) {
                return;
            }
            
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            const hotelIndex = hotels.findIndex(h => h.id === hotelId);
            
            if (hotelIndex === -1) {
                console.error(' Hotel no encontrado:', hotelId);
                alert(' Hotel no encontrado');
                return;
            }
            
            const deletedHotel = hotels[hotelIndex];
            hotels.splice(hotelIndex, 1);
            
            localStorage.setItem('hotelsDB', JSON.stringify(hotels));
            
            console.log(' Hotel eliminado correctamente:', deletedHotel.name);
            alert(` Hotel "${deletedHotel.name}" eliminado correctamente`);
            
            // Notificar a index.html sobre el cambio
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'hotelsDB',
                newValue: JSON.stringify(hotels),
                oldValue: JSON.stringify([...hotels, deletedHotel])
            }));
            
            // Actualizar la tabla y estad铆sticas
            if (typeof loadHotelsTable === 'function') {
                loadHotelsTable();
            }
            if (typeof updateHotelsStats === 'function') {
                updateHotelsStats();
            }
        }

        // Funci贸n para obtener hotel por ID
        function getHotelById(hotelId) {
            // Implementar obtenci贸n
            console.log('Obteniendo hotel:', hotelId);
            return null;
        }

        // Funci贸n para cargar tabla de hoteles
        function loadHotelsTable() {
            console.log(' Cargando tabla de hoteles...');
            
            const tbody = document.getElementById('hotelsTableBody');
            if (!tbody) {
                console.error(' Tabla de hoteles no encontrada');
                return;
            }
            
            // Obtener hoteles del localStorage
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            
            tbody.innerHTML = '';
            
            if (hotels.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 20px; color: #666;">
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
                                <span class="material-icons" style="font-size: 48px; color: #ddd;"></i>
                                <p>No hay hoteles registrados</p>
                                <button onclick="addNewHotel()" style="padding: 8px 16px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                    <span class="material-icons" style="font-size: 16px; vertical-align: middle; margin-right: 4px;">add</span>
                                    Agregar Primer Hotel
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            hotels.forEach(hotel => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div>
                            <div class="hotel-name">${hotel.name}</div>
                            <div class="hotel-location">${hotel.location}</div>
                        </div>
                    </td>
                    <td>${hotel.location}</td>
                    <td style="text-align: center;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 4px;">
                            ${getStars(hotel.rating)}
                            <span style="margin-left: 4px;">${hotel.rating}</span>
                        </div>
                    </td>
                    <td style="text-align: center;">${hotel.price ? `$${hotel.price.toLocaleString()}` : 'No especificado'}</td>
                    <td style="text-align: center;">
                        <span class="status-${hotel.status.toLowerCase().replace(' ', '-')}">${hotel.status}</span>
                    </td>
                    <td style="text-align: center;">
                        <button onclick="editHotel('${hotel.id}')" class="action-btn edit" title="Editar">
                            <span class="material-icons">edit</span>
                        </button>
                        <button onclick="deleteHotel('${hotel.id}')" class="action-btn delete" title="Eliminar">
                            <span class="material-icons">delete</span>
                        </button>
                        <button onclick="viewHotelDetails('${hotel.id}')" class="action-btn view" title="Ver">
                            <span class="material-icons">visibility</span>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            console.log(` Tabla actualizada con ${hotels.length} hoteles`);
        }

        // Funci贸n para actualizar estad铆sticas de hoteles
        function updateHotelsStats() {
            console.log(' Actualizando estad铆sticas de hoteles...');
            
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            
            // Actualizar contadores
            const totalHotelsElement = document.getElementById('totalHotels');
            const avgRatingElement = document.getElementById('avgRating');
            const totalLocationsElement = document.getElementById('totalLocations');
            const priceRangeElement = document.getElementById('priceRange');
            
            if (totalHotelsElement) {
                totalHotelsElement.textContent = hotels.length;
            }
            
            if (avgRatingElement) {
                if (hotels.length > 0) {
                    const totalRating = hotels.reduce((sum, hotel) => sum + hotel.rating, 0);
                    const averageRating = (totalRating / hotels.length).toFixed(1);
                    avgRatingElement.textContent = averageRating;
                } else {
                    avgRatingElement.textContent = '0.0';
                }
            }
            
            if (totalLocationsElement) {
                const uniqueLocations = new Set(hotels.map(hotel => hotel.location));
                totalLocationsElement.textContent = uniqueLocations.size;
            }
            
            if (priceRangeElement) {
                if (hotels.length > 0) {
                    const prices = hotels.filter(hotel => hotel.price > 0).map(hotel => hotel.price);
                    if (prices.length > 0) {
                        const minPrice = Math.min(...prices);
                        const maxPrice = Math.max(...prices);
                        priceRangeElement.textContent = `$${minPrice.toLocaleString()}-$${maxPrice.toLocaleString()}`;
                    } else {
                        priceRangeElement.textContent = '$0-$0';
                    }
                } else {
                    priceRangeElement.textContent = '$0-$0';
                }
            }
            
            console.log(` Estad铆sticas actualizadas: ${hotels.length} hoteles`);
        }

        // Funci贸n para ver detalles del hotel
        function viewHotel(hotelId) {
            console.log('锔 Viendo detalles del hotel:', hotelId);
            
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            const hotel = hotels.find(h => h.id === hotelId);
            
            if (!hotel) {
                console.error(' Hotel no encontrado:', hotelId);
                alert(' Hotel no encontrado');
                return;
            }
            
            // Crear modal de detalles
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 15px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="margin: 0; color: #333;"> ${hotel.name}</h2>
                        <button onclick="this.closest('.modal').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <p><strong> Ubicaci贸n:</strong> ${hotel.location}</p>
                        <p><strong>猸 Calificaci贸n:</strong> ${hotel.rating}</p>
                        <p><strong> Precio:</strong> ${hotel.price || 'No especificado'}</p>
                        <p><strong> Estado:</strong> ${hotel.status}</p>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <p><strong> Descripci贸n:</strong></p>
                        <p>${hotel.description || 'Sin descripci贸n'}</p>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <p><strong> Amenities:</strong></p>
                        <p>${Array.isArray(hotel.amenities) ? hotel.amenities.join(', ') : 'No especificadas'}</p>
                    </div>
                    
                    <div style="text-align: center;">
                        <button onclick="editHotel('${hotel.id}'); this.closest('.modal').remove()" style="background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; margin-right: 10px; cursor: pointer;">
                            锔 Editar
                        </button>
                        <button onclick="this.closest('.modal').remove()" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                            Cerrar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Cerrar modal al hacer clic fuera
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        // Funci贸n para editar hotel
        function editHotel(hotelId) {
            console.log('锔 Editando hotel:', hotelId);
            
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            const hotel = hotels.find(h => h.id === hotelId);
            
            if (!hotel) {
                console.error(' Hotel no encontrado:', hotelId);
                alert(' Hotel no encontrado');
                return;
            }
            
            // Llenar el formulario con los datos del hotel
            const nameInput = document.getElementById('editHotelName');
            const locationInput = document.getElementById('editHotelLocation');
            const googleMapsInput = document.getElementById('editHotelGoogleMaps');
            const ratingSelect = document.getElementById('editHotelRating');
            const priceInput = document.getElementById('editHotelPrice');
            const descriptionTextarea = document.getElementById('editHotelDescription');
            const amenitiesInput = document.getElementById('editHotelAmenities');
            const statusSelect = document.getElementById('editHotelStatus');
            const imagesInput = document.getElementById('editHotelImages');
            
            if (nameInput) nameInput.value = hotel.name || '';
            if (locationInput) locationInput.value = hotel.location || '';
            if (googleMapsInput) {
                googleMapsInput.value = hotel.googleMaps || '';
                // Mostrar coordenadas extra铆das si est谩n disponibles
                if (hotel.googleMaps) {
                    const extractedCoords = extractCoordinatesFromGoogleMaps(hotel.googleMaps);
                    if (extractedCoords && extractedCoords.lat && extractedCoords.lng) {
                        console.log(` Coordenadas extra铆das de Google Maps para ${hotel.name}:`, extractedCoords);
                        // Agregar un indicador visual de coordenadas extra铆das
                        const coordInfo = document.createElement('div');
                        coordInfo.style.cssText = 'margin-top: 5px; font-size: 0.85rem; color: #28a745; font-weight: 600;';
                        coordInfo.innerHTML = ` Coordenadas extra铆das: ${extractedCoords.lat.toFixed(4)}, ${extractedCoords.lng.toFixed(4)}`;
                        googleMapsInput.parentNode.appendChild(coordInfo);
                    } else if (extractedCoords && extractedCoords.modernUrl) {
                        console.log(` URL moderna de Google Maps para ${hotel.name}`);
                        // Agregar un indicador visual para URLs modernas
                        const coordInfo = document.createElement('div');
                        coordInfo.style.cssText = 'margin-top: 5px; font-size: 0.85rem; color: #ff9800; font-weight: 600;';
                        coordInfo.innerHTML = ` URL moderna detectada - Coordenadas se extraer谩n autom谩ticamente`;
                        googleMapsInput.parentNode.appendChild(coordInfo);
                    }
                }
            }
            if (ratingSelect) ratingSelect.value = hotel.rating || '0';
            if (priceInput) priceInput.value = hotel.price || '';
            if (descriptionTextarea) descriptionTextarea.value = hotel.description || '';
            if (amenitiesInput) amenitiesInput.value = Array.isArray(hotel.amenities) ? hotel.amenities.join(', ') : '';
            if (statusSelect) statusSelect.value = hotel.status || 'Activo';
            if (imagesInput) imagesInput.value = Array.isArray(hotel.images) ? hotel.images.join(', ') : '';
            
            // Cambiar el t铆tulo del modal
            const modalTitle = document.querySelector('#editHotelModal h2');
            if (modalTitle) {
                modalTitle.textContent = ' Editar Hotel';
            }
            
            // Mostrar el modal
            const modal = document.getElementById('editHotelModal');
            if (modal) {
                modal.style.display = 'block';
                
                // Configurar el formulario para modo "editar"
                const form = document.getElementById('editHotelForm');
                if (form) {
                    form.dataset.mode = 'edit';
                    form.dataset.hotelId = hotelId;
                }
            }
        }

        // Funci贸n para exportar hoteles
        function exportHotels() {
            // Implementar exportaci贸n
            console.log('Exportando hoteles...');
        }

        // Funci贸n para refrescar hoteles
        function refreshHotels() {
            // Implementar refresco
            console.log('Refrescando hoteles...');
        }

        // Funci贸n para abrir modal de edici贸n de hotel
        function openEditHotelModal(hotel) {
            // Implementar apertura de modal
            console.log('Abriendo modal de edici贸n:', hotel);
        }

        // Funci贸n para cerrar modal de edici贸n de hotel
        function closeEditHotelModal() {
            const modal = document.getElementById('editHotelModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // Funci贸n para obtener coordenadas por defecto seg煤n el nombre del hotel
        function getDefaultCoordinatesForHotel(hotelName) {
            const coordinatesMap = {
                'Hotel Termas Chill谩n': { lat: -36.6064, lng: -71.2167 },
                'Hotel Terma de Puyehue': { lat: -40.6500, lng: -72.6167 },
                'Hotel Huilo-Huilo': { lat: -39.8500, lng: -71.9000 },
                'Hotel Corralco Resort': { lat: -38.6500, lng: -71.6500 },
                'Hotel Futangue': { lat: -40.3500, lng: -72.4500 },
                'Caba帽as Termas de Aguas Calientes': { lat: -40.735366, lng: -72.307616 }
            };
            
            return coordinatesMap[hotelName] || null;
        }
        
        // Funci贸n para extraer coordenadas de URL de Google Maps
        function extractCoordinatesFromGoogleMaps(url) {
            if (!url) return null;
            
            try {
                // Patr贸n 1: URL con coordenadas directas
                // https://maps.google.com/?q=-36.6064,-71.2167
                const coordPattern1 = /q=(-?\d+\.\d+),(-?\d+\.\d+)/;
                const match1 = url.match(coordPattern1);
                if (match1) {
                    return {
                        lat: parseFloat(match1[1]),
                        lng: parseFloat(match1[2])
                    };
                }
                
                // Patr贸n 2: URL con coordenadas en formato @lat,lng
                // https://maps.google.com/?q=Hotel+Termas+Chill谩n@-36.6064,-71.2167
                const coordPattern2 = /@(-?\d+\.\d+),(-?\d+\.\d+)/;
                const match2 = url.match(coordPattern2);
                if (match2) {
                    return {
                        lat: parseFloat(match2[1]),
                        lng: parseFloat(match2[2])
                    };
                }
                
                // Patr贸n 3: URL con coordenadas en formato ll=lat,lng
                // https://maps.google.com/?ll=-36.6064,-71.2167
                const coordPattern3 = /ll=(-?\d+\.\d+),(-?\d+\.\d+)/;
                const match3 = url.match(coordPattern3);
                if (match3) {
                    return {
                        lat: parseFloat(match3[1]),
                        lng: parseFloat(match3[2])
                    };
                }
                
                // Patr贸n 4: URLs modernas de Google Maps (maps.app.goo.gl)
                // https://maps.app.goo.gl/cxC7gREKNFuoiuj4A
                if (url.includes('maps.app.goo.gl') || url.includes('goo.gl/maps')) {
                    console.log(' URL moderna de Google Maps detectada, intentando obtener coordenadas...');
                    
                    // Para URLs modernas, necesitamos hacer una petici贸n HTTP para obtener las coordenadas
                    // Por ahora, mostraremos un mensaje informativo
                    return {
                        lat: null,
                        lng: null,
                        modernUrl: true,
                        message: 'URL moderna de Google Maps detectada. Las coordenadas se extraer谩n autom谩ticamente cuando se guarde el hotel.'
                    };
                }
                
                // Patr贸n 5: URLs con coordenadas en formato decimal
                // https://maps.google.com/?q=-36.6064,-71.2167&z=15
                const coordPattern5 = /[?&]q=(-?\d+\.\d+),(-?\d+\.\d+)/;
                const match5 = url.match(coordPattern5);
                if (match5) {
                    return {
                        lat: parseFloat(match5[1]),
                        lng: parseFloat(match5[2])
                    };
                }
                
                console.log('锔 No se pudieron extraer coordenadas de la URL:', url);
                return null;
            } catch (error) {
                console.error(' Error al extraer coordenadas:', error);
                return null;
            }
        }
        
        // Funci贸n para mostrar ayuda de Google Maps
        function openGoogleMapsHelp() {
            const helpText = `
 <strong>驴C贸mo obtener el enlace de Google Maps?</strong>

1. <strong>Busca el hotel</strong> en Google Maps
2. <strong>Haz clic en "Compartir"</strong> (bot贸n azul)
3. <strong>Selecciona "Copiar enlace"</strong>
4. <strong>Pega el enlace</strong> en el campo de arriba

<strong>Formatos de URL soportados:</strong>

 <strong>URL con coordenadas directas:</strong>
https://maps.google.com/?q=-36.6064,-71.2167

 <strong>URL con nombre del hotel:</strong>
https://maps.google.com/?q=Hotel+Termas+Chill谩n

 <strong>URL moderna (maps.app.goo.gl):</strong>
https://maps.app.goo.gl/cxC7gREKNFuoiuj4A

<strong> Coordenadas se extraer谩n autom谩ticamente para el mapa interactivo!</strong>

<strong>锔 Nota:</strong> Las URLs modernas se procesar谩n autom谩ticamente al guardar el hotel.
            `;
            
            alert(helpText);
        }
        
        // Funci贸n para probar extracci贸n de coordenadas
        function testCoordinatesExtraction() {
            const googleMapsInput = document.getElementById('editHotelGoogleMaps');
            if (!googleMapsInput || !googleMapsInput.value) {
                alert('锔 Por favor ingresa una URL de Google Maps primero');
                return;
            }
            
            const url = googleMapsInput.value.trim();
            const extractedCoords = extractCoordinatesFromGoogleMaps(url);
            
            if (extractedCoords && extractedCoords.modernUrl) {
                alert(` URL moderna de Google Maps detectada:\n\n${url}\n\n Esta URL ser谩 guardada y las coordenadas se extraer谩n autom谩ticamente cuando se guarde el hotel.\n\n Tip: Para obtener coordenadas inmediatas, usa el formato:\nhttps://maps.google.com/?q=-36.6064,-71.2167`);
            } else if (extractedCoords && extractedCoords.lat && extractedCoords.lng) {
                alert(` Coordenadas extra铆das exitosamente:\n\nLatitud: ${extractedCoords.lat}\nLongitud: ${extractedCoords.lng}\n\nEstas coordenadas se usar谩n autom谩ticamente en el mapa interactivo.`);
            } else {
                alert(` No se pudieron extraer coordenadas de la URL:\n\n${url}\n\n Sugerencias:\n1. Usa el formato: https://maps.google.com/?q=-36.6064,-71.2167\n2. O busca el hotel en Google Maps y copia el enlace completo\n3. Para URLs modernas, las coordenadas se extraer谩n autom谩ticamente al guardar.`);
            }
        }

        // Funci贸n para guardar cambios del hotel
        function saveHotelChanges() {
            console.log(' Guardando cambios del hotel...');
            
            const form = document.getElementById('editHotelForm');
            if (!form) {
                console.error(' Formulario no encontrado');
                return;
            }
            
            // Obtener datos del formulario
            const nameInput = document.getElementById('editHotelName');
            const locationInput = document.getElementById('editHotelLocation');
            const googleMapsInput = document.getElementById('editHotelGoogleMaps');
            const ratingSelect = document.getElementById('editHotelRating');
            const priceInput = document.getElementById('editHotelPrice');
            const descriptionTextarea = document.getElementById('editHotelDescription');
            const amenitiesInput = document.getElementById('editHotelAmenities');
            const statusSelect = document.getElementById('editHotelStatus');
            const imagesInput = document.getElementById('editHotelImages');
            
            if (!nameInput || !locationInput) {
                console.error(' Campos requeridos no encontrados');
                return;
            }
            
            const hotelData = {
                name: nameInput.value.trim(),
                location: locationInput.value.trim(),
                googleMaps: googleMapsInput?.value?.trim() || '',
                rating: parseInt(ratingSelect?.value || '0'),
                price: priceInput?.value ? parseInt(priceInput.value) : 0,
                description: descriptionTextarea?.value || '',
                amenities: amenitiesInput?.value ? amenitiesInput.value.split(',').map(a => a.trim()) : [],
                status: statusSelect?.value || 'Activo',
                images: imagesInput?.value ? imagesInput.value.split(',').map(img => img.trim()) : []
            };
            
            // Extraer coordenadas de Google Maps si est谩 disponible
            if (hotelData.googleMaps) {
                const extractedCoords = extractCoordinatesFromGoogleMaps(hotelData.googleMaps);
                if (extractedCoords && extractedCoords.lat && extractedCoords.lng) {
                    hotelData.coordinates = extractedCoords;
                    console.log(` Coordenadas extra铆das de Google Maps para ${hotelData.name}:`, extractedCoords);
                } else if (extractedCoords && extractedCoords.modernUrl) {
                    console.log(` URL moderna de Google Maps guardada para ${hotelData.name}. Las coordenadas se extraer谩n autom谩ticamente.`);
                    // Para URLs modernas, usamos coordenadas por defecto temporalmente
                    const defaultCoords = getDefaultCoordinatesForHotel(hotelData.name);
                    if (defaultCoords) {
                        hotelData.coordinates = defaultCoords;
                        console.log(` Usando coordenadas por defecto para ${hotelData.name}:`, defaultCoords);
                    }
                }
            }
            
            // Validar campos requeridos
            if (!hotelData.name || !hotelData.location) {
                alert(' Por favor completa los campos requeridos (Nombre y Ubicaci贸n)');
                return;
            }
            
            const mode = form.dataset.mode;
            const hotelId = form.dataset.hotelId;
            
            if (mode === 'add') {
                // Agregar nuevo hotel
                const newHotel = {
                    id: Date.now().toString(), // ID 煤nico
                    ...hotelData,
                    createdAt: new Date().toISOString()
                };
                
                // Obtener hoteles existentes
                const existingHotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
                existingHotels.push(newHotel);
                
                // Guardar en localStorage
                localStorage.setItem('hotelsDB', JSON.stringify(existingHotels));
                
                console.log(' Hotel agregado correctamente:', newHotel);
                alert(' Hotel agregado correctamente');
                
                // Notificar a index.html sobre el cambio
                window.dispatchEvent(new StorageEvent('storage', {
                    key: 'hotelsDB',
                    newValue: JSON.stringify(existingHotels),
                    oldValue: JSON.stringify(existingHotels.filter(h => h.id !== newHotel.id))
                }));
                
            } else {
                // Editar hotel existente
                if (!hotelId) {
                    console.error(' ID de hotel no encontrado para edici贸n');
                    return;
                }
                
                const existingHotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
                const hotelIndex = existingHotels.findIndex(h => h.id === hotelId);
                
                if (hotelIndex !== -1) {
                    existingHotels[hotelIndex] = {
                        ...existingHotels[hotelIndex],
                        ...hotelData,
                        updatedAt: new Date().toISOString()
                    };
                    
                    localStorage.setItem('hotelsDB', JSON.stringify(existingHotels));
                    console.log(' Hotel actualizado correctamente');
                    alert(' Hotel actualizado correctamente');
                } else {
                    console.error(' Hotel no encontrado para editar');
                    alert(' Error: Hotel no encontrado');
                }
            }
            
            // Cerrar modal
            closeEditHotelModal();
            
            // Actualizar tabla y estad铆sticas
            if (typeof loadHotelsTable === 'function') {
                loadHotelsTable();
            }
            if (typeof updateHotelsStats === 'function') {
                updateHotelsStats();
            }
            
            // Notificar actualizaci贸n del mapa interactivo
            console.log('猴 Notificando actualizaci贸n del mapa interactivo...');
            window.dispatchEvent(new CustomEvent('hotelsMapUpdated', {
                detail: { 
                    hotelId: hotelId || newHotel?.id, 
                    coordinates: hotelData.coordinates,
                    hotelName: hotelData.name 
                }
            }));
            
            // Actualizar la tabla y estad铆sticas
            if (typeof loadHotelsTable === 'function') {
                loadHotelsTable();
            }
            if (typeof updateHotelsStats === 'function') {
                updateHotelsStats();
            }
        }

        // Funci贸n para abrir modal de vista previa de im谩genes
        function openImagePreviewModal() {
            // Implementar apertura de modal
            console.log('Abriendo modal de vista previa...');
        }

        // Funci贸n para cerrar modal de vista previa de im谩genes
        function closeImagePreviewModal() {
            const modal = document.getElementById('imagePreviewModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Funci贸n para inicializar base de datos de clientes
        function initClientesDB() {
            // Implementar inicializaci贸n
            console.log('Inicializando base de datos de clientes...');
        }

        // Funci贸n para inicializar base de datos de hoteles (duplicada - eliminada)

        // Funci贸n para buscar cliente por email
        function buscarClientePorEmail(email) {
            // Implementar b煤squeda
            console.log('Buscando cliente por email:', email);
            return null;
        }

        // Funci贸n para validar email
        function validarEmail(email) {
            // Implementar validaci贸n
            console.log('Validando email:', email);
            return true;
        }

        // Funci贸n de logout
        function logout() {
            if (confirm('驴Est谩s seguro de que quieres cerrar sesi贸n?')) {
                // Implementar logout
                console.log('Cerrando sesi贸n...');
            }
        }

        // Funci贸n para actualizar dashboard para usuario logueado
        function updateDashboardForLoggedInUser() {
            // Implementar actualizaci贸n
            console.log('Actualizando dashboard para usuario logueado...');
        }

        // Funci贸n para cargar contenido del dashboard
        function loadDashboardContent() {
            // Implementar carga de contenido
            console.log('Cargando contenido del dashboard...');
        }

        // Funci贸n para restaurar secciones del dashboard
        function restoreDashboardSections() {
            // Implementar restauraci贸n
            console.log('Restaurando secciones del dashboard...');
        }

        // Funci贸n para actualizar dashboard para usuario deslogueado
        function updateDashboardForLoggedOutUser() {
            // Implementar actualizaci贸n
            console.log('Actualizando dashboard para usuario deslogueado...');
        }

        // Funci贸n para actualizar estad铆sticas personales
        function updatePersonalStats() {
            // Implementar estad铆sticas personales
            console.log('Actualizando estad铆sticas personales...');
        }

        // Funci贸n para mostrar pantalla de login
        function showLoginScreen() {
            // Implementar pantalla de login
            console.log('Mostrando pantalla de login...');
        }

        // Funci贸n para mostrar formulario de registro
        function showRegisterForm() {
            // Implementar formulario de registro
            console.log('Mostrando formulario de registro...');
        }

        // Event listener para cuando el DOM est茅 listo
        document.addEventListener('DOMContentLoaded', function() {
            console.log(' Dashboard inicializando...');
            
            // Inicializar dashboard
            initializeDashboard();
            
            // Configurar sincronizaci贸n autom谩tica
            setupAutoSync();
            
            console.log(' Dashboard inicializado correctamente');
        });

        // Funci贸n para configurar sincronizaci贸n autom谩tica
        function setupAutoSync() {
            console.log(' Configurando sincronizaci贸n autom谩tica...');
            
            // Cargar datos iniciales
            loadUsersData();
            
            // Configurar listener para cambios en localStorage
            window.addEventListener('storage', function(e) {
                if (e.key === 'checkin24hs_users') {
                    console.log(' Cambio detectado en usuarios, actualizando dashboard...');
                    loadUsersData();
                }
            });
            
            // Sincronizaci贸n autom谩tica cada 30 segundos
            setInterval(() => {
                console.log(' Sincronizaci贸n autom谩tica...');
                loadUsersData();
            }, 30000);
            
            console.log(' Sincronizaci贸n autom谩tica configurada');
        }

        // Funci贸n para abrir base de datos de usuarios
        function openUserDatabase() {
            // Implementar apertura de base de datos
            console.log('Abriendo base de datos de usuarios...');
        }

        // Funci贸n para exportar usuarios
        function exportUsers() {
            // Implementar exportaci贸n
            console.log('Exportando usuarios...');
        }

        // Funci贸n para refrescar usuarios
        function refreshUsers() {
            // Implementar refresco
            console.log('Refrescando usuarios...');
        }

        // Funci贸n para crear usuario de prueba
        function createTestUser() {
            // Implementar creaci贸n de usuario de prueba
            console.log('Creando usuario de prueba...');
        }

        // Funci贸n para crear usuarios de prueba
        function crearUsuariosPrueba() {
            // Implementar creaci贸n de usuarios de prueba
            console.log('Creando usuarios de prueba...');
        }

        // Funci贸n para mostrar promociones de hoteles
        function showHotelPromotions() {
            console.log(' Mostrando promociones de hoteles...');
            
            // Cargar datos de hoteles
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            
            // Crear y mostrar modal de promociones
            showHotelPromotionsModal(hotels);
        }
        
        // Funci贸n para mostrar modal de promociones de hoteles
        function showHotelPromotionsModal(hotels) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 12px; padding: 24px; max-width: 95%; max-height: 95%; overflow-y: auto; width: 1000px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                        <h2 style="margin: 0; color: #333;"> Promociones de Hoteles</h2>
                        <button onclick="this.closest('.modal').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
                    </div>
                    
                    <!-- Pesta帽as de promociones -->
                    <div style="display: flex; gap: 8px; margin-bottom: 24px; border-bottom: 2px solid #e0e0e0;">
                        <button onclick="showPromotionTab('active')" class="promotion-tab active" data-tab="active" style="padding: 12px 20px; border: none; background: #ff9800; color: white; border-radius: 8px 8px 0 0; cursor: pointer;"> Promociones Activas</button>
                        <button onclick="showPromotionTab('create')" class="promotion-tab" data-tab="create" style="padding: 12px 20px; border: none; background: #f0f0f0; color: #333; border-radius: 8px 8px 0 0; cursor: pointer;"> Crear Promoci贸n</button>
                        <button onclick="showPromotionTab('history')" class="promotion-tab" data-tab="history" style="padding: 12px 20px; border: none; background: #f0f0f0; color: #333; border-radius: 8px 8px 0 0; cursor: pointer;"> Historial</button>
                        <button onclick="showPromotionTab('analytics')" class="promotion-tab" data-tab="analytics" style="padding: 12px 20px; border: none; background: #f0f0f0; color: #333; border-radius: 8px 8px 0 0; cursor: pointer;"> Analytics</button>
                    </div>
                    
                    <!-- Contenido de pesta帽as -->
                    <div id="promotion-content">
                        <!-- Pesta帽a de Promociones Activas -->
                        <div id="active-tab" class="promotion-tab-content" style="display: block;">
                            <h3 style="margin-bottom: 16px; color: #333;"> Promociones Activas</h3>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 16px;">
                                ${hotels.map(hotel => `
                                    <div style="background: #fff8e1; padding: 16px; border-radius: 8px; border-left: 4px solid #ff9800;">
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                                            <h4 style="margin: 0; color: #333;">${hotel.name}</h4>
                                            <span style="background: #ff9800; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">Activo</span>
                                        </div>
                                        <p style="margin: 0 0 12px 0; color: #666;">${hotel.location}</p>
                                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                            <span style="font-weight: 500; color: #ff9800;">$${hotel.price || 'Consultar'}</span>
                                            <span style="font-size: 0.9rem; color: #666;">${hotel.rating || 'N/A'} 猸</span>
                                        </div>
                                        <div style="display: flex; gap: 8px;">
                                            <button onclick="editHotelPromotion('${hotel.id}')" style="background: #2196f3; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 0.9rem;">锔 Editar</button>
                                            <button onclick="viewHotelPromotion('${hotel.id}')" style="background: #4caf50; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 0.9rem;">锔 Ver</button>
                                            <button onclick="deactivateHotelPromotion('${hotel.id}')" style="background: #f44336; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 0.9rem;">革 Pausar</button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <!-- Pesta帽a de Crear Promoci贸n -->
                        <div id="create-tab" class="promotion-tab-content" style="display: none;">
                            <h3 style="margin-bottom: 16px; color: #333;"> Crear Nueva Promoci贸n</h3>
                            
                            <form id="createPromotionForm" style="display: grid; gap: 16px;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Hotel</label>
                                        <select id="promotionHotel" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                            <option value="">Seleccionar hotel</option>
                                            ${hotels.map(hotel => `<option value="${hotel.id}">${hotel.name}</option>`).join('')}
                                        </select>
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Tipo de Promoci贸n</label>
                                        <select id="promotionType" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                            <option value="discount">Descuento</option>
                                            <option value="package">Paquete</option>
                                            <option value="early-bird">Early Bird</option>
                                            <option value="last-minute">Last Minute</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Descuento (%)</label>
                                        <input type="number" id="promotionDiscount" min="0" max="100" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Precio Promocional</label>
                                        <input type="text" id="promotionPrice" placeholder="Ej: $150 USD" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                </div>
                                
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">Descripci贸n de la Promoci贸n</label>
                                    <textarea id="promotionDescription" rows="4" placeholder="Describe los beneficios de esta promoci贸n..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"></textarea>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Fecha de Inicio</label>
                                        <input type="date" id="promotionStartDate" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Fecha de Fin</label>
                                        <input type="date" id="promotionEndDate" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: 12px; justify-content: flex-end;">
                                    <button type="button" onclick="this.closest('.modal').remove()" style="background: #6c757d; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer;">Cancelar</button>
                                    <button type="submit" style="background: #ff9800; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer;">Crear Promoci贸n</button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Pesta帽a de Historial -->
                        <div id="history-tab" class="promotion-tab-content" style="display: none;">
                            <h3 style="margin-bottom: 16px; color: #333;"> Historial de Promociones</h3>
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center;">
                                <span style="font-size: 3rem; opacity: 0.5;"></span>
                                <p style="margin: 16px 0 0 0; color: #666;">El historial de promociones estar谩 disponible pr贸ximamente</p>
                            </div>
                        </div>
                        
                        <!-- Pesta帽a de Analytics -->
                        <div id="analytics-tab" class="promotion-tab-content" style="display: none;">
                            <h3 style="margin-bottom: 16px; color: #333;"> Analytics de Promociones</h3>
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center;">
                                <span style="font-size: 3rem; opacity: 0.5;"></span>
                                <p style="margin: 16px 0 0 0; color: #666;">Los analytics de promociones estar谩 disponible pr贸ximamente</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Event listeners para pesta帽as
            const tabs = modal.querySelectorAll('.promotion-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remover clase active de todas las pesta帽as
                    tabs.forEach(t => t.classList.remove('active'));
                    t.style.background = '#f0f0f0';
                    t.style.color = '#333';
                    
                    // Agregar clase active a la pesta帽a clickeada
                    this.classList.add('active');
                    this.style.background = '#ff9800';
                    this.style.color = 'white';
                    
                    // Mostrar contenido correspondiente
                    const tabName = this.getAttribute('data-tab');
                    showPromotionTab(tabName);
                });
            });
            
            // Event listener para el formulario
            const form = modal.querySelector('#createPromotionForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    createHotelPromotion();
                });
            }
            
            // Cerrar modal al hacer clic fuera
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }
        
        // Funci贸n para mostrar herramientas de marketing
        function showMarketingTools() {
            console.log(' Mostrando herramientas de marketing...');
            
            // Cargar datos de usuarios
            const users = loadUsersData();
            
            // Crear y mostrar modal de herramientas de marketing
            showMarketingModal(users);
        }
        
        // Funci贸n para mostrar modal de herramientas de marketing
        function showMarketingModal(users) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 12px; padding: 24px; max-width: 95%; max-height: 95%; overflow-y: auto; width: 1000px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                        <h2 style="margin: 0; color: #333;"> Herramientas de Marketing</h2>
                        <button onclick="this.closest('.modal').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
                    </div>
                    
                    <!-- Pesta帽as de herramientas -->
                    <div style="display: flex; gap: 8px; margin-bottom: 24px; border-bottom: 2px solid #e0e0e0;">
                        <button onclick="showMarketingTab('segments')" class="marketing-tab active" data-tab="segments" style="padding: 12px 20px; border: none; background: #4caf50; color: white; border-radius: 8px 8px 0 0; cursor: pointer;"> Segmentaci贸n</button>
                        <button onclick="showMarketingTab('campaigns')" class="marketing-tab" data-tab="campaigns" style="padding: 12px 20px; border: none; background: #f0f0f0; color: #333; border-radius: 8px 8px 0 0; cursor: pointer;"> Campa帽as</button>
                        <button onclick="showMarketingTab('templates')" class="marketing-tab" data-tab="templates" style="padding: 12px 20px; border: none; background: #f0f0f0; color: #333; border-radius: 8px 8px 0 0; cursor: pointer;"> Plantillas</button>
                        <button onclick="showMarketingTab('analytics')" class="marketing-tab" data-tab="analytics" style="padding: 12px 20px; border: none; background: #f0f0f0; color: #333; border-radius: 8px 8px 0 0; cursor: pointer;"> Analytics</button>
                    </div>
                    
                    <!-- Contenido de pesta帽as -->
                    <div id="marketing-content">
                        <!-- Pesta帽a de Segmentaci贸n -->
                        <div id="segments-tab" class="marketing-tab-content" style="display: block;">
                            <h3 style="margin-bottom: 16px; color: #333;"> Segmentaci贸n de Usuarios</h3>
                            
                            <!-- Segmentos predefinidos -->
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-bottom: 24px;">
                                <div style="background: #e8f5e8; padding: 16px; border-radius: 8px;">
                                    <h4 style="margin: 0 0 8px 0; color: #2e7d32;"> Usuarios Activos</h4>
                                    <p style="margin: 0 0 12px 0; color: #666;">Usuarios que han tenido actividad reciente</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-weight: 500;">${users.filter(u => u.status === 'active' || u.status === 'Activo').length} usuarios</span>
                                        <button onclick="exportSegment('active')" style="background: #4caf50; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Exportar</button>
                                    </div>
                                </div>
                                
                                <div style="background: #fff3e0; padding: 16px; border-radius: 8px;">
                                    <h4 style="margin: 0 0 8px 0; color: #f57c00;"> Con Cotizaciones</h4>
                                    <p style="margin: 0 0 12px 0; color: #666;">Usuarios que han solicitado cotizaciones</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-weight: 500;">${users.filter(u => u.cotizaciones && u.cotizaciones > 0).length} usuarios</span>
                                        <button onclick="exportSegment('withQuotes')" style="background: #ff9800; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Exportar</button>
                                    </div>
                                </div>
                                
                                <div style="background: #e3f2fd; padding: 16px; border-radius: 8px;">
                                    <h4 style="margin: 0 0 8px 0; color: #1976d2;"> Nuevos este Mes</h4>
                                    <p style="margin: 0 0 12px 0; color: #666;">Usuarios registrados en el mes actual</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-weight: 500;">${users.filter(u => {
                                            const userDate = new Date(u.createdAt);
                                            const currentDate = new Date();
                                            return userDate.getMonth() === currentDate.getMonth() && 
                                                   userDate.getFullYear() === currentDate.getFullYear();
                                        }).length} usuarios</span>
                                        <button onclick="exportSegment('newThisMonth')" style="background: #2196f3; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Exportar</button>
                                    </div>
                                </div>
                                
                                <div style="background: #f3e5f5; padding: 16px; border-radius: 8px;">
                                    <h4 style="margin: 0 0 8px 0; color: #7b1fa2;"> Inactivos</h4>
                                    <p style="margin: 0 0 12px 0; color: #666;">Usuarios sin actividad reciente</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-weight: 500;">${users.filter(u => u.status === 'inactive' || u.status === 'Inactivo').length} usuarios</span>
                                        <button onclick="exportSegment('inactive')" style="background: #9c27b0; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Exportar</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Segmento personalizado -->
                            <div style="background: #f8f9fa; padding: 16px; border-radius: 8px;">
                                <h4 style="margin: 0 0 16px 0; color: #333;"> Crear Segmento Personalizado</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 16px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 4px; font-weight: 500;">Criterio:</label>
                                        <select id="customSegmentCriteria" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                            <option value="status">Estado</option>
                                            <option value="cotizaciones">Cotizaciones</option>
                                            <option value="fechaRegistro">Fecha de Registro</option>
                                            <option value="tipoCuenta">Tipo de Cuenta</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 4px; font-weight: 500;">Valor:</label>
                                        <input type="text" id="customSegmentValue" placeholder="Ej: Activo, >0, etc." style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                    <div style="display: flex; align-items: end;">
                                        <button onclick="createCustomSegment()" style="background: #4caf50; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Crear Segmento</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pesta帽a de Campa帽as -->
                        <div id="campaigns-tab" class="marketing-tab-content" style="display: none;">
                            <h3 style="margin-bottom: 16px; color: #333;"> Gesti贸n de Campa帽as</h3>
                            
                            <!-- Crear nueva campa帽a -->
                            <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 24px;">
                                <h4 style="margin: 0 0 16px 0; color: #333;"> Nueva Campa帽a</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px; margin-bottom: 16px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 4px; font-weight: 500;">Nombre de la Campa帽a:</label>
                                        <input type="text" id="campaignName" placeholder="Ej: Promoci贸n Verano 2025" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 4px; font-weight: 500;">Segmento Objetivo:</label>
                                        <select id="campaignSegment" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                            <option value="all">Todos los usuarios</option>
                                            <option value="active">Usuarios activos</option>
                                            <option value="withQuotes">Con cotizaciones</option>
                                            <option value="newThisMonth">Nuevos este mes</option>
                                            <option value="inactive">Inactivos</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 4px; font-weight: 500;">Tipo de Campa帽a:</label>
                                        <select id="campaignType" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                            <option value="email">Email Marketing</option>
                                            <option value="whatsapp">WhatsApp</option>
                                            <option value="sms">SMS</option>
                                            <option value="push">Push Notification</option>
                                        </select>
                                    </div>
                                </div>
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; margin-bottom: 4px; font-weight: 500;">Mensaje:</label>
                                    <textarea id="campaignMessage" placeholder="Escribe tu mensaje aqu铆..." rows="4" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"></textarea>
                                </div>
                                <button onclick="createCampaign()" style="background: #4caf50; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer;"> Crear Campa帽a</button>
                            </div>
                            
                            <!-- Campa帽as existentes -->
                            <div>
                                <h4 style="margin-bottom: 16px; color: #333;"> Campa帽as Existentes</h4>
                                <div id="campaignsList" style="display: grid; gap: 12px;">
                                    <!-- Las campa帽as se cargar谩n din谩micamente -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pesta帽a de Plantillas -->
                        <div id="templates-tab" class="marketing-tab-content" style="display: none;">
                            <h3 style="margin-bottom: 16px; color: #333;"> Plantillas de Mensajes</h3>
                            
                            <!-- Plantillas predefinidas -->
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px;">
                                <div style="background: #e8f5e8; padding: 16px; border-radius: 8px;">
                                    <h4 style="margin: 0 0 8px 0; color: #2e7d32;"> Bienvenida</h4>
                                    <p style="margin: 0 0 12px 0; color: #666; font-size: 14px;">隆Bienvenido a Checkin24hs! Descubre nuestras mejores ofertas de hoteles.</p>
                                    <button onclick="useTemplate('welcome')" style="background: #4caf50; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Usar Plantilla</button>
                                </div>
                                
                                <div style="background: #fff3e0; padding: 16px; border-radius: 8px;">
                                    <h4 style="margin: 0 0 8px 0; color: #f57c00;"> Oferta Especial</h4>
                                    <p style="margin: 0 0 12px 0; color: #666; font-size: 14px;">隆Oferta especial por tiempo limitado! Descuentos exclusivos en hoteles premium.</p>
                                    <button onclick="useTemplate('specialOffer')" style="background: #ff9800; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Usar Plantilla</button>
                                </div>
                                
                                <div style="background: #e3f2fd; padding: 16px; border-radius: 8px;">
                                    <h4 style="margin: 0 0 8px 0; color: #1976d2;"> Recordatorio</h4>
                                    <p style="margin: 0 0 12px 0; color: #666; font-size: 14px;">No olvides revisar nuestras nuevas ofertas. 隆Tu pr贸xima aventura te espera!</p>
                                    <button onclick="useTemplate('reminder')" style="background: #2196f3; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Usar Plantilla</button>
                                </div>
                                
                                <div style="background: #f3e5f5; padding: 16px; border-radius: 8px;">
                                    <h4 style="margin: 0 0 8px 0; color: #7b1fa2;"> Reactivaci贸n</h4>
                                    <p style="margin: 0 0 12px 0; color: #666; font-size: 14px;">隆Te extra帽amos! Vuelve a descubrir las mejores ofertas en Checkin24hs.</p>
                                    <button onclick="useTemplate('reactivation')" style="background: #9c27b0; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Usar Plantilla</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pesta帽a de Analytics -->
                        <div id="analytics-tab" class="marketing-tab-content" style="display: none;">
                            <h3 style="margin-bottom: 16px; color: #333;"> Analytics de Marketing</h3>
                            
                            <!-- M茅tricas de engagement -->
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                                <div style="background: #e8f5e8; padding: 16px; border-radius: 8px; text-align: center;">
                                    <h4 style="margin: 0; color: #2e7d32; font-size: 24px;">${users.length}</h4>
                                    <p style="margin: 4px 0 0 0; color: #666;">Audiencia Total</p>
                                </div>
                                <div style="background: #fff3e0; padding: 16px; border-radius: 8px; text-align: center;">
                                    <h4 style="margin: 0; color: #f57c00; font-size: 24px;">${Math.round((users.filter(u => u.status === 'active' || u.status === 'Activo').length / users.length) * 100)}%</h4>
                                    <p style="margin: 4px 0 0 0; color: #666;">Tasa de Engagement</p>
                                </div>
                                <div style="background: #e3f2fd; padding: 16px; border-radius: 8px; text-align: center;">
                                    <h4 style="margin: 0; color: #1976d2; font-size: 24px;">${users.filter(u => u.cotizaciones && u.cotizaciones > 0).length}</h4>
                                    <p style="margin: 4px 0 0 0; color: #666;">Conversiones</p>
                                </div>
                                <div style="background: #f3e5f5; padding: 16px; border-radius: 8px; text-align: center;">
                                    <h4 style="margin: 0; color: #7b1fa2; font-size: 24px;">${Math.round((users.filter(u => u.cotizaciones && u.cotizaciones > 0).length / users.length) * 100)}%</h4>
                                    <p style="margin: 4px 0 0 0; color: #666;">Tasa de Conversi贸n</p>
                                </div>
                            </div>
                            
                            <!-- Gr谩fico de engagement por mes -->
                            <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 24px;">
                                <h4 style="margin: 0 0 16px 0; color: #333;"> Engagement por Mes</h4>
                                <div style="height: 200px; display: flex; align-items: end; gap: 8px; padding: 16px;">
                                    ${generateEngagementChart(users)}
                                </div>
                            </div>
                            
                            <!-- Recomendaciones -->
                            <div style="background: #fff3e0; padding: 16px; border-radius: 8px;">
                                <h4 style="margin: 0 0 16px 0; color: #f57c00;"> Recomendaciones de Marketing</h4>
                                <ul style="margin: 0; padding-left: 20px;">
                                    <li style="margin-bottom: 8px;">Enf贸cate en reactivar usuarios inactivos con ofertas especiales</li>
                                    <li style="margin-bottom: 8px;">Crea campa帽as personalizadas para usuarios con cotizaciones</li>
                                    <li style="margin-bottom: 8px;">Implementa un programa de fidelizaci贸n para usuarios activos</li>
                                    <li style="margin-bottom: 8px;">Optimiza el timing de las campa帽as basado en el engagement</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        // Funci贸n para cambiar pesta帽as de marketing
        function showMarketingTab(tabName) {
            // Ocultar todas las pesta帽as
            document.querySelectorAll('.marketing-tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Desactivar todos los botones
            document.querySelectorAll('.marketing-tab').forEach(btn => {
                btn.style.background = '#f0f0f0';
                btn.style.color = '#333';
            });
            
            // Mostrar pesta帽a seleccionada
            document.getElementById(tabName + '-tab').style.display = 'block';
            
            // Activar bot贸n seleccionado
            event.target.style.background = '#4caf50';
            event.target.style.color = 'white';
        }
        
        // Funci贸n para exportar segmentos
        function exportSegment(segmentType) {
            const users = loadUsersData();
            let segmentUsers = [];
            
            switch(segmentType) {
                case 'active':
                    segmentUsers = users.filter(u => u.status === 'active' || u.status === 'Activo');
                    break;
                case 'withQuotes':
                    segmentUsers = users.filter(u => u.cotizaciones && u.cotizaciones > 0);
                    break;
                case 'newThisMonth':
                    segmentUsers = users.filter(u => {
                        const userDate = new Date(u.createdAt);
                        const currentDate = new Date();
                        return userDate.getMonth() === currentDate.getMonth() && 
                               userDate.getFullYear() === currentDate.getFullYear();
                    });
                    break;
                case 'inactive':
                    segmentUsers = users.filter(u => u.status === 'inactive' || u.status === 'Inactivo');
                    break;
            }
            
            const csvContent = 'data:text/csv;charset=utf-8,' + 
                'Nombre,Email,Tel茅fono,Estado,Fecha Registro\n' +
                segmentUsers.map(user => 
                    `"${user.name}","${user.email}","${user.phone || ''}","${user.status}","${new Date(user.createdAt).toLocaleDateString('es-ES')}"`
                ).join('\n');
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', `segmento_${segmentType}_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert(` Segmento "${segmentType}" exportado correctamente (${segmentUsers.length} usuarios)`);
        }
        
        // Funci贸n para crear segmento personalizado
        function createCustomSegment() {
            const criteria = document.getElementById('customSegmentCriteria').value;
            const value = document.getElementById('customSegmentValue').value;
            
            if (!value) {
                alert(' Por favor ingresa un valor para el segmento');
                return;
            }
            
            const users = loadUsersData();
            let segmentUsers = [];
            
            switch(criteria) {
                case 'status':
                    segmentUsers = users.filter(u => u.status === value);
                    break;
                case 'cotizaciones':
                    segmentUsers = users.filter(u => u.cotizaciones && u.cotizaciones > parseInt(value));
                    break;
                case 'tipoCuenta':
                    segmentUsers = users.filter(u => u.tipoCuenta === value);
                    break;
            }
            
            if (segmentUsers.length === 0) {
                alert(' No se encontraron usuarios con los criterios especificados');
                return;
            }
            
            alert(` Segmento personalizado creado: ${segmentUsers.length} usuarios encontrados`);
            exportSegment('custom');
        }
        
        // Funci贸n para crear campa帽a
        function createCampaign() {
            const name = document.getElementById('campaignName').value;
            const segment = document.getElementById('campaignSegment').value;
            const type = document.getElementById('campaignType').value;
            const message = document.getElementById('campaignMessage').value;
            
            if (!name || !message) {
                alert(' Por favor completa todos los campos requeridos');
                return;
            }
            
            const campaign = {
                id: 'camp-' + Date.now(),
                name: name,
                segment: segment,
                type: type,
                message: message,
                createdAt: new Date().toISOString(),
                status: 'draft'
            };
            
            // Guardar campa帽a en localStorage
            const campaigns = JSON.parse(localStorage.getItem('marketing_campaigns') || '[]');
            campaigns.push(campaign);
            localStorage.setItem('marketing_campaigns', JSON.stringify(campaigns));
            
            alert(' Campa帽a creada correctamente');
            
            // Limpiar formulario
            document.getElementById('campaignName').value = '';
            document.getElementById('campaignMessage').value = '';
            
            // Actualizar lista de campa帽as
            loadCampaigns();
        }
        
        // Funci贸n para cargar campa帽as
        function loadCampaigns() {
            const campaigns = JSON.parse(localStorage.getItem('marketing_campaigns') || '[]');
            const campaignsList = document.getElementById('campaignsList');
            
            if (campaigns.length === 0) {
                campaignsList.innerHTML = '<p style="color: #666; text-align: center;">No hay campa帽as creadas</p>';
                return;
            }
            
            campaignsList.innerHTML = campaigns.map(campaign => `
                <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; border-left: 4px solid #4caf50;">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div>
                            <h5 style="margin: 0 0 8px 0; color: #333;">${campaign.name}</h5>
                            <p style="margin: 0 0 8px 0; color: #666; font-size: 14px;">${campaign.message.substring(0, 100)}${campaign.message.length > 100 ? '...' : ''}</p>
                            <div style="display: flex; gap: 12px; font-size: 12px; color: #666;">
                                <span>Segmento: ${campaign.segment}</span>
                                <span>Tipo: ${campaign.type}</span>
                                <span>Estado: ${campaign.status}</span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px;">
                            <button onclick="sendCampaign('${campaign.id}')" style="background: #4caf50; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px;">Enviar</button>
                            <button onclick="deleteCampaign('${campaign.id}')" style="background: #f44336; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px;">Eliminar</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        // Funci贸n para usar plantilla
        function useTemplate(templateType) {
            const templates = {
                welcome: '隆Bienvenido a Checkin24hs!  Descubre nuestras mejores ofertas de hoteles y disfruta de descuentos exclusivos. 隆Tu pr贸xima aventura te espera!',
                specialOffer: ' 隆OFERTA ESPECIAL POR TIEMPO LIMITADO!  Descuentos exclusivos en hoteles premium. 隆No te pierdas esta oportunidad 煤nica!',
                reminder: ' 驴Ya planificaste tu pr贸xima escapada? No olvides revisar nuestras nuevas ofertas. 隆Tu pr贸xima aventura te espera en Checkin24hs!',
                reactivation: ' 隆Te extra帽amos! Vuelve a descubrir las mejores ofertas en Checkin24hs. Tenemos descuentos especiales esper谩ndote.'
            };
            
            const message = templates[templateType];
            if (message) {
                // Cambiar a la pesta帽a de campa帽as
                showMarketingTab('campaigns');
                
                // Llenar el formulario con la plantilla
                setTimeout(() => {
                    document.getElementById('campaignMessage').value = message;
                }, 100);
            }
        }
        
        // Funci贸n para generar gr谩fico de engagement
        function generateEngagementChart(users) {
            const months = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'];
            const engagement = months.map((month, index) => {
                const monthUsers = users.filter(user => {
                    const userDate = new Date(user.createdAt);
                    return userDate.getMonth() === index;
                });
                return monthUsers.length;
            });
            
            const maxEngagement = Math.max(...engagement);
            
            return engagement.map((value, index) => `
                <div style="display: flex; flex-direction: column; align-items: center; flex: 1;">
                    <div style="width: 100%; background: #e0e0e0; border-radius: 4px; overflow: hidden; margin-bottom: 8px;">
                        <div style="height: ${(value / maxEngagement) * 150}px; background: #2196f3; transition: height 0.3s;"></div>
                    </div>
                    <span style="font-size: 12px; color: #666;">${months[index]}</span>
                    <span style="font-size: 10px; color: #999;">${value}</span>
                </div>
            `).join('');
        }
        
        // Funci贸n para enviar campa帽a
        function sendCampaign(campaignId) {
            const campaigns = JSON.parse(localStorage.getItem('marketing_campaigns') || '[]');
            const campaign = campaigns.find(c => c.id === campaignId);
            
            if (!campaign) {
                alert(' Campa帽a no encontrada');
                return;
            }
            
            // Simular env铆o de campa帽a
            const users = loadUsersData();
            let targetUsers = [];
            
            switch(campaign.segment) {
                case 'all':
                    targetUsers = users;
                    break;
                case 'active':
                    targetUsers = users.filter(u => u.status === 'active' || u.status === 'Activo');
                    break;
                case 'withQuotes':
                    targetUsers = users.filter(u => u.cotizaciones && u.cotizaciones > 0);
                    break;
                case 'newThisMonth':
                    targetUsers = users.filter(u => {
                        const userDate = new Date(u.createdAt);
                        const currentDate = new Date();
                        return userDate.getMonth() === currentDate.getMonth() && 
                               userDate.getFullYear() === currentDate.getFullYear();
                    });
                    break;
                case 'inactive':
                    targetUsers = users.filter(u => u.status === 'inactive' || u.status === 'Inactivo');
                    break;
            }
            
            // Actualizar estado de la campa帽a
            campaign.status = 'sent';
            campaign.sentAt = new Date().toISOString();
            campaign.recipients = targetUsers.length;
            
            localStorage.setItem('marketing_campaigns', JSON.stringify(campaigns));
            
            alert(` Campa帽a "${campaign.name}" enviada a ${targetUsers.length} usuarios`);
            
            // Actualizar lista de campa帽as
            loadCampaigns();
        }
        
        // Funci贸n para eliminar campa帽a
        function deleteCampaign(campaignId) {
            if (confirm('驴Est谩s seguro de que quieres eliminar esta campa帽a?')) {
                const campaigns = JSON.parse(localStorage.getItem('marketing_campaigns') || '[]');
                const updatedCampaigns = campaigns.filter(c => c.id !== campaignId);
                localStorage.setItem('marketing_campaigns', JSON.stringify(updatedCampaigns));
                
                alert(' Campa帽a eliminada correctamente');
                loadCampaigns();
            }
        }

        // Funci贸n para mostrar analytics de usuarios
        function showUserAnalytics() {
            console.log(' Mostrando analytics de usuarios...');
            
            // Cargar datos de usuarios
            const users = loadUsersData();
            
            // Calcular estad铆sticas
            const stats = calculateUserStats(users);
            
            // Crear y mostrar modal de analytics
            showAnalyticsModal(stats, users);
        }
        
        // Funci贸n para calcular estad铆sticas de usuarios
        function calculateUserStats(users) {
            const totalUsers = users.length;
            const activeUsers = users.filter(user => user.status === 'active' || user.status === 'Activo').length;
            const inactiveUsers = users.filter(user => user.status === 'inactive' || user.status === 'Inactivo').length;
            
            // Usuarios por mes (煤ltimos 6 meses)
            const monthlyStats = {};
            const currentDate = new Date();
            for (let i = 5; i >= 0; i--) {
                const date = new Date(currentDate.getFullYear(), currentDate.getMonth() - i, 1);
                const monthKey = date.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' });
                monthlyStats[monthKey] = 0;
            }
            
            users.forEach(user => {
                const userDate = new Date(user.createdAt);
                const monthKey = userDate.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' });
                if (monthlyStats[monthKey] !== undefined) {
                    monthlyStats[monthKey]++;
                }
            });
            
            // Usuarios por tipo de cuenta
            const accountTypes = {};
            users.forEach(user => {
                const type = user.tipoCuenta || 'registrado';
                accountTypes[type] = (accountTypes[type] || 0) + 1;
            });
            
            // Usuarios con cotizaciones
            const usersWithQuotes = users.filter(user => user.cotizaciones && user.cotizaciones > 0).length;
            
            return {
                totalUsers,
                activeUsers,
                inactiveUsers,
                monthlyStats,
                accountTypes,
                usersWithQuotes,
                usersWithoutQuotes: totalUsers - usersWithQuotes
            };
        }
        
        // Funci贸n para mostrar modal de analytics
        function showAnalyticsModal(stats, users) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 12px; padding: 24px; max-width: 90%; max-height: 90%; overflow-y: auto; width: 800px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                        <h2 style="margin: 0; color: #333;"> An谩lisis de Usuarios</h2>
                        <button onclick="this.closest('.modal').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
                    </div>
                    
                    <!-- Estad铆sticas principales -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                        <div style="background: #e3f2fd; padding: 16px; border-radius: 8px; text-align: center;">
                            <h3 style="margin: 0; color: #1976d2; font-size: 24px;">${stats.totalUsers}</h3>
                            <p style="margin: 4px 0 0 0; color: #666;">Total Usuarios</p>
                        </div>
                        <div style="background: #e8f5e8; padding: 16px; border-radius: 8px; text-align: center;">
                            <h3 style="margin: 0; color: #2e7d32; font-size: 24px;">${stats.activeUsers}</h3>
                            <p style="margin: 4px 0 0 0; color: #666;">Usuarios Activos</p>
                        </div>
                        <div style="background: #fff3e0; padding: 16px; border-radius: 8px; text-align: center;">
                            <h3 style="margin: 0; color: #f57c00; font-size: 24px;">${stats.usersWithQuotes}</h3>
                            <p style="margin: 4px 0 0 0; color: #666;">Con Cotizaciones</p>
                        </div>
                        <div style="background: #f3e5f5; padding: 16px; border-radius: 8px; text-align: center;">
                            <h3 style="margin: 0; color: #7b1fa2; font-size: 24px;">${Math.round((stats.activeUsers / stats.totalUsers) * 100)}%</h3>
                            <p style="margin: 4px 0 0 0; color: #666;">Tasa de Actividad</p>
                        </div>
                    </div>
                    
                    <!-- Gr谩fico de usuarios por mes -->
                    <div style="margin-bottom: 24px;">
                        <h3 style="margin-bottom: 16px; color: #333;"> Registros por Mes</h3>
                        <div style="background: #f8f9fa; padding: 16px; border-radius: 8px;">
                            ${Object.entries(stats.monthlyStats).map(([month, count]) => `
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <span style="font-weight: 500;">${month}</span>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 200px; height: 8px; background: #e0e0e0; border-radius: 4px; overflow: hidden;">
                                            <div style="width: ${(count / Math.max(...Object.values(stats.monthlyStats))) * 100}%; height: 100%; background: #2196f3;"></div>
                                        </div>
                                        <span style="font-weight: 500; min-width: 30px; text-align: right;">${count}</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <!-- Tipos de cuenta -->
                    <div style="margin-bottom: 24px;">
                        <h3 style="margin-bottom: 16px; color: #333;"> Distribuci贸n por Tipo de Cuenta</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px;">
                            ${Object.entries(stats.accountTypes).map(([type, count]) => `
                                <div style="background: #f8f9fa; padding: 12px; border-radius: 6px; text-align: center;">
                                    <h4 style="margin: 0; color: #333; font-size: 18px;">${count}</h4>
                                    <p style="margin: 4px 0 0 0; color: #666; font-size: 14px;">${type}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <!-- Acciones r谩pidas -->
                    <div style="margin-bottom: 24px;">
                        <h3 style="margin-bottom: 16px; color: #333;"> Acciones R谩pidas</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                            <button onclick="exportActiveUsers()" style="background: #4caf50; color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer;">
                                 Exportar Usuarios Activos
                            </button>
                            <button onclick="exportUsersWithQuotes()" style="background: #ff9800; color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer;">
                                 Exportar Con Cotizaciones
                            </button>
                            <button onclick="generateUserReport()" style="background: #2196f3; color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer;">
                                 Generar Reporte Completo
                            </button>
                        </div>
                    </div>
                    
                    <!-- Tabla de usuarios recientes -->
                    <div>
                        <h3 style="margin-bottom: 16px; color: #333;"> Usuarios Recientes</h3>
                        <div style="max-height: 200px; overflow-y: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: #f5f5f5;">
                                        <th style="padding: 8px; text-align: left; font-size: 14px;">Usuario</th>
                                        <th style="padding: 8px; text-align: left; font-size: 14px;">Email</th>
                                        <th style="padding: 8px; text-align: center; font-size: 14px;">Estado</th>
                                        <th style="padding: 8px; text-align: center; font-size: 14px;">Fecha</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${users.slice(0, 5).map(user => `
                                        <tr style="border-bottom: 1px solid #eee;">
                                            <td style="padding: 8px; font-size: 14px;">${user.name}</td>
                                            <td style="padding: 8px; font-size: 14px;">${user.email}</td>
                                            <td style="padding: 8px; text-align: center; font-size: 14px;">
                                                <span style="padding: 2px 8px; border-radius: 12px; font-size: 12px; ${user.status === 'active' || user.status === 'Activo' ? 'background: #e8f5e8; color: #2e7d32;' : 'background: #ffebee; color: #c62828;'}">
                                                    ${user.status === 'active' || user.status === 'Activo' ? 'Activo' : 'Inactivo'}
                                                </span>
                                            </td>
                                            <td style="padding: 8px; text-align: center; font-size: 14px;">${new Date(user.createdAt).toLocaleDateString('es-ES')}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        // Funciones auxiliares para las acciones r谩pidas
        function exportActiveUsers() {
            const users = loadUsersData();
            const activeUsers = users.filter(user => user.status === 'active' || user.status === 'Activo');
            
            const csvContent = 'data:text/csv;charset=utf-8,' + 
                'Nombre,Email,Tel茅fono,Estado,Fecha Registro\n' +
                activeUsers.map(user => 
                    `"${user.name}","${user.email}","${user.phone || ''}","${user.status}","${new Date(user.createdAt).toLocaleDateString('es-ES')}"`
                ).join('\n');
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'usuarios_activos.csv');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert(' Usuarios activos exportados correctamente');
        }
        
        function exportUsersWithQuotes() {
            const users = loadUsersData();
            const usersWithQuotes = users.filter(user => user.cotizaciones && user.cotizaciones > 0);
            
            const csvContent = 'data:text/csv;charset=utf-8,' + 
                'Nombre,Email,Tel茅fono,Cotizaciones,Estado\n' +
                usersWithQuotes.map(user => 
                    `"${user.name}","${user.email}","${user.phone || ''}","${user.cotizaciones || 0}","${user.status}"`
                ).join('\n');
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'usuarios_con_cotizaciones.csv');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert(' Usuarios con cotizaciones exportados correctamente');
        }
        
        function generateUserReport() {
            const users = loadUsersData();
            const stats = calculateUserStats(users);
            
            const report = `
REPORTE DE USUARIOS - CHECKIN24HS
Fecha: ${new Date().toLocaleDateString('es-ES')}

ESTADSTICAS GENERALES:
- Total de usuarios: ${stats.totalUsers}
- Usuarios activos: ${stats.activeUsers}
- Usuarios inactivos: ${stats.inactiveUsers}
- Tasa de actividad: ${Math.round((stats.activeUsers / stats.totalUsers) * 100)}%
- Usuarios con cotizaciones: ${stats.usersWithQuotes}
- Usuarios sin cotizaciones: ${stats.usersWithoutQuotes}

DISTRIBUCIN POR TIPO DE CUENTA:
${Object.entries(stats.accountTypes).map(([type, count]) => `- ${type}: ${count}`).join('\n')}

REGISTROS POR MES:
${Object.entries(stats.monthlyStats).map(([month, count]) => `- ${month}: ${count} usuarios`).join('\n')}

USUARIOS RECIENTES (煤ltimos 10):
${users.slice(0, 10).map(user => `- ${user.name} (${user.email}) - ${new Date(user.createdAt).toLocaleDateString('es-ES')}`).join('\n')}
            `;
            
            const blob = new Blob([report], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `reporte_usuarios_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            window.URL.revokeObjectURL(url);
            
            alert(' Reporte completo generado correctamente');
        }

        // Funci贸n para exportar emails para campa帽a
        function exportEmailsForCampaign() {
            // Implementar exportaci贸n de emails
            console.log('Exportando emails para campa帽a...');
        }

        // Funci贸n para exportar tel茅fonos para WhatsApp
        function exportPhonesForWhatsApp() {
            // Implementar exportaci贸n de tel茅fonos
            console.log('Exportando tel茅fonos para WhatsApp...');
        }

        // Funci贸n para generar reporte de usuarios activos
        function generateActiveUsersReport() {
            // Implementar reporte
            console.log('Generando reporte de usuarios activos...');
        }

        // Funci贸n para crear segmento de usuarios de cotizaciones
        function createQuoteUsersSegment() {
            // Implementar segmento
            console.log('Creando segmento de usuarios de cotizaciones...');
        }

        // Funci贸n para cargar datos de usuarios
        function loadUsersData() {
            try {
                // Cargar usuarios desde checkin24hs_users (dashboard)
                const dashboardUsers = JSON.parse(localStorage.getItem('checkin24hs_users') || '[]');
                
                // Cargar usuarios desde clientesDB (index.html)
                const mobileUsers = JSON.parse(localStorage.getItem('clientesDB') || '[]');
                
                console.log(' Datos encontrados en localStorage:', {
                    checkin24hs_users: dashboardUsers,
                    clientesDB: mobileUsers
                });
                
                // Combinar usuarios 煤nicos
                const allUsers = [...dashboardUsers];
                
                // Agregar usuarios m贸viles que no est茅n en dashboard
                mobileUsers.forEach(mobileUser => {
                    const exists = allUsers.find(user => user.email === mobileUser.email);
                    if (!exists) {
                        // Convertir formato de usuario m贸vil a formato dashboard
                        const convertedUser = {
                            id: mobileUser.id,
                            name: mobileUser.name,
                            email: mobileUser.email,
                            phone: mobileUser.phone,
                            status: mobileUser.status || 'active',
                            createdAt: mobileUser.fechaRegistro || new Date().toISOString(),
                            tipoCuenta: mobileUser.tipoCuenta || 'registrado',
                            birthDay: mobileUser.birthDay,
                            birthMonth: mobileUser.birthMonth
                        };
                        allUsers.push(convertedUser);
                    }
                });
                
                console.log(' Cargando datos de usuarios...', {
                    dashboard: dashboardUsers.length,
                    mobile: mobileUsers.length,
                    total: allUsers.length,
                    allUsers: allUsers
                });
                
                // Actualizar tabla de usuarios
                loadUsersTable(allUsers);
                
                // Actualizar estad铆sticas
                updateDashboardStats(allUsers);
                
                return allUsers;
            } catch (error) {
                console.error(' Error al cargar usuarios:', error);
                return [];
            }
        }

        // Funci贸n para actualizar estad铆sticas del dashboard
        function updateDashboardStats(users) {
            const totalUsers = users.length;
            const activeUsers = users.filter(user => user.status === 'active').length;
            const newUsersThisMonth = users.filter(user => {
                const userDate = new Date(user.createdAt);
                const currentDate = new Date();
                return userDate.getMonth() === currentDate.getMonth() && 
                       userDate.getFullYear() === currentDate.getFullYear();
            }).length;
            
            // Actualizar contadores en el dashboard
            const totalUsersElement = document.querySelector('#totalUsers');
            const activeUsersElement = document.querySelector('#activeUsers');
            const newUsersElement = document.querySelector('#newUsers');
            
            if (totalUsersElement) totalUsersElement.textContent = totalUsers;
            if (activeUsersElement) activeUsersElement.textContent = activeUsers;
            if (newUsersElement) newUsersElement.textContent = newUsersThisMonth;
            
            console.log(' Estad铆sticas actualizadas:', {
                total: totalUsers,
                active: activeUsers,
                newThisMonth: newUsersThisMonth
            });
        }

        // Funci贸n para sincronizar con index.html
        function syncWithIndexHTML() {
            console.log(' Sincronizando datos de usuarios...');
            
            // Cargar datos actualizados
            const users = loadUsersData();
            
            // Actualizar interfaz
            updateDashboardStats(users);
            loadUsersTable(users);
            
            console.log(' Sincronizaci贸n completada');
        }
        
        // Funci贸n para iniciar sincronizaci贸n autom谩tica
        function startAutoSync() {
            // Sincronizar cada 30 segundos
            setInterval(() => {
                syncWithIndexHTML();
            }, 30000);
            
            console.log(' Sincronizaci贸n autom谩tica iniciada (cada 30 segundos)');
        }

        // Funci贸n para cargar tabla de usuarios
        function loadUsersTable(users) {
            console.log(' Cargando tabla de usuarios con:', users.length, 'usuarios');
            
            const tableBody = document.querySelector('#usersTableBody');
            if (!tableBody) {
                console.error(' No se encontr贸 la tabla de usuarios');
                return;
            }
            
            console.log(' Tabla encontrada, limpiando contenido...');
            
            // Limpiar tabla
            tableBody.innerHTML = '';
            
            if (users.length === 0) {
                console.log(' No hay usuarios, mostrando mensaje vac铆o');
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="8" class="text-center text-muted">
                            <i class="fas fa-users"></i> No hay usuarios registrados
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Agregar usuarios a la tabla
            users.forEach((user, index) => {
                const row = document.createElement('tr');
                const userType = user.tipoCuenta || 'registrado';
                const userSource = user.fechaRegistro ? 'M贸vil' : 'Dashboard';
                const cotizaciones = user.cotizaciones ? user.cotizaciones.length : 0;
                const ultimaActividad = user.ultimaActividad || user.createdAt;
                
                row.innerHTML = `
                    <td style="padding: 12px;">
                        <div class="user-info">
                            <div class="user-name">${user.name || 'Sin nombre'}</div>
                            <div class="user-type">${userType} - ${userSource}</div>
                        </div>
                    </td>
                    <td style="padding: 12px;">${user.email || 'Sin email'}</td>
                    <td style="padding: 12px; text-align: center;">${user.phone || 'Sin tel茅fono'}</td>
                    <td style="padding: 12px; text-align: center;">${cotizaciones}</td>
                    <td style="padding: 12px; text-align: center;">${formatDate(ultimaActividad)}</td>
                    <td style="padding: 12px; text-align: center;">
                        <span class="status-badge ${user.status === 'active' || user.status === 'activo' ? 'active' : 'inactive'}">
                            ${user.status === 'active' || user.status === 'activo' ? 'Activo' : 'Inactivo'}
                        </span>
                    </td>
                    <td style="padding: 12px; text-align: center;">
                        <button class="action-btn marketing" onclick="showMarketingTools('${user.id}')" title="Marketing">
                            <i class="fas fa-bullhorn"></i>
                        </button>
                    </td>
                    <td style="padding: 12px; text-align: center;">
                        <div class="action-buttons">
                            <button class="btn-edit" onclick="editUser('${user.id}')" title="Editar">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-delete" onclick="deleteUser('${user.id}')" title="Eliminar">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            console.log(' Tabla de usuarios actualizada:', users.length, 'usuarios');
            console.log(' Filas agregadas a la tabla');
        }

        // Funci贸n para editar usuario
        function editUser(userId) {
            alert('Funcionalidad de edici贸n en desarrollo');
        }

        // Funci贸n para formatear fecha
        function formatDate(dateString) {
            if (!dateString) return 'Sin fecha';
            
            try {
                const date = new Date(dateString);
                return date.toLocaleDateString('es-ES', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            } catch (error) {
                return 'Fecha inv谩lida';
            }
        }
        
        // Funci贸n para eliminar usuario
        function deleteUser(userId) {
            if (confirm('驴Est谩s seguro de que quieres eliminar este usuario?')) {
                try {
                    // Cargar usuarios actuales
                    const users = JSON.parse(localStorage.getItem('checkin24hs_users') || '[]');
                    
                    // Filtrar el usuario a eliminar
                    const updatedUsers = users.filter(user => user.id !== userId);
                    
                    // Guardar usuarios actualizados
                    localStorage.setItem('checkin24hs_users', JSON.stringify(updatedUsers));
                    
                    // Recargar tabla
                    loadUsersData();
                    
                    console.log(' Usuario eliminado:', userId);
                    alert(' Usuario eliminado correctamente');
                } catch (error) {
                    console.error(' Error al eliminar usuario:', error);
                    alert(' Error al eliminar usuario');
                }
            }
        }
        
        // Funci贸n para eliminar todos los usuarios de index.html
        function deleteAllUsers() {
            if (confirm('锔 驴Est谩s seguro de que quieres eliminar TODOS los usuarios registrados?\n\nEsta acci贸n eliminar谩 todos los usuarios de la aplicaci贸n m贸vil (index.html) y no se puede deshacer.')) {
                try {
                    // Eliminar usuarios de checkin24hs_users (dashboard)
                    localStorage.removeItem('checkin24hs_users');
                    
                    // Eliminar usuarios de clientesDB (index.html)
                    localStorage.removeItem('clientesDB');
                    
                    // Eliminar usuario actual si existe
                    localStorage.removeItem('currentUser');
                    
                    // Recargar tabla
                    loadUsersData();
                    
                    console.log('锔 Todos los usuarios eliminados');
                    alert(' Todos los usuarios han sido eliminados correctamente\n\n- Usuarios del dashboard eliminados\n- Usuarios de la app m贸vil eliminados\n- Sesiones activas cerradas');
                    
                    // Actualizar estad铆sticas
                    updateDashboardStats([]);
                    
                } catch (error) {
                    console.error(' Error al eliminar usuarios:', error);
                    alert(' Error al eliminar usuarios');
                }
            }
        }

        // ===== FUNCIONES DE RESERVAS =====

        // Funci贸n para inicializar base de datos de reservas
        function initReservationsDB() {
            console.log('Inicializando base de datos de reservas...');
            
            // Verificar si ya existen reservas en localStorage
            const existingReservations = JSON.parse(localStorage.getItem('reservationsDB') || '[]');
            
            if (existingReservations.length === 0) {
                console.log(' No hay reservas en la base de datos, agregando reservas de ejemplo...');
                
                // Reservas de ejemplo
                const defaultReservations = [
                    {
                        id: 'res-001',
                        reservationCode: 'RES-2024-001',
                        clientName: 'Mar铆a Gonz谩lez',
                        clientEmail: 'maria.gonzalez@email.com',
                        clientPhone: '+56912345678',
                        hotelId: 'hotel-puyehue',
                        hotelName: 'Hotel Terma de Puyehue',
                        checkIn: '2024-02-15',
                        checkOut: '2024-02-18',
                        guests: 2,
                        adults: 2,
                        children: 0,
                        roomType: 'Doble',
                        status: 'Confirmada',
                        totalAmount: 600,
                        paymentStatus: 'Pagado',
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    },
                    {
                        id: 'res-002',
                        reservationCode: 'RES-2024-002',
                        clientName: 'Carlos Rodr铆guez',
                        clientEmail: 'carlos.rodriguez@email.com',
                        clientPhone: '+56987654321',
                        hotelId: 'hotel-huilo-huilo',
                        hotelName: 'Hotel Huilo-Huilo',
                        checkIn: '2024-02-20',
                        checkOut: '2024-02-22',
                        guests: 4,
                        adults: 2,
                        children: 2,
                        roomType: 'Familiar',
                        status: 'Pendiente',
                        totalAmount: 480,
                        paymentStatus: 'Pendiente',
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    },
                    {
                        id: 'res-003',
                        reservationCode: 'RES-2024-003',
                        clientName: 'Ana Silva',
                        clientEmail: 'ana.silva@email.com',
                        clientPhone: '+56911223344',
                        hotelId: 'hotel-corralco',
                        hotelName: 'Hotel Corralco Resort',
                        checkIn: '2024-02-25',
                        checkOut: '2024-02-28',
                        guests: 2,
                        adults: 2,
                        children: 0,
                        roomType: 'Doble',
                        status: 'Confirmada',
                        totalAmount: 720,
                        paymentStatus: 'Pagado',
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    }
                ];
                
                // Guardar reservas de ejemplo en localStorage
                localStorage.setItem('reservationsDB', JSON.stringify(defaultReservations));
                
                console.log(` ${defaultReservations.length} reservas de ejemplo agregadas`);
                
            } else {
                console.log(`癸 Ya existen ${existingReservations.length} reservas en la base de datos`);
            }
        }

        // Funci贸n para cargar tabla de reservas
        function loadReservationsTable() {
            console.log(' Cargando tabla de reservas...');
            
            const tbody = document.getElementById('reservationsTableBody');
            if (!tbody) {
                console.error(' Tbody de reservas no encontrado');
                return;
            }
            
            // Obtener reservas del localStorage
            const reservations = JSON.parse(localStorage.getItem('reservationsDB') || '[]');
            console.log(` Encontradas ${reservations.length} reservas en localStorage`);
            
            tbody.innerHTML = '';

            if (reservations.length === 0) {
                // Mostrar mensaje si no hay reservas
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="8" style="text-align: center; padding: 40px; color: #666;">
                        <div style="margin-bottom: 20px;">
                            <i class="fas fa-calendar" style="font-size: 3rem; color: #ddd;"></i>
                        </div>
                        <h3 style="margin-bottom: 10px; color: #333;">No hay reservas registradas</h3>
                        <p style="margin-bottom: 20px; color: #666;">Comienza agregando tu primera reserva</p>
                        <button onclick="addNewReservation()" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Nueva Reserva
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
                return;
            }

            reservations.forEach(reservation => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td style="font-weight: 500; color: #1976d2;">
                        <strong>${reservation.reservationCode || 'N/A'}</strong>
                    </td>
                    <td>
                        <div>
                            <div class="hotel-name">${reservation.clientName}</div>
                            <div class="hotel-location">${reservation.clientEmail}</div>
                        </div>
                    </td>
                    <td>${reservation.hotelName}</td>
                    <td style="text-align: center;">
                        <div>
                            <div><strong>Entrada:</strong> ${formatDate(reservation.checkIn)}</div>
                            <div><strong>Salida:</strong> ${formatDate(reservation.checkOut)}</div>
                        </div>
                    </td>
                    <td style="text-align: center;">
                        <div>
                            <div>${reservation.guests} personas</div>
                            <div style="font-size: 0.8em; color: #666;">
                                ${reservation.adults} adultos, ${reservation.children} ni帽os
                            </div>
                        </div>
                    </td>
                    <td style="text-align: center;">
                        <span class="status-${reservation.status.toLowerCase()}">${reservation.status}</span>
                    </td>
                    <td style="text-align: center;">
                        <strong>$${reservation.totalAmount.toLocaleString()}</strong>
                        <div style="font-size: 0.8em; color: #666;">
                            ${reservation.paymentStatus}
                        </div>
                    </td>
                    <td style="text-align: center;">
                        <button onclick="editReservation('${reservation.id}')" class="action-btn edit" title="Editar">
                            <span class="material-icons">edit</span>
                        </button>
                        <button onclick="deleteReservation('${reservation.id}')" class="action-btn delete" title="Eliminar">
                            <span class="material-icons">delete</span>
                        </button>
                        <button onclick="viewReservation('${reservation.id}')" class="action-btn view" title="Ver">
                            <span class="material-icons">visibility</span>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            console.log(` Tabla de reservas cargada con ${reservations.length} reservas`);
        }

        // Funci贸n para actualizar estad铆sticas de reservas
        function updateReservationsStats() {
            console.log(' Actualizando estad铆sticas de reservas...');
            
            const reservations = JSON.parse(localStorage.getItem('reservationsDB') || '[]');
            
            // Actualizar contadores
            const totalReservationsElement = document.getElementById('totalReservations');
            const confirmedReservationsElement = document.getElementById('confirmedReservations');
            const pendingReservationsElement = document.getElementById('pendingReservations');
            const totalRevenueElement = document.getElementById('totalRevenue');
            
            if (totalReservationsElement) {
                totalReservationsElement.textContent = reservations.length;
            }
            
            if (confirmedReservationsElement) {
                const confirmed = reservations.filter(r => r.status === 'Confirmada').length;
                confirmedReservationsElement.textContent = confirmed;
            }
            
            if (pendingReservationsElement) {
                const pending = reservations.filter(r => r.status === 'Pendiente').length;
                pendingReservationsElement.textContent = pending;
            }
            
            if (totalRevenueElement) {
                const totalRevenue = reservations.reduce((sum, r) => sum + r.totalAmount, 0);
                totalRevenueElement.textContent = `$${totalRevenue.toLocaleString()}`;
            }
            
            console.log(` Estad铆sticas de reservas actualizadas: ${reservations.length} reservas`);
        }

        // Funci贸n para agregar nueva reserva
        function addNewReservation() {
            console.log(' Abriendo formulario para nueva reserva...');
            
            // Limpiar el formulario
            const form = document.getElementById('newReservationForm');
            if (form) {
                form.reset();
            }
            
            // Generar c贸digo de reserva autom谩tico
            const reservationCodeInput = document.getElementById('newReservationCode');
            if (reservationCodeInput) {
                reservationCodeInput.value = generateReservationCode();
            }
            
            // Establecer fecha m铆nima como hoy
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('newCheckIn').min = today;
            document.getElementById('newCheckOut').min = today;
            
            // Cargar hoteles en el select
            loadHotelsForNewReservation();
            
            // Mostrar el modal
            document.getElementById('newReservationModal').style.display = 'block';
            
            console.log(' Modal de nueva reserva abierto');
        }

        // Funci贸n para editar reserva
        function editReservation(reservationId) {
            console.log('锔 Editando reserva:', reservationId);
            
            const reservations = JSON.parse(localStorage.getItem('reservationsDB') || '[]');
            const reservation = reservations.find(r => r.id === reservationId);
            
            if (!reservation) {
                console.error(' Reserva no encontrada:', reservationId);
                alert(' Reserva no encontrada');
                return;
            }
            
            // Llenar el formulario con los datos de la reserva
            document.getElementById('editClientName').value = reservation.clientName || '';
            document.getElementById('editClientEmail').value = reservation.clientEmail || '';
            document.getElementById('editStatus').value = reservation.status || 'Pendiente';
            document.getElementById('editPaymentStatus').value = reservation.paymentStatus || 'Pendiente';
            document.getElementById('editTotalAmount').value = reservation.totalAmount || 0;
            
            // Actualizar el t铆tulo del modal
            document.getElementById('editReservationTitle').textContent = `Editar Reserva - ${reservation.reservationCode || reservation.id}`;
            
            // Guardar el ID de la reserva en el formulario
            document.getElementById('editReservationForm').dataset.reservationId = reservationId;
            
            // Mostrar el modal
            document.getElementById('editReservationModal').style.display = 'block';
            
            console.log(' Modal de edici贸n abierto para reserva:', reservation.reservationCode);
        }

        // Funci贸n para eliminar reserva
        function deleteReservation(reservationId) {
            if (confirm('驴Est谩s seguro de que quieres eliminar esta reserva?')) {
                console.log('锔 Eliminando reserva:', reservationId);
                
                const reservations = JSON.parse(localStorage.getItem('reservationsDB') || '[]');
                const updatedReservations = reservations.filter(r => r.id !== reservationId);
                
                localStorage.setItem('reservationsDB', JSON.stringify(updatedReservations));
                
                console.log(' Reserva eliminada correctamente');
                alert(' Reserva eliminada correctamente');
                
                // Actualizar tabla y estad铆sticas
                loadReservationsTable();
                updateReservationsStats();
            }
        }

        // Funci贸n para ver detalles de reserva
        function viewReservation(reservationId) {
            console.log('锔 Viendo detalles de reserva:', reservationId);
            
            const reservations = JSON.parse(localStorage.getItem('reservationsDB') || '[]');
            const reservation = reservations.find(r => r.id === reservationId);
            
            if (!reservation) {
                console.error(' Reserva no encontrada:', reservationId);
                alert(' Reserva no encontrada');
                return;
            }
            
            // Crear modal de detalles
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 15px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="margin: 0; color: #333;"> ${reservation.reservationCode || `Reserva #${reservation.id}`}</h2>
                        <button onclick="this.closest('.modal').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h3> Informaci贸n del Cliente</h3>
                        <p><strong>Nombre:</strong> ${reservation.clientName}</p>
                        <p><strong>Email:</strong> ${reservation.clientEmail}</p>
                        <p><strong>Tel茅fono:</strong> ${reservation.clientPhone}</p>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h3> Informaci贸n de la Reserva</h3>
                        <p><strong>Hotel:</strong> ${reservation.hotelName}</p>
                        <p><strong>Entrada:</strong> ${formatDate(reservation.checkIn)}</p>
                        <p><strong>Salida:</strong> ${formatDate(reservation.checkOut)}</p>
                        <p><strong>Habitaci贸n:</strong> ${reservation.roomType}</p>
                        <p><strong>Hu茅spedes:</strong> ${reservation.guests} personas (${reservation.adults} adultos, ${reservation.children} ni帽os)</p>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h3> Informaci贸n de Pago</h3>
                        <p><strong>Estado:</strong> <span class="status-${reservation.status.toLowerCase()}">${reservation.status}</span></p>
                        <p><strong>Pago:</strong> ${reservation.paymentStatus}</p>
                        <p><strong>Total:</strong> $${reservation.totalAmount.toLocaleString()} USD</p>
                    </div>
                    
                    <div style="text-align: center;">
                        <button onclick="editReservation('${reservation.id}'); this.closest('.modal').remove()" style="background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; margin-right: 10px; cursor: pointer;">
                            锔 Editar
                        </button>
                        <button onclick="this.closest('.modal').remove()" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                            Cerrar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Cerrar modal al hacer clic fuera
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        // Funci贸n para exportar reservas
        function exportReservations() {
            console.log(' Exportando reservas...');
            alert('Funcionalidad de exportaci贸n en desarrollo');
        }

        // Funci贸n para refrescar reservas
        function refreshReservations() {
            console.log(' Refrescando reservas...');
            loadReservationsTable();
            updateReservationsStats();
        }

        // Funci贸n auxiliar para formatear fechas
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('es-CL', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        // Funci贸n para generar c贸digo de reserva autom谩tico
        function generateReservationCode() {
            const year = new Date().getFullYear();
            const reservations = JSON.parse(localStorage.getItem('reservationsDB') || '[]');
            const nextNumber = reservations.length + 1;
            return `RES-${year}-${nextNumber.toString().padStart(3, '0')}`;
        }

        // Funci贸n para cargar hoteles en el select de edici贸n
        function loadHotelsForEdit(selectedHotelId = '') {
            const hotelSelect = document.getElementById('editHotelSelect');
            if (!hotelSelect) return;
            
            // Limpiar opciones existentes
            hotelSelect.innerHTML = '<option value="">Seleccionar hotel...</option>';
            
            // Obtener hoteles del localStorage
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            
            hotels.forEach(hotel => {
                const option = document.createElement('option');
                option.value = hotel.id;
                option.textContent = hotel.name;
                option.selected = hotel.id === selectedHotelId;
                hotelSelect.appendChild(option);
            });
            
            console.log(` ${hotels.length} hoteles cargados en el select de edici贸n`);
        }

        // Funci贸n para cerrar modal de edici贸n de reservas
        function closeEditReservationModal() {
            const modal = document.getElementById('editReservationModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Funci贸n para guardar cambios de la reserva
        function saveReservationChanges(event) {
            event.preventDefault();
            
            console.log(' Guardando cambios de la reserva...');
            
            const form = document.getElementById('editReservationForm');
            const reservationId = form.dataset.reservationId;
            
            if (!reservationId) {
                console.error(' ID de reserva no encontrado');
                alert(' Error: ID de reserva no encontrado');
                return;
            }
            
            // Obtener datos del formulario
            const formData = new FormData(form);
            const reservationData = {
                clientName: formData.get('clientName'),
                clientEmail: formData.get('clientEmail'),
                status: formData.get('status'),
                paymentStatus: formData.get('paymentStatus'),
                totalAmount: parseInt(formData.get('totalAmount'))
            };
            
            // Validar campos requeridos
            if (!reservationData.clientName || !reservationData.clientEmail) {
                alert(' Por favor completa todos los campos requeridos');
                return;
            }
            
            // Obtener reservas existentes
            const reservations = JSON.parse(localStorage.getItem('reservationsDB') || '[]');
            const reservationIndex = reservations.findIndex(r => r.id === reservationId);
            
            if (reservationIndex !== -1) {
                // Actualizar la reserva existente
                reservations[reservationIndex] = {
                    ...reservations[reservationIndex],
                    ...reservationData,
                    updatedAt: new Date().toISOString()
                };
                
                localStorage.setItem('reservationsDB', JSON.stringify(reservations));
                console.log(' Reserva actualizada correctamente');
                alert(' Reserva actualizada correctamente');
                
                // Cerrar modal
                closeEditReservationModal();
                
                // Actualizar tabla y estad铆sticas
                loadReservationsTable();
                updateReservationsStats();
            } else {
                console.error(' Reserva no encontrada para actualizar');
                alert(' Error: Reserva no encontrada');
            }
        }

        // Funci贸n auxiliar para obtener nombre del hotel por ID
        function getHotelNameById(hotelId) {
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            const hotel = hotels.find(h => h.id === hotelId);
            return hotel ? hotel.name : 'Hotel no encontrado';
        }

        // Funci贸n para cargar hoteles en el select de nueva reserva
        function loadHotelsForNewReservation() {
            const hotelSelect = document.getElementById('newHotelSelect');
            if (!hotelSelect) return;
            
            // Limpiar opciones existentes
            hotelSelect.innerHTML = '<option value="">Seleccionar hotel...</option>';
            
            // Obtener hoteles del localStorage
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            
            hotels.forEach(hotel => {
                const option = document.createElement('option');
                option.value = hotel.id;
                option.textContent = hotel.name;
                hotelSelect.appendChild(option);
            });
            
            console.log(` ${hotels.length} hoteles cargados en el select de nueva reserva`);
        }

        // Funci贸n para cerrar modal de nueva reserva
        function closeNewReservationModal() {
            const modal = document.getElementById('newReservationModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Funci贸n para guardar nueva reserva
        function saveNewReservation(event) {
            event.preventDefault();
            
            console.log(' Guardando nueva reserva...');
            
            const form = document.getElementById('newReservationForm');
            
            // Obtener datos del formulario
            const formData = new FormData(form);
            const reservationData = {
                clientName: formData.get('clientName'),
                clientEmail: formData.get('clientEmail'),
                hotelId: formData.get('hotelId'),
                hotelName: getHotelNameById(formData.get('hotelId')),
                reservationCode: formData.get('reservationCode'),
                checkIn: formData.get('checkIn'),
                checkOut: formData.get('checkOut'),
                status: formData.get('status'),
                totalAmount: parseInt(formData.get('totalAmount'))
            };
            
            // Validar campos requeridos
            if (!reservationData.clientName || !reservationData.clientEmail || !reservationData.hotelId || 
                !reservationData.checkIn || !reservationData.checkOut) {
                alert(' Por favor completa todos los campos requeridos');
                return;
            }
            
            // Validar fechas
            if (reservationData.checkOut <= reservationData.checkIn) {
                alert(' La fecha de salida debe ser posterior a la fecha de entrada');
                return;
            }
            
            // Generar ID y c贸digo 煤nicos
            const reservationId = 'res-' + Date.now();
            const reservationCode = reservationData.reservationCode || generateReservationCode();
            
            // Crear nueva reserva
            const newReservation = {
                id: reservationId,
                reservationCode: reservationCode,
                ...reservationData,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            // Obtener reservas existentes
            const reservations = JSON.parse(localStorage.getItem('reservationsDB') || '[]');
            reservations.push(newReservation);
            
            // Guardar en localStorage
            localStorage.setItem('reservationsDB', JSON.stringify(reservations));
            
            console.log(' Nueva reserva creada:', newReservation);
            alert(` Reserva ${reservationCode} creada correctamente`);
            
            // Cerrar modal
            closeNewReservationModal();
            
            // Actualizar tabla y estad铆sticas
            loadReservationsTable();
            updateReservationsStats();
        }
        function deleteUser(userId) {
            if (confirm('驴Est谩s seguro de que quieres eliminar este usuario? Esta acci贸n no se puede deshacer.')) {
                const clientesDB = JSON.parse(localStorage.getItem('clientesDB') || '[]');
                const updatedDB = clientesDB.filter(c => c.id !== userId);
                localStorage.setItem('clientesDB', JSON.stringify(updatedDB));
                
                if (typeof loadUsersData === 'function') {
                    loadUsersData();
                }
                alert(' Usuario eliminado correctamente');
            }
        }
    </script>
</body>
</html> 
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dashboard Images - Checkin24hs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .hotel-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .hotel-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: #fafafa;
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        .image-item {
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 8px;
            background: white;
        }
        .image-item img {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 5px;
        }
        .image-name {
            font-size: 10px;
            color: #666;
            word-break: break-all;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .console {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>üß™ Test Dashboard Images - Checkin24hs</h1>
    
    <div class="status info">
        üîç Esta p√°gina prueba que las im√°genes del dashboard se cargan y muestran correctamente
    </div>

    <div class="test-section">
        <h2>üìä Estado de las Im√°genes</h2>
        <div id="imageStatus"></div>
    </div>

    <div class="test-section">
        <h2>üè® Hoteles y sus Im√°genes</h2>
        <div class="hotel-grid" id="hotelGrid"></div>
    </div>

    <div class="test-section">
        <h2>üîß Acciones de Prueba</h2>
        <button onclick="testImageLoading()">Probar Carga de Im√°genes</button>
        <button onclick="testLocalStorage()">Probar localStorage</button>
        <button onclick="clearLocalStorage()">Limpiar localStorage</button>
        <button onclick="openDashboard()">Abrir Dashboard</button>
    </div>

    <div class="test-section">
        <h2>üìù Console Log</h2>
        <div class="console" id="consoleLog"></div>
    </div>

    <script>
        // Hoteles de prueba
        const hotels = [
            { id: 1, name: "Hotel Terma de Puyehue", slug: "puyehue" },
            { id: 2, name: "Hotel Huilo-Huilo", slug: "huilo-huilo" },
            { id: 3, name: "Hotel Corralco Resort", slug: "corralco" },
            { id: 4, name: "Hotel Futangue", slug: "futangue" },
            { id: 5, name: "Termas de Aguas Calientes", slug: "aguas-calientes" }
        ];

        // Funci√≥n para obtener el slug del hotel
        function getHotelSlug(hotelName) {
            return hotelName.toLowerCase()
                .replace(/[^a-z0-9\s]/g, '')
                .replace(/\s+/g, '-');
        }

        // Funci√≥n para log en la consola
        function log(message) {
            const consoleDiv = document.getElementById('consoleLog');
            const timestamp = new Date().toLocaleTimeString();
            consoleDiv.innerHTML += `[${timestamp}] ${message}\n`;
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
            console.log(message);
        }

        // Funci√≥n para probar carga de im√°genes
        function testImageLoading() {
            log('üîÑ Iniciando prueba de carga de im√°genes...');
            
            let totalImages = 0;
            let loadedImages = 0;
            let errorImages = 0;
            
            hotels.forEach(hotel => {
                const hotelSlug = getHotelSlug(hotel.name);
                const imageTypes = ['main', 'photo-1', 'photo-2', 'photo-3', 'gallery-1', 'gallery-2', 'gallery-3'];
                
                imageTypes.forEach(type => {
                    totalImages++;
                    const imagePath = `hotel-images/hotel-${hotel.id}-${hotelSlug}/${type}.jpg`;
                    
                    const img = new Image();
                    img.onload = () => {
                        loadedImages++;
                        log(`‚úÖ ${imagePath} - Cargada correctamente`);
                        updateStatus();
                    };
                    img.onerror = () => {
                        errorImages++;
                        log(`‚ùå ${imagePath} - Error al cargar`);
                        updateStatus();
                    };
                    img.src = imagePath;
                });
            });
            
            function updateStatus() {
                if (loadedImages + errorImages === totalImages) {
                    log(`üìä Resultado: ${loadedImages} cargadas, ${errorImages} errores de ${totalImages} total`);
                }
            }
        }

        // Funci√≥n para probar localStorage
        function testLocalStorage() {
            log('üîÑ Probando localStorage...');
            
            hotels.forEach(hotel => {
                const key = `hotel_${hotel.id}_photos`;
                const savedPhotos = localStorage.getItem(key);
                
                if (savedPhotos) {
                    try {
                        const photos = JSON.parse(savedPhotos);
                        log(`‚úÖ ${key}: ${photos.length} fotos guardadas`);
                    } catch (e) {
                        log(`‚ùå ${key}: Error al parsear JSON`);
                    }
                } else {
                    log(`‚ÑπÔ∏è ${key}: No hay fotos guardadas`);
                }
            });
        }

        // Funci√≥n para limpiar localStorage
        function clearLocalStorage() {
            log('üßπ Limpiando localStorage...');
            
            hotels.forEach(hotel => {
                const key = `hotel_${hotel.id}_photos`;
                localStorage.removeItem(key);
                log(`üóëÔ∏è Eliminado: ${key}`);
            });
            
            log('‚úÖ localStorage limpiado');
        }

        // Funci√≥n para abrir dashboard
        function openDashboard() {
            window.open('dashboard.html', '_blank');
            log('üîó Abriendo dashboard en nueva pesta√±a');
        }

        // Funci√≥n para renderizar hoteles
        function renderHotels() {
            const hotelGrid = document.getElementById('hotelGrid');
            
            hotelGrid.innerHTML = hotels.map(hotel => {
                const hotelSlug = getHotelSlug(hotel.name);
                const imageTypes = ['main', 'photo-1', 'photo-2', 'photo-3', 'gallery-1', 'gallery-2', 'gallery-3'];
                
                const imagesHtml = imageTypes.map(type => {
                    const imagePath = `hotel-images/hotel-${hotel.id}-${hotelSlug}/${type}.jpg`;
                    return `
                        <div class="image-item">
                            <img src="${imagePath}" alt="${type}" 
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div style="display: none; background: #f0f0f0; height: 80px; display: flex; align-items: center; justify-content: center; font-size: 10px; color: #666;">
                                Error
                            </div>
                            <div class="image-name">${type}.jpg</div>
                        </div>
                    `;
                }).join('');
                
                return `
                    <div class="hotel-card">
                        <h3>${hotel.name}</h3>
                        <p><strong>ID:</strong> ${hotel.id}</p>
                        <p><strong>Slug:</strong> ${hotelSlug}</p>
                        <div class="image-grid">
                            ${imagesHtml}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Funci√≥n para actualizar estado
        function updateImageStatus() {
            const statusDiv = document.getElementById('imageStatus');
            
            let totalImages = 0;
            let availableImages = 0;
            
            hotels.forEach(hotel => {
                const hotelSlug = getHotelSlug(hotel.name);
                const imageTypes = ['main', 'photo-1', 'photo-2', 'photo-3', 'gallery-1', 'gallery-2', 'gallery-3'];
                
                imageTypes.forEach(type => {
                    totalImages++;
                    const imagePath = `hotel-images/hotel-${hotel.id}-${hotelSlug}/${type}.jpg`;
                    
                    // Verificar si el archivo existe (simulado)
                    if (hotel.id <= 5) { // Solo los hoteles que procesamos
                        availableImages++;
                    }
                });
            });
            
            const percentage = Math.round((availableImages / totalImages) * 100);
            
            statusDiv.innerHTML = `
                <div class="status ${percentage === 100 ? 'success' : percentage > 50 ? 'info' : 'error'}">
                    üìä Estado: ${availableImages}/${totalImages} im√°genes disponibles (${percentage}%)
                    ${percentage === 100 ? '‚úÖ Todas las im√°genes est√°n disponibles' : 
                      percentage > 50 ? '‚ö†Ô∏è Algunas im√°genes faltan' : '‚ùå Muchas im√°genes faltan'}
                </div>
            `;
        }

        // Inicializar p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ P√°gina de prueba iniciada');
            renderHotels();
            updateImageStatus();
            testLocalStorage();
        });
    </script>
</body>
</html> 
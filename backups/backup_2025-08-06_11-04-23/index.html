<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkin24hs - Est√°s a un CHECKIN de tu pr√≥xima reserva</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #8B9DC3;
            min-height: 100vh;
        }

        .header {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            text-align: center;
            color: #333;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        .content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 40px 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 220px;
        }

        .modern-search-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
        }

        .modern-search-form {
            display: flex;
            gap: 25px;
            align-items: end;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .search-field {
            flex: 1;
            min-width: 180px;
            max-width: 250px;
        }

        .search-field:last-child {
            flex: 0 0 auto;
            min-width: 200px;
            max-width: 220px;
        }

        /* Ajuste espec√≠fico para el bot√≥n de cotizaci√≥n */
        .modern-search-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
            min-width: 180px;
            max-width: 220px;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .field-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        /* Animaciones divertidas para el modal de promociones */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }

        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-5px);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(5px);
            }
        }

        @keyframes rainbow {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        @keyframes neonFlow {
            0% {
                opacity: 0.3;
                transform: translateX(-100%);
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0.3;
                transform: translateX(100%);
            }
        }

        .field-label {
            display: block;
            font-size: 0.9rem;
            color: #333;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .modern-input, .date-display-modern, .travelers-display {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            font-size: 1rem;
            transition: all 0.3s ease;
            color: #333;
        }

        .modern-input:focus, .date-display-modern:focus, .travelers-display:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }



        .modern-search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Responsive para el formulario de b√∫squeda */
        @media (max-width: 768px) {
            .modern-search-form {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }
            
            .search-field {
                min-width: auto;
                max-width: none;
            }
            
            .modern-search-btn {
                max-width: 200px;
                min-width: 160px;
                justify-content: center;
                align-self: center;
                margin: 0 auto;
            }

            .form-button {
                min-width: 100px;
                max-width: 180px;
                margin: 8px;
            }

            .hotel-btn {
                min-width: 120px;
                max-width: 140px;
                font-size: 0.8rem;
                padding: 10px 15px;
            }
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        /* Modal de resumen de cotizaci√≥n con z-index m√°s alto */
        #quoteSummaryModal {
            z-index: 1007 !important;
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #666;
        }

        .close:hover {
            color: #000;
        }

        .dropdown-arrow {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            transition: transform 0.3s ease;
        }

        .date-display-modern, .travelers-display {
            position: relative;
            cursor: pointer;
        }

        /* Estilos para el calendario */
        .calendar-modal {
            max-width: 900px;
            width: 95%;
            max-height: 600px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .calendar-nav {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            color: #667eea;
        }

        .calendar-nav:hover {
            color: #764ba2;
        }
        
        .calendar-nav[onclick="previousMonth()"],
        .calendar-nav[onclick="nextMonth()"] {
            background: #667eea !important;
            color: white !important;
            border-radius: 50% !important;
            width: 35px !important;
            height: 35px !important;
            font-size: 1.2rem !important;
            font-weight: bold !important;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3) !important;
            transition: all 0.3s ease !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }
        
        .calendar-nav[onclick="previousMonth()"]:hover,
        .calendar-nav[onclick="nextMonth()"]:hover {
            background: #5a6fd8 !important;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4) !important;
            transform: scale(1.05) !important;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 3px;
            min-height: 200px;
        }

        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 3px;
            margin-bottom: 8px;
        }

        .weekdays > div {
            text-align: center;
            font-weight: 600;
            color: #666;
            padding: 6px;
            font-size: 0.9rem;
            min-height: 16px;
        }

        .calendar-day {
            text-align: center;
            padding: 6px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
            min-height: 16px;
            font-size: 0.9rem;
        }

        .calendar-day:hover {
            background: #f0f0f0;
        }

        .calendar-day.selected {
            background: #667eea;
            color: white;
        }

        .calendar-day.in-range {
            background: #e3f2fd;
            color: #1976d2;
        }

        .calendar-day.disabled {
            color: #ccc;
            cursor: not-allowed;
        }

        /* Estilos para el modal de hu√©spedes */
        .travelers-modal {
            max-width: 400px;
            width: 90%;
            max-height: 500px;
            z-index: 1002;
        }

        /* Estilos para botones de redes sociales */
        .social-login-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            color: #333;
        }

        .social-login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .google-btn:hover {
            border-color: #4285f4;
            color: #4285f4;
        }

        .facebook-btn:hover {
            border-color: #1877f2;
            color: #1877f2;
        }

        .travelers-section {
            margin-bottom: 20px;
        }

        .travelers-section h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .traveler-counter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .counter-btn {
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .counter-btn:hover {
            background: #764ba2;
        }

        .counter-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .children-ages {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .age-input {
            width: 60px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-left: 10px;
        }

        /* Estilos para el modal de resumen */
        .quote-summary-modal {
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 1003;
        }

        .summary-content {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .summary-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .form-button {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            min-width: 120px;
            max-width: 200px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            margin: 5px;
        }

        .form-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .modal-actions {
            text-align: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
        }

        /* Estilos para tarjetas de informaci√≥n */
        .info-cards-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            height: 100%;
        }

        .info-card {
            flex: 1;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            max-width: 280px;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .card-top {
            flex: 1;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .card-bottom {
            padding: 12px 15px;
            text-align: center;
        }

        .card-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .card-subtitle {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .card-number {
            font-size: 1.6rem;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .card-level {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .card-description {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* Colores espec√≠ficos para cada tarjeta */
        .profile-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .profile-card .card-bottom {
            background: rgba(255,255,255,0.1);
        }

        .promotions-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .promotions-card .card-bottom {
            background: rgba(255,255,255,0.1);
        }

        .rewards-card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
        }

        .rewards-card .card-bottom {
            background: rgba(0,0,0,0.05);
        }

        /* Estilos espec√≠ficos para las tarjetas de hoteles */
        .hotel-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 200px; /* Mismo tama√±o que las tarjetas de informaci√≥n */
        }

        .hotel-card .card-bottom {
            background: rgba(255,255,255,0.1);
        }

        .hotel-card:nth-child(2) {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .hotel-card:nth-child(3) {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
        }

        .hotel-card:nth-child(3) .card-bottom {
            background: rgba(0,0,0,0.05);
        }

        .hotel-card:nth-child(4) {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #333;
        }

        .hotel-card:nth-child(4) .card-bottom {
            background: rgba(0,0,0,0.05);
        }

        .hotel-card:nth-child(5) {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: #333;
        }

        .hotel-card:nth-child(5) .card-bottom {
            background: rgba(0,0,0,0.05);
        }

        /* Estilos para las tarjetas blancas de hoteles - LAYOUT DE 2 COLUMNAS */
        .hotels-grid-container {
            display: grid !important;
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 20px !important;
            margin-bottom: 30px !important;
            width: 100% !important;
        }

        /* NUEVOS ESTILOS PARA LA SECCI√ìN DE HOTELES */
        .hotel-card-new {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.5);
            min-height: 200px; /* Mismo tama√±o que las tarjetas originales */
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .hotel-image-container {
            position: relative;
            height: 100px; /* Altura reducida para mantener proporci√≥n */
            overflow: hidden;
        }

        .hotel-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .hotel-card-new:hover .hotel-image {
            transform: scale(1.05);
        }

        .hotel-card-new:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
            border-color: #667eea;
        }

        .hotel-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .hotel-icon-new {
            font-size: 3rem;
            min-width: 60px;
            text-align: center;
        }

        .hotel-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 2;
        }

        .hotel-card-body {
            flex: 1;
            margin-bottom: 15px;
            padding: 15px 15px 0 15px;
        }

        .hotel-card-body h3 {
            margin: 0 0 8px 0;
            font-size: 1.1rem;
            color: #333;
            font-weight: 700;
        }

        .hotel-card-body p {
            margin: 0 0 10px 0;
            font-size: 0.85rem;
            color: #666;
            line-height: 1.3;
        }

        .hotel-features {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .hotel-features span {
            background: #f8f9fa;
            color: #555;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            border: 1px solid #e9ecef;
        }

        .hotel-card-footer {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0 25px 25px 25px;
        }

        .hotel-price-new {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .hotel-note-new {
            font-size: 0.85rem;
            color: #999;
        }

        .hotel-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            min-width: 140px;
            max-width: 160px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.2);
        }

        .hotel-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        /* Estilos para el bot√≥n de detalles */
        .hotel-details-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 8px;
        }
        
        .hotel-details-btn:hover {
            background: linear-gradient(135deg, #218838 0%, #1ea085 100%);
            transform: translateY(-2px);
        }

        /* Responsive para las nuevas tarjetas */
        @media (max-width: 768px) {
            .hotel-card-new {
                min-height: 280px;
                margin-bottom: 15px;
                border-radius: 12px;
            }
            
            .hotel-card-new .hotel-image-container {
                height: 120px;
            }
            
            .hotel-card-new .hotel-card-body {
                padding: 12px 12px 0 12px;
            }
            
            .hotel-card-new .hotel-card-body h3 {
                font-size: 1rem;
                margin-bottom: 6px;
            }
            
            .hotel-card-new .hotel-card-body p {
                font-size: 0.8rem;
                margin-bottom: 8px;
            }
            
            .hotel-card-new .hotel-features {
                gap: 6px;
                margin-bottom: 8px;
            }
            
            .hotel-card-new .hotel-features span {
                font-size: 0.65rem;
                padding: 3px 6px;
            }
            
            .hotel-card-new .hotel-airport-info,
            .hotel-card-new .hotel-border-info {
                padding: 6px;
                font-size: 0.7rem;
                margin-top: 6px;
            }
            
            .hotel-card-new .hotel-card-footer {
                padding: 12px;
                gap: 8px;
            }
            
            .hotel-card-new .hotel-btn {
                font-size: 0.8rem;
                padding: 8px 10px;
                min-height: 36px;
            }
            
            .hotel-card-new .hotel-btn .material-icons {
                font-size: 14px;
            }
            
            .hotel-badge {
                font-size: 0.6rem;
                padding: 4px 8px;
                top: 8px;
                left: 8px;
            }
        }
        
        /* Responsive para tel√©fonos peque√±os */
        @media (max-width: 480px) {
            .hotel-card-new {
                min-height: 240px;
                margin-bottom: 12px;
                border-radius: 10px;
            }
            
            .hotel-card-new .hotel-image-container {
                height: 100px;
            }
            
            .hotel-card-new .hotel-card-body {
                padding: 10px 10px 0 10px;
            }
            
            .hotel-card-new .hotel-card-body h3 {
                font-size: 0.9rem;
                margin-bottom: 4px;
            }
            
            .hotel-card-new .hotel-card-body p {
                font-size: 0.75rem;
                margin-bottom: 6px;
            }
            
            .hotel-card-new .hotel-features {
                gap: 4px;
                margin-bottom: 6px;
            }
            
            .hotel-card-new .hotel-features span {
                font-size: 0.6rem;
                padding: 2px 5px;
            }
            
            .hotel-card-new .hotel-airport-info,
            .hotel-card-new .hotel-border-info {
                padding: 5px;
                font-size: 0.65rem;
                margin-top: 5px;
            }
            
            .hotel-card-new .hotel-card-footer {
                padding: 10px;
                gap: 6px;
            }
            
            .hotel-card-new .hotel-btn {
                font-size: 0.75rem;
                padding: 6px 8px;
                min-height: 32px;
            }
            
            .hotel-card-new .hotel-btn .material-icons {
                font-size: 12px;
            }
            
            .hotel-badge {
                font-size: 0.55rem;
                padding: 3px 6px;
                top: 6px;
                left: 6px;
            }
        }

        .hotel-card-content {
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            height: 100%;
        }

        .hotel-icon {
            font-size: 2.5rem;
            min-width: 60px;
            text-align: center;
        }

        .hotel-info {
            flex: 1;
        }

        .hotel-info h3 {
            margin: 0 0 5px 0;
            font-size: 1.1rem;
            color: #333;
            font-weight: 600;
        }

        .hotel-info p {
            margin: 0 0 10px 0;
            font-size: 0.9rem;
            color: #666;
        }

        .hotel-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .hotel-note {
            font-size: 0.8rem;
            color: #999;
        }

        /* Responsive para las tarjetas de hoteles */
        @media (max-width: 800px) {
            .hotels-grid-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
        
        @media (max-width: 768px) {
            .hotels-grid-container {
                grid-template-columns: 1fr;
                gap: 12px;
                padding: 0 10px;
            }
        }
        
        @media (max-width: 480px) {
            .hotels-grid-container {
                grid-template-columns: 1fr;
                gap: 10px;
                padding: 0 8px;
            }
        }

        /* Asegurar que el contenedor de hoteles tenga el mismo layout */
        .info-cards-container {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap; /* Para que se adapte en pantallas peque√±as */
        }

        .info-cards-container .info-card {
            flex: 1;
            min-width: 200px; /* Tama√±o m√≠nimo para mantener proporciones */
        }



        /* Estilos para el sidebar del men√∫ hamburguesa */
        .sidebar-menu {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            z-index: 2000;
            transition: right 0.3s ease;
            box-shadow: -5px 0 15px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
        }

        .sidebar-menu.active {
            right: 0;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .sidebar-header h3 {
            margin: 0;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .search-icon {
            width: 40px;
            height: 40px;
            background: #ffd700;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .sidebar-content {
            flex: 1;
            padding: 20px 0;
            overflow-y: auto;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .menu-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }

        .menu-icon {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.2rem;
        }

        .menu-item span {
            font-size: 1rem;
            font-weight: 500;
        }

        /* Overlay para cerrar el men√∫ */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1999;
            display: none;
        }

        .sidebar-overlay.active {
            display: block;
        }

        /* Estilos para el carrusel del modal de promociones */
        .modal-carousel {
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            margin-bottom: 20px;
            width: 100%;
        }

        .modal-carousel-container {
            display: flex;
            transition: transform 0.5s ease;
            width: 100%;
            margin-left: -15px;
        }

        .modal-carousel-slide {
            min-width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px 20px 20px 10px;
        }

        .modal-carousel-slide:nth-child(1) {
            transform: translateX(-10px);
        }

        .modal-carousel-slide:nth-child(2) {
            transform: translateX(-20px);
        }

        .modal-carousel-slide:nth-child(3) {
            transform: translateX(-30px);
        }

        .modal-carousel-slide:nth-child(4) {
            transform: translateX(-40px);
        }

        .modal-carousel-slide:nth-child(5) {
            transform: translateX(-50px);
        }

        .modal-promotion-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            height: 500px;
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 500px;
        }

        .modal-promotion-image {
            height: 55%;
            overflow: hidden;
            position: relative;
        }

        .modal-promotion-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        .modal-promotion-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #ff6b6b;
            color: white;
            padding: 8px 15px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1rem;
            z-index: 10;
        }

        .modal-promotion-content {
            padding: 20px;
            height: 45%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .modal-promotion-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 15px;
        }

        .modal-promotion-content h4 {
            margin: 0 0 10px 0;
            font-size: 1.3rem;
            color: #333;
            font-weight: 600;
        }

        .modal-promotion-content p {
            margin: 0 0 15px 0;
            font-size: 0.95rem;
            color: #666;
            line-height: 1.4;
        }

        .modal-promotion-info {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.85rem;
            color: #666;
        }

        .modal-promotion-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .modal-promotion-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .modal-carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.9);
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .modal-carousel-btn:hover {
            background: white;
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .modal-carousel-btn.prev {
            left: 20px;
        }

        .modal-carousel-btn.next {
            right: 20px;
        }

        .modal-carousel-dots {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
            width: 100%;
            max-width: 600px;
        }

        .modal-carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-carousel-dot.active {
            background: #667eea;
            transform: scale(1.2);
        }

    </style>
</head>
<body>
    <div class="header">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <div>
                <div style="display: flex; align-items: center; gap: 15px;">
                    <img src="logo.png" alt="Checkin24hs Logo" style="width: 80px; height: 80px; object-fit: contain;">
                    <div>
                        <h1 style="margin: 0; color: #333;">Checkin24hs</h1>
                        <p style="margin: 5px 0 0 0; color: #666;">Est√°s a un CHECKIN de tu pr√≥xima reserva</p>
                    </div>
                </div>
            </div>
            <div class="header-buttons" style="display: flex; align-items: center; gap: 10px;">
                <button onclick="showLoginModal()" class="form-button" style="background: #667eea; color: white; padding: 8px 15px; font-size: 0.9rem;">
                    üîê Iniciar Sesi√≥n
                </button>
                <button onclick="showRegisterModal()" class="form-button" style="background: #28a745; color: white; padding: 8px 15px; font-size: 0.9rem;">
                    üìù Registrarse
                </button>
                <div class="hamburger-menu" onclick="toggleHamburgerMenu()" style="cursor: pointer; font-size: 1.5rem; margin-left: 10px;">
                    ‚ò∞
                </div>
            </div>
        </div>

        
        <!-- Men√∫ hamburguesa -->
        <div id="hamburgerMenu" class="sidebar-menu">
            <div class="sidebar-header">
                <h3>Menu Principal</h3>
                <div class="search-icon">üîç</div>
            </div>
            <div class="sidebar-content">
                <div class="menu-item" onclick="showProfileModal()">
                    <div class="menu-icon">üè®</div>
                    <span>Reservar Hotel</span>
                </div>
                <div class="menu-item" onclick="showRewardsModal()">
                    <div class="menu-icon">‚≠ê</div>
                    <span>My Rewards</span>
                </div>
                <div class="menu-item" onclick="showRewardsInfo()">
                    <div class="menu-icon">‚ùì</div>
                    <span>¬øQu√© es My Rewards?</span>
                </div>
                <div class="menu-item" onclick="showHistory()">
                    <div class="menu-icon">üïí</div>
                    <span>Historial</span>
                </div>
                                        <div class="menu-item" onclick="showSettings()">
                            <div class="menu-icon">‚öôÔ∏è</div>
                            <span>Configuraci√≥n</span>
                        </div>


                        <div class="menu-item" onclick="logout()">
                            <div class="menu-icon">üö™</div>
                            <span>Cerrar Sesi√≥n</span>
                        </div>
            </div>
        </div>

        <!-- Overlay para cerrar el men√∫ -->
        <div id="sidebarOverlay" class="sidebar-overlay" onclick="toggleHamburgerMenu()"></div>
    </div>

    <div class="content">


        <!-- Secci√≥n de Informaci√≥n del Usuario -->
        <div class="section">
            <div class="info-cards-container">
                <!-- Tarjeta Reservar -->
                <div class="info-card profile-card" onclick="showProfileModal()">
                    <div class="card-top">
                        <div class="card-icon">üè®</div>
                        <div class="card-title">Reservar</div>
                        <div class="card-subtitle">Hoteles</div>
                    </div>
                    <div class="card-bottom">
                        <div class="card-number" id="destinosCount">5</div>
                        <div class="card-description">Destinos Disponibles</div>
                    </div>
                </div>

                <!-- Tarjeta Promociones -->
                <div class="info-card promotions-card" onclick="showPromotionsModal()">
                    <div class="card-top">
                        <div class="card-icon">üéÅ</div>
                        <div class="card-title">Promociones</div>
                        <div class="card-subtitle">Descuentos especiales</div>
                    </div>
                    <div class="card-bottom">
                        <div class="card-number">3</div>
                        <div class="card-description">Ofertas Activas</div>
                    </div>
                </div>

                <!-- Tarjeta My Rewards -->
                <div class="info-card rewards-card" onclick="showRewardsModal()">
                    <div class="card-top">
                        <div class="card-icon">‚≠ê</div>
                        <div class="card-title">My Rewards</div>
                        <div class="card-subtitle">Tus beneficios</div>
                    </div>
                    <div class="card-bottom">
                        <div class="card-level">Nivel Oro</div>
                        <div class="card-description">Membres√≠a Premium</div>
                    </div>
                </div>
            </div>
        </div>


    </div>

    <!-- Modal del Calendario -->
    <div id="calendarModal" class="modal">
                        <div class="modal-content calendar-modal" style="z-index: 1004; max-width: 700px; max-height: 500px; overflow: hidden;">
            <span class="close" onclick="closeCalendar()">&times;</span>
            <div style="display: flex; gap: 20px; height: 100%;">
                <!-- Primer mes -->
                <div style="flex: 1; display: flex; flex-direction: column;">
                    <div class="calendar-header" style="margin-bottom: 10px;">
                        <button class="calendar-nav" onclick="previousMonth()" style="background: #667eea; color: white; border-radius: 50%; width: 35px; height: 35px; font-size: 1.2rem; font-weight: bold; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3); transition: all 0.3s ease;">‚Äπ</button>
                        <h2 id="currentMonth" style="margin: 0; font-size: 1.2rem;">Enero 2025</h2>
                    </div>
                    <div class="weekdays" style="margin-bottom: 5px;">
                        <div>Dom</div>
                        <div>Lun</div>
                        <div>Mar</div>
                        <div>Mi√©</div>
                        <div>Jue</div>
                        <div>Vie</div>
                        <div>S√°b</div>
                    </div>
                    <div id="calendarDays" class="calendar-grid" style="flex: 1; min-height: 0;">
                        <!-- Los d√≠as se generan din√°micamente -->
                    </div>
                </div>
                
                <!-- Segundo mes -->
                <div style="flex: 1; display: flex; flex-direction: column;">
                    <div class="calendar-header" style="margin-bottom: 10px;">
                        <h2 id="currentMonth2" style="margin: 0; font-size: 1.2rem;">Febrero 2025</h2>
                        <button class="calendar-nav" onclick="nextMonth()" style="background: #667eea; color: white; border-radius: 50%; width: 35px; height: 35px; font-size: 1.2rem; font-weight: bold; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3); transition: all 0.3s ease;">‚Ä∫</button>
                    </div>
                    <div class="weekdays" style="margin-bottom: 5px;">
                        <div>Dom</div>
                        <div>Lun</div>
                        <div>Mar</div>
                        <div>Mi√©</div>
                        <div>Jue</div>
                        <div>Vie</div>
                        <div>S√°b</div>
                    </div>
                    <div id="calendarDays2" class="calendar-grid" style="flex: 1; min-height: 0;">
                        <!-- Los d√≠as del segundo mes se generan din√°micamente -->
                    </div>
                </div>
            </div>
            <div class="modal-actions" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee;">
                <button onclick="aplicarFechas()" class="form-button" style="background: #667eea; color: white; margin-right: 10px;">
                    ‚úÖ Aplicar Fechas
                </button>
                <button onclick="closeCalendar()" class="form-button" style="background: #6c757d; color: white;">
                    ‚ùå Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Hu√©spedes -->
    <div id="travelersModal" class="modal">
                        <div class="modal-content travelers-modal" style="z-index: 1005; max-width: 400px;">
            <span class="close" onclick="closeTravelersModal()">&times;</span>
            
            <div style="text-align: center; margin-bottom: 30px;">
                <div style="font-size: 3rem; margin-bottom: 10px;">üë•</div>
                <h2 style="color: #333; margin-bottom: 5px;">Seleccionar Hu√©spedes</h2>
                <p style="color: #666; font-size: 0.9rem;">Ajusta el n√∫mero de adultos y ni√±os</p>
            </div>
            
            <div style="background: #f8f9fa; border-radius: 12px; padding: 25px; margin-bottom: 20px;">
                <!-- Adultos -->
                <div style="margin-bottom: 25px;">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.5rem;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                            <div>
                                <div style="font-weight: 600; color: #333; font-size: 1.1rem;">Adultos</div>
                                <div style="color: #666; font-size: 0.9rem;">Mayores de 18 a√±os</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <button onclick="changeAdults(-1)" id="adultsMinus" style="width: 40px; height: 40px; border-radius: 50%; border: 2px solid #667eea; background: white; color: #667eea; font-size: 1.2rem; cursor: pointer; transition: all 0.3s ease;">-</button>
                            <span id="adultsCount" style="font-size: 1.5rem; font-weight: 600; color: #333; min-width: 30px; text-align: center;">2</span>
                            <button onclick="changeAdults(1)" id="adultsPlus" style="width: 40px; height: 40px; border-radius: 50%; border: 2px solid #667eea; background: #667eea; color: white; font-size: 1.2rem; cursor: pointer; transition: all 0.3s ease;">+</button>
                        </div>
                    </div>
                </div>
                
                <!-- Ni√±os -->
                <div style="margin-bottom: 25px;">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.5rem;">üë∂</span>
                            <div>
                                <div style="font-weight: 600; color: #333; font-size: 1.1rem;">Ni√±os</div>
                                <div style="color: #666; font-size: 0.9rem;">Menores de 18 a√±os</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <button onclick="changeChildren(-1)" id="childrenMinus" style="width: 40px; height: 40px; border-radius: 50%; border: 2px solid #667eea; background: white; color: #667eea; font-size: 1.2rem; cursor: pointer; transition: all 0.3s ease;">-</button>
                            <span id="childrenCount" style="font-size: 1.5rem; font-weight: 600; color: #333; min-width: 30px; text-align: center;">0</span>
                            <button onclick="changeChildren(1)" id="childrenPlus" style="width: 40px; height: 40px; border-radius: 50%; border: 2px solid #667eea; background: #667eea; color: white; font-size: 1.2rem; cursor: pointer; transition: all 0.3s ease;">+</button>
                        </div>
                    </div>
                    
                    <!-- Edades de ni√±os -->
                    <div id="childrenAgesInputs" class="children-ages" style="display: none; margin-top: 20px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                        <h4 style="margin-bottom: 15px; color: #333;">Edades de los ni√±os</h4>
                        <div id="childrenAgesContainer" style="display: grid; gap: 10px;">
                            <!-- Las edades se generan din√°micamente -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="display: flex; gap: 15px;">
                <button onclick="closeTravelersModal()" class="form-button" style="flex: 1; background: #6c757d; color: white; padding: 12px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600;">
                    ‚ùå Cancelar
                </button>
                <button onclick="aplicarHuespedes()" class="form-button" style="flex: 1; background: #667eea; color: white; padding: 12px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600;">
                    ‚úÖ Aplicar Hu√©spedes
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Resumen de Cotizaci√≥n -->
    <div id="quoteSummaryModal" class="modal">
        <div class="modal-content quote-summary-modal">
            <span class="close" onclick="closeQuoteSummary()">&times;</span>
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="font-size: 3rem; margin-bottom: 10px;">üìã</div>
                <h2 style="color: #333; margin-bottom: 5px;">Resumen de Cotizaci√≥n</h2>
                <p style="color: #666; font-size: 0.9rem;">Revisa los datos antes de enviar</p>
            </div>
            <div id="quoteSummaryContent" class="summary-content">
                <!-- El contenido se genera din√°micamente -->
            </div>
            <div class="summary-actions">
                <button onclick="closeQuoteSummary()" class="form-button" style="background: #6c757d; color: white;">
                    ‚úèÔ∏è Editar
                </button>
                <button onclick="agregarOtraCotizacion()" class="form-button" style="background: #17a2b8; color: white;">
                    ‚ûï Agregar Otra Cotizaci√≥n
                </button>
                <button onclick="enviarWhatsApp()" class="form-button" style="background: #25d366; color: white;">
                    üì± Enviar a WhatsApp
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Reservas -->
    <div id="reservationModal" class="modal">
                        <div class="modal-content" style="max-width: 600px; margin: 3% auto; padding: 20px;">
            <span class="close" onclick="closeReservationModal()">&times;</span>
                          <div style="text-align: center; margin-bottom: 15px;">
                <img src="logo.png" alt="Checkin24hs Logo" style="width: 50px; height: 50px; object-fit: contain; margin-bottom: 10px;">
                <h2 style="color: #333; margin-bottom: 3px; font-size: 1.6rem;">Cotiza tu Hotel</h2>
                <p style="color: #666; font-size: 0.8rem; margin: 0;">Completa los datos para solicitar tu cotizaci√≥n</p>
            </div>
            
            <div style="background: #f8f9fa; border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                <form style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: end; grid-template-rows: 1fr 1fr;">
                    <!-- Destino -->
                    <div style="display: flex; flex-direction: column; gap: 6px; width: 100%;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 1.2rem;">üìç</span>
                            <label style="font-size: 0.85rem; color: #333; font-weight: 500;">¬øA d√≥nde quieres ir?</label>
                        </div>
                        <div style="padding: 10px 12px; font-size: 0.9rem; border: 1px solid #ddd; border-radius: 8px; background: white; width: 100%; height: 42px; display: flex; justify-content: space-between; align-items: center; cursor: pointer;" onclick="toggleHotelSelect()">
                            <span id="modalHotelSelectDisplay">Seleccionar destino</span>
                            <span style="font-size: 0.8rem;">‚ñº</span>
                        </div>
                        <select id="modalHotelSelect" required style="display: none;">
                            <option value="">Seleccionar destino</option>
                            <option value="Hotel Terma de Puyehue">üè® Hotel Terma de Puyehue</option>
                            <option value="Hotel Huilo-Huilo">üè® Hotel Huilo-Huilo</option>
                            <option value="Hotel Corralco Resort">üè® Hotel Corralco Resort</option>
                            <option value="Hotel Futangue">üè® Hotel Futangue</option>
                            <option value="Caba√±as Termas de Aguas Calientes">üè° Caba√±as Termas de Aguas Calientes</option>
                        </select>
                    </div>
                    
                    <!-- Fechas -->
                    <div style="display: flex; flex-direction: column; gap: 6px; width: 100%;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 1.2rem;">üìÖ</span>
                            <label style="font-size: 0.85rem; color: #333; font-weight: 500;">Llegada ‚Üí Salida</label>
                        </div>
                        <div class="date-display-modern" onclick="toggleCalendar()" style="padding: 10px 12px; font-size: 0.9rem; border: 1px solid #ddd; border-radius: 8px; background: white; cursor: pointer; display: flex; justify-content: space-between; align-items: center; width: 100%; height: 42px;">
                            <span id="modalDateRangeDisplay">Seleccionar fechas</span>
                            <span class="dropdown-arrow">‚ñº</span>
                        </div>
                        <input type="hidden" id="modalCheckIn" required>
                        <input type="hidden" id="modalCheckOut" required>
                    </div>
                    
                    <!-- Hu√©spedes -->
                    <div style="display: flex; flex-direction: column; gap: 6px; width: 100%;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 1.2rem;">üë•</span>
                            <label style="font-size: 0.85rem; color: #333; font-weight: 500;">Hu√©spedes</label>
                        </div>
                        <div class="travelers-display" onclick="toggleTravelersModal()" style="padding: 10px 12px; font-size: 0.9rem; border: 1px solid #ddd; border-radius: 8px; background: white; cursor: pointer; display: flex; justify-content: space-between; align-items: center; width: 100%; height: 42px;">
                            <span id="modalTravelersDisplay">2 adultos ‚Ä¢ 0 ni√±os</span>
                            <span class="dropdown-arrow">‚ñº</span>
                        </div>
                    </div>
                    
                    <!-- Botones de cotizaci√≥n -->
                    <div style="display: flex; flex-direction: column; gap: 6px;">
                        <div style="height: 20px;"></div>
                        <button type="button" onclick="solicitarCotizacion()" style="padding: 15px 25px; font-size: 1rem; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; height: 50px; width: 180px; margin: 0 auto; display: flex; align-items: center; justify-content: center; text-align: center; box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4), 0 4px 10px rgba(0, 0, 0, 0.1); transform: translateY(0);" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 35px rgba(102, 126, 234, 0.5), 0 6px 15px rgba(0, 0, 0, 0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 25px rgba(102, 126, 234, 0.4), 0 4px 10px rgba(0, 0, 0, 0.1)'" onmousedown="this.style.transform='translateY(1px)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.3), 0 2px 5px rgba(0, 0, 0, 0.1)'" onmouseup="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 35px rgba(102, 126, 234, 0.5), 0 6px 15px rgba(0, 0, 0, 0.15)'">
                            Solicitar Cotizaci√≥n
                        </button>
                        
                        <!-- Bot√≥n para enviar cotizaciones actuales (solo visible si hay cotizaciones) -->
                        <div id="enviarCotizacionesBtn" style="display: none; margin-top: 10px;">
                            <button type="button" onclick="enviarCotizacionesActuales()" style="padding: 10px 20px; font-size: 0.9rem; background: linear-gradient(135deg, #28a745, #20c997); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500; transition: all 0.3s ease; width: 180px; margin: 0 auto; display: flex; align-items: center; justify-content: center; text-align: center; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(40, 167, 69, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(40, 167, 69, 0.3)'">
                                üì§ Enviar Cotizaciones Actuales
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>



    <!-- Modal de Login -->
    <div id="loginModal" class="modal">
                        <div class="modal-content" style="max-width: 350px;">
            <span class="close" onclick="closeLoginModal()">&times;</span>
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="font-size: 3rem; margin-bottom: 10px;">üîê</div>
                <h2 style="color: #333; margin-bottom: 5px;">Iniciar Sesi√≥n</h2>
            </div>
            
            <form onsubmit="loginUser(event)" autocomplete="on">
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; color: #333;">Email:</label>
                    <input type="email" id="loginEmail" name="email" required autocomplete="email" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; color: #333;">Contrase√±a:</label>
                    <input type="password" id="loginPassword" name="password" required autocomplete="current-password" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                </div>
                <button type="submit" class="form-button" style="width: 100%; background: #667eea; color: white;">
                    üîê Iniciar Sesi√≥n
                </button>
            </form>
            
            <div style="text-align: center; margin-top: 20px;">
                <p style="color: #666; font-size: 0.9rem;">O inicia sesi√≥n con:</p>
                <div style="display: flex; gap: 10px; justify-content: center; margin-top: 10px;">
                    <button onclick="loginWithGoogle()" class="form-button" style="background: #db4437; color: white;">
                        üåê Google
                    </button>
                    <button onclick="loginWithFacebook()" class="form-button" style="background: #4267B2; color: white;">
                        üìò Facebook
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Registro -->
    <div id="registerModal" class="modal">
                        <div class="modal-content" style="max-width: 380px; margin: 1% auto;">
            <span class="close" onclick="closeRegisterModal()">&times;</span>
            
            <!-- Header del modal -->
            <div style="text-align: center; margin-bottom: 30px;">
                <div style="font-size: 3.5rem; margin-bottom: 15px;">üéâ</div>
                <h2 style="color: #333; margin-bottom: 8px; font-size: 1.8rem;">Crear Cuenta</h2>
                <p style="color: #666; font-size: 0.95rem;">√önete a Checkin24hs y descubre incre√≠bles ofertas</p>
                
                <!-- Mensaje sobre My Rewards -->
                <div style="background: linear-gradient(135deg, #ffd700, #ffed4e); padding: 15px; border-radius: 10px; margin-top: 15px; border: 2px solid #ffc107;">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 5px;">
                        <span style="font-size: 1.2rem;">‚≠ê</span>
                        <span style="font-weight: 600; color: #8b4513; font-size: 0.95rem;">¬°Reg√≠strate y obt√©n los beneficios de My Rewards!</span>
                    </div>
                    <p style="color: #8b4513; font-size: 0.85rem; margin: 0; line-height: 1.3;">
                        ‚Ä¢ Puntos por cada reserva ‚Ä¢ Descuentos exclusivos ‚Ä¢ Upgrades de habitaci√≥n ‚Ä¢ Beneficios premium
                    </p>
                </div>
            </div>
            
            <!-- Botones de redes sociales -->
            <div style="margin-bottom: 25px; display: flex; flex-direction: column; align-items: center;">
                <button type="button" onclick="loginWithGoogle()" class="social-login-btn google-btn" style="width: 80%; margin-bottom: 10px; max-width: 280px;">
                    <span style="font-size: 1.2rem; margin-right: 10px;">üîç</span>
                    Continuar con Google
                </button>
                <button type="button" onclick="loginWithFacebook()" class="social-login-btn facebook-btn" style="width: 80%; max-width: 280px;">
                    <span style="font-size: 1.2rem; margin-right: 10px;">üìò</span>
                    Continuar con Facebook
                </button>
            </div>
            
            <!-- Separador -->
            <div style="text-align: center; margin: 25px 0; position: relative;">
                <div style="height: 1px; background: #e0e0e0; width: 100%;"></div>
                <span style="background: white; padding: 0 15px; color: #666; font-size: 0.9rem; position: absolute; top: -8px; left: 50%; transform: translateX(-50%);">o reg√≠strate con email</span>
            </div>
            
            <!-- Formulario de registro -->
            <form onsubmit="registerUser(event)" autocomplete="on">
                <div style="margin-bottom: 18px;">
                    <label style="display: block; margin-bottom: 8px; color: #333; font-weight: 600; font-size: 0.95rem;">Nombre completo:</label>
                    <input type="text" id="registerName" name="name" required placeholder="Ingresa tu nombre completo" autocomplete="given-name family-name" style="width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;">
                </div>
                
                <div style="margin-bottom: 18px;">
                    <label style="display: block; margin-bottom: 8px; color: #333; font-weight: 600; font-size: 0.95rem;">Email:</label>
                    <input type="email" id="registerEmail" name="email" required placeholder="tu@email.com" autocomplete="email" style="width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;">
                </div>
                
                <div style="margin-bottom: 18px;">
                    <label style="display: block; margin-bottom: 8px; color: #333; font-weight: 600; font-size: 0.95rem;">Tel√©fono:</label>
                    <input type="tel" id="registerPhone" name="phone" required placeholder="+56 9 1234 5678" autocomplete="tel" style="width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;">
                </div>
                
                <div style="margin-bottom: 18px;">
                    <label style="display: block; margin-bottom: 8px; color: #333; font-weight: 600; font-size: 0.95rem;">Fecha de nacimiento:</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="registerDay" name="bday-day" required placeholder="D√≠a" min="1" max="31" autocomplete="bday-day" style="flex: 1; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;">
                        <input type="number" id="registerMonth" name="bday-month" required placeholder="Mes" min="1" max="12" autocomplete="bday-month" style="flex: 1; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;">
                    </div>
                </div>
                
                <div style="margin-bottom: 18px;">
                    <label style="display: block; margin-bottom: 8px; color: #333; font-weight: 600; font-size: 0.95rem;">Contrase√±a:</label>
                    <div style="position: relative;">
                        <input type="password" id="registerPassword" name="password" required placeholder="M√≠nimo 6 caracteres" autocomplete="new-password" style="width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;">
                        <button type="button" onclick="suggestPassword()" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #667eea; cursor: pointer; font-size: 0.9rem;">üí° Sugerir</button>
                    </div>
                    <div id="passwordStrength" style="margin-top: 5px; font-size: 0.85rem;"></div>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <label style="display: block; margin-bottom: 8px; color: #333; font-weight: 600; font-size: 0.95rem;">Confirmar contrase√±a:</label>
                    <div style="position: relative;">
                        <input type="password" id="registerPasswordConfirm" name="password-confirm" required placeholder="Repite tu contrase√±a" autocomplete="new-password" style="width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;">
                        <button type="button" onclick="togglePasswordVisibility('registerPasswordConfirm')" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #667eea; cursor: pointer; font-size: 1.1rem;">üëÅÔ∏è</button>
                    </div>
                    <div id="passwordMatch" style="margin-top: 5px; font-size: 0.85rem;"></div>
                </div>
                
                <div style="display: flex; justify-content: center; margin-top: 10px;">
                    <button type="submit" class="form-button" style="width: 80%; max-width: 280px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 15px; border-radius: 8px; font-size: 1.1rem; font-weight: 600; border: none; cursor: pointer; transition: all 0.3s ease;">
                        Crear Cuenta
                    </button>
                </div>
            </form>
            
            <!-- Footer del modal -->
            <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                <p style="color: #666; font-size: 0.9rem;">
                    ¬øYa tienes cuenta? 
                    <a href="#" onclick="closeRegisterModal(); showLoginModal();" style="color: #667eea; text-decoration: none; font-weight: 600;">Iniciar sesi√≥n</a>
                </p>
            </div>
        </div>
    </div>

    <!-- SECCI√ìN DE HOTELES DESTACADOS -->
    <div class="section" style="background: #8B9DC3; padding: 40px 20px;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <h2 style="text-align: center; color: white; margin-bottom: 40px; font-size: 2.2rem; font-weight: 600;">üè® Nuestros Hoteles Destacados</h2>
            
            <!-- Bot√≥n para abrir mapa interactivo -->
            <div style="text-align: center; margin-bottom: 30px;">
                <button onclick="showInteractiveMap()" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 12px; padding: 15px 30px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); display: inline-flex; align-items: center; gap: 10px;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.3)'">
                    üó∫Ô∏è Ver Mapa Interactivo
                </button>
            </div>
            
            <!-- Recuadro blanco para el carrusel -->
            <div style="background: rgba(255, 255, 255, 0.95); border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3);">
                <!-- Contenedor del carrusel -->
                <div style="position: relative; overflow: hidden;">
                    <!-- Bot√≥n de navegaci√≥n izquierda -->
                    <button id="prevHotelBtn" onclick="scrollHotels('left')" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); background: rgba(102, 126, 234, 0.9); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 1.2rem; cursor: pointer; z-index: 10; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">‚Äπ</button>
                    
                    <!-- Bot√≥n de navegaci√≥n derecha -->
                    <button id="nextHotelBtn" onclick="scrollHotels('right')" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: rgba(102, 126, 234, 0.9); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 1.2rem; cursor: pointer; z-index: 10; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">‚Ä∫</button>
                    
                    <!-- Carrusel de hoteles -->
                    <div id="hotels-carousel" style="display: flex; gap: 20px; transition: transform 0.5s ease; padding: 0 50px;">
                
                <!-- Hotel Puyehue -->
                <div class="hotel-card-new">
                    <div class="hotel-image-container">
                        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop" alt="Hotel Terma de Puyehue" class="hotel-image">
                        <div class="hotel-badge">Termas</div>
                    </div>
                    <div class="hotel-card-body">
                        <h3>Hotel Terma de Puyehue</h3>
                        <p>Termas y Spa de lujo en la Patagonia</p>
                        <div class="hotel-features">
                            <span>üèä‚Äç‚ôÇÔ∏è Piscina</span>
                            <span>üßñ‚Äç‚ôÄÔ∏è Spa</span>
                        </div>
                        <div class="hotel-airport-info" style="margin-top: 10px; padding: 8px; background: #f8f9fa; border-radius: 6px; font-size: 0.85rem;">
                            <div style="display: flex; align-items: center; gap: 5px; color: #666;">
                                <span>‚úàÔ∏è</span>
                                <span>Aeropuerto El Tepual (PMC)</span>
                            </div>
                            <div style="color: #28a745; font-weight: 600; margin-top: 2px;">120 km desde Puerto Montt</div>
                        </div>
                    </div>
                    <div class="hotel-card-footer" style="display: flex; gap: 10px; justify-content: space-between;">
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); solicitarCotizacionPromocion('Hotel Terma de Puyehue')">Solicitar Cotizaci√≥n</button>
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); showHotelDetailsModal('default', 'Hotel Terma de Puyehue')">Detalles</button>
                    </div>
                </div>

                <!-- Hotel Huilo-Huilo -->
                <div class="hotel-card-new">
                    <div class="hotel-image-container">
                        <img src="https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop" alt="Hotel Huilo-Huilo" class="hotel-image">
                        <div class="hotel-badge">Bosque</div>
                    </div>
                    <div class="hotel-card-body">
                        <h3>Hotel Huilo-Huilo</h3>
                        <p>Inmersi√≥n en el bosque nativo</p>
                        <div class="hotel-features">
                            <span>üåø Naturaleza</span>
                            <span>üèÉ‚Äç‚ôÇÔ∏è Trekking</span>
                        </div>
                        <div class="hotel-airport-info" style="margin-top: 10px; padding: 8px; background: #f8f9fa; border-radius: 6px; font-size: 0.85rem;">
                            <div style="display: flex; align-items: center; gap: 5px; color: #666;">
                                <span>‚úàÔ∏è</span>
                                <span>Aeropuerto Puc√≥n (ZPC)</span>
                            </div>
                            <div style="color: #28a745; font-weight: 600; margin-top: 2px;">45 km desde Puc√≥n</div>
                        </div>
                    </div>
                    <div class="hotel-card-footer" style="display: flex; gap: 10px; justify-content: space-between;">
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); solicitarCotizacionPromocion('Hotel Huilo-Huilo')">Solicitar Cotizaci√≥n</button>
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); showHotelDetailsModal('default', 'Hotel Huilo-Huilo')">Detalles</button>
                    </div>
                </div>

                <!-- Hotel Corralco -->
                <div class="hotel-card-new">
                    <div class="hotel-image-container">
                        <img src="https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop" alt="Hotel Corralco Resort" class="hotel-image">
                        <div class="hotel-badge">Esqu√≠</div>
                    </div>
                    <div class="hotel-card-body">
                        <h3>Hotel Corralco Resort</h3>
                        <p>Esqu√≠ y aventura en la monta√±a</p>
                        <div class="hotel-features">
                            <span>‚õ∑Ô∏è Esqu√≠</span>
                            <span>üèîÔ∏è Monta√±a</span>
                        </div>
                        <div class="hotel-airport-info" style="margin-top: 10px; padding: 8px; background: #f8f9fa; border-radius: 6px; font-size: 0.85rem;">
                            <div style="display: flex; align-items: center; gap: 5px; color: #666;">
                                <span>‚úàÔ∏è</span>
                                <span>Aeropuerto La Araucan√≠a (ZCO)</span>
                            </div>
                            <div style="color: #28a745; font-weight: 600; margin-top: 2px;">65 km desde Temuco</div>
                        </div>
                    </div>
                    <div class="hotel-card-footer" style="display: flex; gap: 10px; justify-content: space-between;">
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); solicitarCotizacionPromocion('Hotel Corralco Resort')">Solicitar Cotizaci√≥n</button>
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); showHotelDetailsModal('default', 'Hotel Corralco Resort')">Detalles</button>
                    </div>
                </div>

                <!-- Hotel Futangue -->
                <div class="hotel-card-new">
                    <div class="hotel-image-container">
                        <img src="https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop" alt="Hotel Futangue" class="hotel-image">
                        <div class="hotel-badge">Lujo</div>
                    </div>
                    <div class="hotel-card-body">
                        <h3>Hotel Futangue</h3>
                        <p>Lujo y naturaleza en su m√°xima expresi√≥n</p>
                        <div class="hotel-features">
                            <span>üåü 5 Estrellas</span>
                            <span>üç∑ Vinos</span>
                        </div>
                        <div class="hotel-airport-info" style="margin-top: 10px; padding: 8px; background: #f8f9fa; border-radius: 6px; font-size: 0.85rem;">
                            <div style="display: flex; align-items: center; gap: 5px; color: #666;">
                                <span>‚úàÔ∏è</span>
                                <span>Aeropuerto El Tepual (PMC)</span>
                            </div>
                            <div style="color: #28a745; font-weight: 600; margin-top: 2px;">95 km desde Puerto Montt</div>
                        </div>
                    </div>
                    <div class="hotel-card-footer" style="display: flex; gap: 10px; justify-content: space-between;">
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); solicitarCotizacionPromocion('Hotel Futangue')">Solicitar Cotizaci√≥n</button>
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); showHotelDetailsModal('default', 'Hotel Futangue')">Detalles</button>
                    </div>
                </div>

                <!-- Hotel Termas Chill√°n -->
                <div class="hotel-card-new">
                    <div class="hotel-image-container">
                        <img src="https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop" alt="Hotel Termas Chill√°n" class="hotel-image">
                        <div class="hotel-badge">Termas</div>
                    </div>
                    <div class="hotel-card-body">
                        <h3>Hotel Termas Chill√°n</h3>
                        <p>Hotel incre√≠ble con ski y termas</p>
                        <div class="hotel-features">
                            <span>‚õ∑Ô∏è Ski</span>
                            <span>‚ô®Ô∏è Termas</span>
                        </div>
                        <div class="hotel-airport-info" style="margin-top: 10px; padding: 8px; background: #f8f9fa; border-radius: 6px; font-size: 0.85rem;">
                            <div style="display: flex; align-items: center; gap: 5px; color: #666;">
                                <span>‚úàÔ∏è</span>
                                <span>Aeropuerto Carriel Sur (CCP)</span>
                            </div>
                            <div style="color: #28a745; font-weight: 600; margin-top: 2px;">85 km desde Concepci√≥n</div>
                        </div>
                    </div>
                    <div class="hotel-card-footer" style="display: flex; gap: 10px; justify-content: space-between;">
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); solicitarCotizacionPromocion('Hotel Termas Chill√°n')">Solicitar Cotizaci√≥n</button>
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); showHotelDetailsModal('default', 'Hotel Termas Chill√°n')">Detalles</button>
                    </div>
                </div>

                <!-- Caba√±as Aguas Calientes -->
                <div class="hotel-card-new">
                    <div class="hotel-image-container">
                        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop" alt="Caba√±as Termas de Aguas Calientes" class="hotel-image">
                        <div class="hotel-badge">Caba√±as</div>
                    </div>
                    <div class="hotel-card-body">
                        <h3>Caba√±as Termas de Aguas Calientes</h3>
                        <p>Aguas Calientes - Experiencia √∫nica</p>
                        <div class="hotel-features">
                            <span>‚ô®Ô∏è Termas</span>
                            <span>üè° Caba√±as</span>
                        </div>
                        <div class="hotel-airport-info" style="margin-top: 10px; padding: 8px; background: #f8f9fa; border-radius: 6px; font-size: 0.85rem;">
                            <div style="display: flex; align-items: center; gap: 5px; color: #666;">
                                <span>‚úàÔ∏è</span>
                                <span>Aeropuerto Carriel Sur (CCP)</span>
                            </div>
                            <div style="color: #28a745; font-weight: 600; margin-top: 2px;">75 km desde Concepci√≥n</div>
                        </div>
                    </div>
                    <div class="hotel-card-footer" style="display: flex; gap: 10px; justify-content: space-between;">
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); solicitarCotizacionPromocion('Caba√±as Termas de Aguas Calientes')">Solicitar Cotizaci√≥n</button>
                        <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); showHotelDetailsModal('default', 'Caba√±as Termas de Aguas Calientes')">Detalles</button>
                    </div>
                </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let travelersData = {
            adults: 2,
            children: 0,
            childrenAges: []
        };

        let currentDate = new Date();
        let selectedStartDate = null;
        let selectedEndDate = null;
        let isSelectingStart = true;
        
        // Sistema de m√∫ltiples cotizaciones
        let cotizaciones = [];
        let currentCotizacionIndex = 0;
        
        // Base de datos de clientes
        let clientesDB = [];
        
        // Inicializar base de datos desde localStorage
        function initClientesDB() {
            const savedDB = localStorage.getItem('clientesDB');
            if (savedDB) {
                clientesDB = JSON.parse(savedDB);
                console.log('‚úÖ Base de datos de clientes cargada:', clientesDB.length, 'clientes');
            } else {
                clientesDB = [];
                console.log('üìä Nueva base de datos de clientes creada');
            }
        }
        
        // Funci√≥n para guardar cliente en la base de datos
        function guardarCliente(cliente) {
            // Generar ID √∫nico
            cliente.id = Date.now() + Math.random().toString(36).substr(2, 9);
            cliente.fechaRegistro = new Date().toISOString();
            cliente.ultimaActividad = new Date().toISOString();
            cliente.cotizaciones = [];
            
            // Agregar a la base de datos
            clientesDB.push(cliente);
            
            // Guardar en localStorage
            localStorage.setItem('clientesDB', JSON.stringify(clientesDB));
            
            console.log('‚úÖ Cliente guardado en BD:', cliente);
            return cliente.id;
        }
        
        // Funci√≥n para buscar cliente por email
        function buscarClientePorEmail(email) {
            return clientesDB.find(cliente => cliente.email === email);
        }
        
        // Funci√≥n para actualizar cliente
        function actualizarCliente(id, datosActualizados) {
            const index = clientesDB.findIndex(cliente => cliente.id === id);
            if (index !== -1) {
                clientesDB[index] = { ...clientesDB[index], ...datosActualizados };
                clientesDB[index].ultimaActividad = new Date().toISOString();
                localStorage.setItem('clientesDB', JSON.stringify(clientesDB));
                console.log('‚úÖ Cliente actualizado:', clientesDB[index]);
                return true;
            }
            return false;
        }
        
        // Funci√≥n para agregar cotizaci√≥n a cliente
        function agregarCotizacionACliente(clienteId, cotizacion) {
            const cliente = clientesDB.find(c => c.id === clienteId);
            if (cliente) {
                if (!cliente.cotizaciones) {
                    cliente.cotizaciones = [];
                }
                cotizacion.id = Date.now() + Math.random().toString(36).substr(2, 9);
                cotizacion.fecha = new Date().toISOString();
                cliente.cotizaciones.push(cotizacion);
                localStorage.setItem('clientesDB', JSON.stringify(clientesDB));
                console.log('‚úÖ Cotizaci√≥n agregada al cliente:', cotizacion);
                return true;
            }
            return false;
        }
        
        // Funci√≥n para obtener estad√≠sticas de la base de datos
        function obtenerEstadisticasDB() {
            const totalClientes = clientesDB.length;
            const totalCotizaciones = clientesDB.reduce((total, cliente) => {
                return total + (cliente.cotizaciones ? cliente.cotizaciones.length : 0);
            }, 0);
            
            return {
                totalClientes,
                totalCotizaciones,
                clientesRecientes: clientesDB.slice(-5) // √öltimos 5 clientes
            };
        }
        


        // Funci√≥n para validar email
        function validarEmail(email) {
            // Expresi√≥n regular m√°s estricta para validar email
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            
            // Lista de dominios comunes v√°lidos (expandida)
            const dominiosValidos = [
                'gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com', 'live.com',
                'icloud.com', 'aol.com', 'protonmail.com', 'yandex.com', 'mail.com',
                'zoho.com', 'fastmail.com', 'tutanota.com', 'gmx.com', 'web.de',
                'qq.com', '163.com', '126.com', 'sina.com', 'sohu.com',
                'naver.com', 'daum.net', 'hanmail.net', 'rediffmail.com',
                'mail.ru', 'yandex.ru', 'rambler.ru', 'list.ru', 'bk.ru',
                'inbox.ru', 'gmail.co.uk', 'yahoo.co.uk', 'hotmail.co.uk',
                'outlook.co.uk', 'live.co.uk', 'btinternet.com', 'virginmedia.com',
                'sky.com', 'talktalk.net', 'orange.fr', 'laposte.net', 'free.fr',
                'wanadoo.fr', 'sfr.fr', 'neuf.fr', 'gmx.fr', 'web.de',
                't-online.de', 'freenet.de', 'arcor.de', 'gmx.de', 'web.de',
                'tiscali.it', 'libero.it', 'virgilio.it', 'alice.it', 'tim.it',
                'fastwebnet.it', 'vodafone.it', 'wind.it', 'tiscali.es',
                'terra.es', 'ya.com', 'hotmail.es', 'gmail.es', 'outlook.es',
                'live.es', 'yahoo.es', 'telefonica.net', 'orange.es', 'vodafone.es',
                'movistar.es', 'ono.es', 'jazzfree.com', 'eresmas.com', 'mixmail.com',
                'uol.com.br', 'bol.com.br', 'ig.com.br', 'terra.com.br', 'globo.com',
                'r7.com', 'oi.com.br', 'oi.com.br', 'oi.com.br', 'oi.com.br',
                // Dominios corporativos y educativos comunes
                'outlook.com', 'office365.com', 'microsoft.com', 'google.com',
                'yahoo.com', 'yahoo.co.uk', 'yahoo.es', 'yahoo.fr', 'yahoo.de',
                'hotmail.com', 'hotmail.co.uk', 'hotmail.es', 'hotmail.fr',
                'live.com', 'live.co.uk', 'live.es', 'live.fr',
                // Dominios de proveedores de internet
                'comcast.net', 'verizon.net', 'att.net', 'charter.net',
                'cox.net', 'earthlink.net', 'juno.com', 'netzero.com',
                // Dominios internacionales
                'gmx.de', 'gmx.at', 'gmx.ch', 'web.de', 't-online.de',
                'freenet.de', 'arcor.de', 'vodafone.de', 'telekom.de',
                'orange.fr', 'laposte.net', 'free.fr', 'wanadoo.fr',
                'sfr.fr', 'neuf.fr', 'bouyguestelecom.fr', 'numericable.fr',
                'tiscali.it', 'libero.it', 'virgilio.it', 'alice.it',
                'tim.it', 'fastwebnet.it', 'vodafone.it', 'wind.it',
                'terra.es', 'ya.com', 'telefonica.net', 'orange.es',
                'vodafone.es', 'movistar.es', 'ono.es', 'jazztel.es',
                'uol.com.br', 'bol.com.br', 'ig.com.br', 'terra.com.br',
                'globo.com', 'r7.com', 'oi.com.br', 'claro.com.br'
            ];
            
            // Validaciones m√°s estrictas
            const partes = email.split('@');
            const usuario = partes[0];
            const dominio = partes[1];
            
            const validaciones = {
                // Validaci√≥n de formato completo
                formato: emailRegex.test(email),
                
                // Validaci√≥n de longitud
                longitud: email.length >= 5 && email.length <= 254,
                
                // Validaci√≥n de estructura b√°sica
                tieneArroba: email.includes('@') && email.indexOf('@') > 0 && email.indexOf('@') < email.length - 1,
                tieneUsuario: usuario && usuario.length > 0,
                tieneDominio: dominio && dominio.length > 0,
                tieneExtension: dominio && dominio.includes('.') && dominio.split('.').length >= 2,
                
                // Validaci√≥n de caracteres
                noEspacios: !email.includes(' '),
                noCaracteresInvalidos: !/[<>()[\]\\,;:\s"]/.test(email),
                noPuntosConsecutivos: !email.includes('..'),
                noPuntoInicio: !usuario.startsWith('.') && !dominio.startsWith('.'),
                noPuntoFinal: !usuario.endsWith('.') && !dominio.endsWith('.'),
                
                // Validaci√≥n de dominio espec√≠fico
                dominioValido: dominio && dominiosValidos.includes(dominio.toLowerCase()),
                noDominiosTemporales: !dominio || (!dominio.toLowerCase().includes('temp') && 
                                                   !dominio.toLowerCase().includes('fake') && 
                                                   !dominio.toLowerCase().includes('test') &&
                                                   !dominio.toLowerCase().includes('example'))
            };
            
            // Verificar si todas las validaciones pasan
            const esValido = Object.values(validaciones).every(val => val === true);
            
            return {
                esValido,
                validaciones,
                mensaje: esValido ? '‚úÖ Email v√°lido' : '‚ùå Email inv√°lido',
                dominio: dominio
            };
        }

        // Funci√≥n para validar email con API externa
        async function validarEmailExterno(email) {
            try {
                // Usar API gratuita y confiable de validaci√≥n de email
                const response = await fetch(`https://api.email-validator.net/api/verify?Email=${encodeURIComponent(email)}`, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Respuesta API email:', data);
                
                return {
                    esValido: data.formatCheck === true,
                    formato: data.formatCheck,
                    dominio: data.smtpCheck,
                    mensaje: data.formatCheck ? '‚úÖ Email verificado' : '‚ùå Email no v√°lido',
                    detalles: data
                };
            } catch (error) {
                console.error('Error validando email externo:', error);
                
                // Fallback: Verificaci√≥n simple de DNS MX
                try {
                    const dominio = email.split('@')[1];
                    console.log('Verificando DNS MX para:', dominio);
                    
                    const mxResponse = await fetch(`https://dns.google/resolve?name=${dominio}&type=MX`);
                    const mxData = await mxResponse.json();
                    
                    console.log('Respuesta DNS MX:', mxData);
                    
                    const tieneMX = mxData.Answer && mxData.Answer.length > 0;
                    
                    return {
                        esValido: tieneMX,
                        formato: true,
                        dominio: tieneMX,
                        mensaje: tieneMX ? '‚úÖ Dominio verificado' : '‚ùå Dominio no v√°lido',
                        detalles: mxData
                    };
                } catch (mxError) {
                    console.error('Error verificando DNS MX:', mxError);
                    // Fallback final a validaci√≥n local
                    return validarEmail(email);
                }
            }
        }

        // Funci√≥n para validar email con m√∫ltiples servicios
        async function validarEmailCompleto(email) {
            // Primero validaci√≥n local r√°pida
            const validacionLocal = validarEmail(email);
            
            if (!validacionLocal.esValido) {
                return validacionLocal;
            }
            
            // Si pasa validaci√≥n local, verificar con API externa
            try {
                console.log('Iniciando validaci√≥n externa para:', email);
                const validacionExterna = await validarEmailExterno(email);
                console.log('Resultado validaci√≥n externa:', validacionExterna);
                return validacionExterna;
            } catch (error) {
                console.log('Fallback a validaci√≥n local debido a error:', error);
                return validacionLocal;
            }
        }

        // Funci√≥n alternativa usando API m√°s simple
        async function validarEmailSimple(email) {
            try {
                // Usar API m√°s simple y confiable
                const dominio = email.split('@')[1];
                const response = await fetch(`https://dns.google/resolve?name=${dominio}&type=MX`);
                const data = await response.json();
                
                console.log('Validaci√≥n DNS MX para', dominio, ':', data);
                
                const esValido = data.Answer && data.Answer.length > 0;
                
                return {
                    esValido: esValido,
                    formato: true,
                    dominio: esValido,
                    mensaje: esValido ? '‚úÖ Dominio verificado' : '‚ùå Dominio no v√°lido',
                    detalles: data
                };
            } catch (error) {
                console.error('Error en validaci√≥n simple:', error);
                return validarEmail(email);
            }
        }

        // Funci√≥n para mostrar errores de validaci√≥n de email
        function mostrarErroresEmail(email, emailInput) {
            // Si el email est√° vac√≠o, no mostrar errores
            if (!email || email.trim() === '') {
                const errorDivElement = document.getElementById('emailError');
                if (errorDivElement) {
                    errorDivElement.innerHTML = '';
                    errorDivElement.style.color = '';
                }
                emailInput.style.borderColor = '';
                return;
            }
            
            const validacion = validarEmail(email);
            const errorDiv = document.getElementById('emailError');
            
            if (!errorDiv) {
                // Crear div de error si no existe
                const newErrorDiv = document.createElement('div');
                newErrorDiv.id = 'emailError';
                newErrorDiv.style.marginTop = '5px';
                newErrorDiv.style.fontSize = '0.85rem';
                emailInput.parentNode.appendChild(newErrorDiv);
            }
            
            const errorDivElement = document.getElementById('emailError');
            
            if (!validacion.esValido) {
                let errores = [];
                
                // Validaciones espec√≠ficas con mensajes claros
                if (!validacion.validaciones.formato) {
                    errores.push('Formato de email inv√°lido');
                }
                if (!validacion.validaciones.longitud) {
                    if (email.length < 5) {
                        errores.push('Email demasiado corto');
                    } else {
                        errores.push('Email demasiado largo');
                    }
                }
                if (!validacion.validaciones.tieneArroba) {
                    if (!email.includes('@')) {
                        errores.push('Falta el s√≠mbolo @');
                    } else if (email.indexOf('@') === 0) {
                        errores.push('El @ no puede estar al inicio');
                    } else {
                        errores.push('El @ no puede estar al final');
                    }
                }
                if (!validacion.validaciones.tieneUsuario) {
                    errores.push('Falta el nombre de usuario');
                }
                if (!validacion.validaciones.tieneDominio) {
                    errores.push('Falta el dominio');
                }
                if (!validacion.validaciones.tieneExtension) {
                    errores.push('Dominio incompleto (falta .com, .org, etc.)');
                }
                if (!validacion.validaciones.noEspacios) {
                    errores.push('No debe contener espacios');
                }
                if (!validacion.validaciones.noCaracteresInvalidos) {
                    errores.push('Contiene caracteres no permitidos');
                }
                if (!validacion.validaciones.noPuntosConsecutivos) {
                    errores.push('No puede tener puntos consecutivos');
                }
                if (!validacion.validaciones.noPuntoInicio) {
                    errores.push('No puede empezar con punto');
                }
                if (!validacion.validaciones.noPuntoFinal) {
                    errores.push('No puede terminar con punto');
                }
                if (!validacion.validaciones.dominioValido) {
                    if (validacion.dominio) {
                        errores.push(`Dominio "${validacion.dominio}" no reconocido`);
                    } else {
                        errores.push('Dominio inv√°lido');
                    }
                }
                if (!validacion.validaciones.noDominiosTemporales) {
                    errores.push('Dominios temporales no permitidos');
                }
                
                errorDivElement.innerHTML = `‚ùå ${errores.join(', ')}`;
                errorDivElement.style.color = '#dc3545';
                emailInput.style.borderColor = '#dc3545';
            } else {
                // Email v√°lido
                errorDivElement.innerHTML = `‚úÖ Email v√°lido (${validacion.dominio})`;
                errorDivElement.style.color = '#28a745';
                emailInput.style.borderColor = '#28a745';
            }
        }

        // Funci√≥n para el calendario
        function toggleCalendar() {
            console.log('üîç Funci√≥n toggleCalendar llamada');
            const modal = document.getElementById('calendarModal');
            if (modal) {
                modal.style.display = 'flex';
                modal.style.zIndex = '1004';
                console.log('‚úÖ Modal de calendario abierto');
                
                // Generar calendario despu√©s de un breve delay
                setTimeout(() => {
                    try {
                        generateCalendar();
                    } catch (error) {
                        console.error('Error generando calendario:', error);
                    }
                }, 100);
            } else {
                console.error('‚ùå Modal de calendario no encontrado');
            }
        }

        function closeCalendar() {
            const modal = document.getElementById('calendarModal');
            if (modal) {
                modal.style.display = 'none';
                console.log('Calendario cerrado');
            }
        }

        function aplicarFechas() {
            console.log('üîç Funci√≥n aplicarFechas llamada');
            console.log('üìÖ selectedStartDate:', selectedStartDate);
            console.log('üìÖ selectedEndDate:', selectedEndDate);
            
            if (selectedStartDate && selectedEndDate) {
                updateDateDisplay(); // Actualizar todos los displays
                closeCalendar();
                console.log('‚úÖ Fechas aplicadas correctamente');
            } else {
                console.log('‚ùå Fechas incompletas');
                alert('‚ùå Por favor selecciona tanto la fecha de llegada como la de salida');
            }
        }

        function generateCalendar() {
            const calendarDays = document.getElementById('calendarDays');
            const calendarDays2 = document.getElementById('calendarDays2');
            const monthDisplay = document.getElementById('currentMonth');
            const monthDisplay2 = document.getElementById('currentMonth2');
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const nextMonth = new Date(year, month + 1, 1);
            
            const firstDay = new Date(year, month, 1);
            const firstDayNextMonth = new Date(year, month + 1, 1);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());
            const startDateNextMonth = new Date(firstDayNextMonth);
            startDateNextMonth.setDate(startDateNextMonth.getDate() - firstDayNextMonth.getDay());
            
            const monthNames = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                              'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
            
            monthDisplay.textContent = `${monthNames[month]} ${year}`;
            monthDisplay2.textContent = `${monthNames[month + 1]} ${year}`;
            
            // Generar primer mes
            calendarDays.innerHTML = '';
            generateMonthDays(calendarDays, startDate, month);
            
            // Generar segundo mes
            calendarDays2.innerHTML = '';
            generateMonthDays(calendarDays2, startDateNextMonth, month + 1);
        }

        function generateMonthDays(container, startDate, targetMonth) {
            const totalDays = 42; // 6 semanas * 7 d√≠as
            
            for (let i = 0; i < totalDays; i++) {
                const date = new Date(startDate);
                date.setDate(startDate.getDate() + i);
                
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = date.getDate();
                
                // Verificar si es del mes objetivo
                if (date.getMonth() !== targetMonth) {
                    dayElement.classList.add('disabled');
                } else {
                    // Verificar si est√° seleccionado
                    if (selectedStartDate && date.toDateString() === selectedStartDate.toDateString()) {
                        dayElement.classList.add('selected');
                        console.log('üéØ Fecha marcada como seleccionada:', date.toDateString());
                    } else if (selectedEndDate && date.toDateString() === selectedEndDate.toDateString()) {
                        dayElement.classList.add('selected');
                        console.log('üéØ Fecha marcada como seleccionada:', date.toDateString());
                    } else if (selectedStartDate && selectedEndDate && 
                             date > selectedStartDate && date < selectedEndDate) {
                        dayElement.classList.add('in-range');
                        console.log('üìÖ Fecha marcada como en rango:', date.toDateString());
                    }
                    
                    dayElement.onclick = () => selectDate(date);
                }
                
                container.appendChild(dayElement);
            }
        }

        function selectDate(date) {
            console.log('üîç Fecha seleccionada:', date.toDateString());
            
            if (isSelectingStart) {
                selectedStartDate = date;
                selectedEndDate = null;
                isSelectingStart = false;
                console.log('üìÖ Fecha de llegada seleccionada:', selectedStartDate.toDateString());
            } else {
                if (date < selectedStartDate) {
                    selectedEndDate = selectedStartDate;
                    selectedStartDate = date;
                } else {
                    selectedEndDate = date;
                }
                isSelectingStart = true;
                console.log('üìÖ Fecha de salida seleccionada:', selectedEndDate.toDateString());
            }
            
            updateDateDisplay();
            generateCalendar();
            
            // Mostrar mensaje de confirmaci√≥n
            if (selectedStartDate && selectedEndDate) {
                console.log('‚úÖ Fechas seleccionadas. Haz clic en "Aplicar Fechas" para confirmar.');
            }
        }

        function updateDateDisplay() {
            const display = document.getElementById('dateRangeDisplay');
            const modalDisplay = document.getElementById('modalDateRangeDisplay');
            const checkInInput = document.getElementById('quickCheckIn');
            const checkOutInput = document.getElementById('quickCheckOut');
            const modalCheckIn = document.getElementById('modalCheckIn');
            const modalCheckOut = document.getElementById('modalCheckOut');
            
            if (selectedStartDate && selectedEndDate) {
                const startStr = selectedStartDate.toLocaleDateString('es-ES');
                const endStr = selectedEndDate.toLocaleDateString('es-ES');
                const displayText = `${startStr} ‚Üí ${endStr}`;
                
                if (display) display.textContent = displayText;
                if (modalDisplay) modalDisplay.textContent = displayText;
                
                const startISO = selectedStartDate.toISOString().split('T')[0];
                const endISO = selectedEndDate.toISOString().split('T')[0];
                
                if (checkInInput) checkInInput.value = startISO;
                if (checkOutInput) checkOutInput.value = endISO;
                if (modalCheckIn) modalCheckIn.value = startISO;
                if (modalCheckOut) modalCheckOut.value = endISO;
            } else if (selectedStartDate) {
                const startStr = selectedStartDate.toLocaleDateString('es-ES');
                const displayText = `${startStr} ‚Üí Seleccionar salida`;
                
                if (display) display.textContent = displayText;
                if (modalDisplay) modalDisplay.textContent = displayText;
                
                const startISO = selectedStartDate.toISOString().split('T')[0];
                if (checkInInput) checkInInput.value = startISO;
                if (modalCheckIn) modalCheckIn.value = startISO;
            } else {
                const displayText = 'Seleccionar fechas';
                if (display) display.textContent = displayText;
                if (modalDisplay) modalDisplay.textContent = displayText;
                
                if (checkInInput) checkInInput.value = '';
                if (checkOutInput) checkOutInput.value = '';
                if (modalCheckIn) modalCheckIn.value = '';
                if (modalCheckOut) modalCheckOut.value = '';
            }
        }



        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar();
        }

        // Funci√≥n para hu√©spedes
        function toggleTravelersModal() {
            console.log('üîç Funci√≥n toggleTravelersModal llamada');
            const modal = document.getElementById('travelersModal');
            if (modal) {
                modal.style.display = 'flex';
                modal.style.zIndex = '1005';
                console.log('Modal de hu√©spedes abierto');
            } else {
                console.error('Modal de hu√©spedes no encontrado');
            }
        }

        function closeTravelersModal() {
            const modal = document.getElementById('travelersModal');
            if (modal) {
                modal.style.display = 'none';
                console.log('Modal de hu√©spedes cerrado');
            }
        }

        function aplicarHuespedes() {
            if (travelersData.adults >= 1) {
                // Actualizar el display del modal de cotizaci√≥n
                const modalTravelersDisplay = document.getElementById('modalTravelersDisplay');
                if (modalTravelersDisplay) {
                    let displayText = `${travelersData.adults} adultos`;
                    if (travelersData.children > 0) {
                        displayText += ` ‚Ä¢ ${travelersData.children} ni√±os`;
                    }
                    modalTravelersDisplay.textContent = displayText;
                    console.log('‚úÖ Display del modal actualizado:', displayText);
                }
                
                closeTravelersModal();
                console.log('‚úÖ Hu√©spedes aplicados correctamente');
            } else {
                alert('‚ùå Debe haber al menos 1 adulto');
            }
        }

        function changeAdults(delta) {
            const newCount = travelersData.adults + delta;
            if (newCount >= 1 && newCount <= 10) {
                travelersData.adults = newCount;
                updateTravelersDisplay();
            }
        }

        function changeChildren(delta) {
            const newCount = travelersData.children + delta;
            if (newCount >= 0 && newCount <= 8) {
                travelersData.children = newCount;
                updateChildrenAges();
                updateTravelersDisplay();
            }
        }

        function updateChildrenAges() {
            const container = document.getElementById('childrenAgesContainer');
            const agesDiv = document.getElementById('childrenAgesInputs');
            
            if (travelersData.children > 0) {
                agesDiv.style.display = 'block';
                container.innerHTML = '';
                
                for (let i = 0; i < travelersData.children; i++) {
                    const ageDiv = document.createElement('div');
                    ageDiv.style.marginBottom = '10px';
                    ageDiv.innerHTML = `
                        <label>Ni√±o ${i + 1}:</label>
                        <input type="number" class="age-input" min="0" max="17" value="${travelersData.childrenAges[i] || 0}" 
                               onchange="updateChildAge(${i}, this.value)">
                    `;
                    container.appendChild(ageDiv);
                }
            } else {
                agesDiv.style.display = 'none';
                travelersData.childrenAges = [];
            }
        }

        function updateChildAge(index, age) {
            travelersData.childrenAges[index] = parseInt(age);
            updateTravelersDisplay();
        }

        function updateTravelersDisplay() {
            const display = document.getElementById('travelersDisplay');
            const adultsCount = document.getElementById('adultsCount');
            const childrenCount = document.getElementById('childrenCount');
            
            if (adultsCount) adultsCount.textContent = travelersData.adults;
            if (childrenCount) childrenCount.textContent = travelersData.children;
            
            let displayText = `${travelersData.adults} adultos`;
            if (travelersData.children > 0) {
                displayText += ` ‚Ä¢ ${travelersData.children} ni√±os`;
            }
            
            if (display) display.textContent = displayText;
            
            // Mostrar mensaje de confirmaci√≥n
            console.log('‚úÖ Hu√©spedes actualizados. Haz clic en "Aplicar Hu√©spedes" para confirmar.');
            console.log('üîç DEBUG: Adultos:', travelersData.adults, 'Ni√±os:', travelersData.children);
        }

        // Funci√≥n para cotizaci√≥n
        // Funci√≥n para enviar cotizaciones actuales antes del l√≠mite
        function enviarCotizacionesActuales() {
            console.log('üîç Funci√≥n enviarCotizacionesActuales llamada');
            
            if (cotizaciones.length === 0) {
                alert('‚ùå No hay cotizaciones para enviar. Agrega al menos una cotizaci√≥n primero.');
                return;
            }
            
            console.log('üì§ Enviando cotizaciones actuales:', cotizaciones.length);
            mostrarResumenMultiplesCotizaciones();
        }
        
        // Funci√≥n para mostrar/ocultar bot√≥n de enviar cotizaciones
        function actualizarBotonesCotizacion() {
            const enviarBtn = document.getElementById('enviarCotizacionesBtn');
            if (enviarBtn) {
                if (cotizaciones.length > 0 && cotizaciones.length < 5) {
                    enviarBtn.style.display = 'block';
                    console.log('üîç Mostrando bot√≥n de enviar cotizaciones actuales');
                } else {
                    enviarBtn.style.display = 'none';
                }
            }
        }
        
        function solicitarCotizacion() {
            console.log('üîç Funci√≥n solicitarCotizacion llamada');
            
            // Obtener datos del modal o de la p√°gina principal
            const hotelSelect = document.getElementById('modalHotelSelect');
            const hotelDisplay = document.getElementById('modalHotelSelectDisplay');
            const hotel = hotelSelect?.value || (hotelDisplay?.textContent !== 'Seleccionar destino' ? hotelDisplay?.textContent : '');
            
            const checkInInput = document.getElementById('modalCheckIn') || document.getElementById('quickCheckIn');
            const checkOutInput = document.getElementById('modalCheckOut') || document.getElementById('quickCheckOut');
            const travelersDisplay = document.getElementById('modalTravelersDisplay') || document.getElementById('travelersDisplay');
            const dateRangeDisplay = document.getElementById('modalDateRangeDisplay') || document.getElementById('dateRangeDisplay');
            
            console.log('üè® Hotel:', hotel);
            console.log('üìÖ Check-in:', checkInInput?.value);
            console.log('üìÖ Check-out:', checkOutInput?.value);
            console.log('üë• Travelers:', travelersDisplay?.textContent);
            
            if (!hotel || hotel === '' || hotel === 'Seleccionar destino') {
                alert('‚ùå Por favor selecciona un hotel');
                return;
            }
            
            if (!checkInInput?.value || !checkOutInput?.value) {
                alert('‚ùå Por favor selecciona las fechas');
                return;
            }
            
            if (!travelersDisplay?.textContent) {
                alert('‚ùå Por favor selecciona los hu√©spedes');
                return;
            }
            
            const quoteData = {
                hotel: hotel,
                checkIn: checkInInput.value,
                checkOut: checkOutInput.value,
                dateRange: dateRangeDisplay?.textContent || 'Fechas seleccionadas',
                travelers: travelersDisplay.textContent,
                adults: travelersData.adults,
                children: travelersData.children,
                childrenAges: travelersData.childrenAges,
                timestamp: new Date().toLocaleString('es-ES')
            };
            
            console.log('üìä Datos de cotizaci√≥n:', quoteData);
            
            // Agregar cotizaci√≥n al array
            cotizaciones.push(quoteData);
            console.log('‚úÖ Cotizaci√≥n agregada. Total:', cotizaciones.length);
            
            // Guardar cotizaci√≥n en localStorage para el dashboard
            const existingQuotes = JSON.parse(localStorage.getItem('quotesDB') || '[]');
            const newQuote = {
                ...quoteData,
                id: `COT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
                clientName: currentUser ? currentUser.name : 'An√≥nimo',
                status: 'pending',
                createdAt: new Date().toISOString()
            };
            
            existingQuotes.push(newQuote);
            localStorage.setItem('quotesDB', JSON.stringify(existingQuotes));
            
            // Disparar evento personalizado para notificar al dashboard
            window.dispatchEvent(new CustomEvent('quotesDBChanged', {
                detail: {
                    quotes: existingQuotes,
                    newQuote: newQuote
                }
            }));
            
            // Tambi√©n disparar evento storage para otras pesta√±as
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'quotesDB',
                newValue: localStorage.getItem('quotesDB'),
                oldValue: localStorage.getItem('quotesDB')
            }));
            
            console.log('üíæ Cotizaci√≥n guardada en localStorage para dashboard');
            
            // Guardar cotizaci√≥n en la base de datos si hay usuario logueado
            if (currentUser && currentUser.id) {
                agregarCotizacionACliente(currentUser.id, quoteData);
                console.log('üíæ Cotizaci√≥n guardada en BD para cliente:', currentUser.id);
            }
            
            // Actualizar botones de cotizaci√≥n
            actualizarBotonesCotizacion();
            
            // Mostrar mensaje de confirmaci√≥n
            if (cotizaciones.length < 5) {
                const remaining = 5 - cotizaciones.length;
                const message = `‚úÖ Cotizaci√≥n ${cotizaciones.length} agregada. `;
                
                if (remaining > 0) {
                    alert(message + `Puedes agregar hasta ${remaining} m√°s, o enviar las cotizaciones actuales.`);
                } else {
                    alert('‚úÖ M√°ximo de 5 cotizaciones alcanzado. Mostrando resumen...');
                    mostrarResumenMultiplesCotizaciones();
                }
                limpiarFormulario();
            } else {
                alert('‚úÖ M√°ximo de 5 cotizaciones alcanzado. Mostrando resumen...');
                mostrarResumenMultiplesCotizaciones();
            }
        }

        function mostrarResumenCotizacion(data) {
            const modal = document.getElementById('quoteSummaryModal');
            const content = document.getElementById('quoteSummaryContent');
            
            if (!modal || !content) {
                console.error('Modal de resumen no encontrado');
                return;
            }
            
            // Guardar datos para WhatsApp
            window.currentQuoteData = data;
            
            // Generar contenido del resumen
            const summaryHTML = `
                <div style="display: grid; gap: 15px;">
                    <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: white; border-radius: 8px; border-left: 4px solid #667eea;">
                        <span style="font-size: 1.5rem;">üè®</span>
                        <div>
                            <div style="font-weight: 600; color: #333;">Hotel Seleccionado</div>
                            <div style="color: #666;">${data.hotel}</div>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: white; border-radius: 8px; border-left: 4px solid #28a745;">
                        <span style="font-size: 1.5rem;">üìÖ</span>
                        <div>
                            <div style="font-weight: 600; color: #333;">Fechas de Estancia</div>
                            <div style="color: #666;">${data.dateRange}</div>
                            <div style="font-size: 0.8rem; color: #888;">Check-in: ${data.checkIn} | Check-out: ${data.checkOut}</div>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: white; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <span style="font-size: 1.5rem;">üë•</span>
                        <div>
                            <div style="font-weight: 600; color: #333;">Hu√©spedes</div>
                            <div style="color: #666;">${data.travelers}</div>
                            ${data.children > 0 ? `<div style="font-size: 0.8rem; color: #888;">Edades: ${data.childrenAges.join(', ')} a√±os</div>` : ''}
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: white; border-radius: 8px; border-left: 4px solid #17a2b8;">
                        <span style="font-size: 1.5rem;">üïí</span>
                        <div>
                            <div style="font-weight: 600; color: #333;">Solicitud Generada</div>
                            <div style="color: #666;">${data.timestamp}</div>
                        </div>
                    </div>
                </div>
            `;
            
            content.innerHTML = summaryHTML;
            modal.style.display = 'block';
        }

        function mostrarResumenMultiplesCotizaciones() {
            const modal = document.getElementById('quoteSummaryModal');
            const content = document.getElementById('quoteSummaryContent');
            
            if (!modal || !content) {
                console.error('Modal de resumen no encontrado');
                return;
            }
            
            // Guardar todas las cotizaciones para WhatsApp
            window.currentQuoteData = cotizaciones;
            
            // Generar carrusel de cotizaciones
            let carruselHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 1.2rem; color: #666; margin-bottom: 10px;">
                        üìã ${cotizaciones.length} Cotizaci√≥n${cotizaciones.length > 1 ? 'es' : ''} Generada${cotizaciones.length > 1 ? 's' : ''}
                    </div>
                </div>
                <div id="cotizacionesCarousel" style="position: relative;">
            `;
            
            cotizaciones.forEach((cotizacion, index) => {
                carruselHTML += `
                    <div class="cotizacion-slide" style="display: ${index === 0 ? 'block' : 'none'};">
                        <div style="display: grid; gap: 15px;">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <div style="font-size: 1.5rem; color: #667eea; margin-bottom: 5px;">Cotizaci√≥n ${index + 1}</div>
                            </div>
                            
                            <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: white; border-radius: 8px; border-left: 4px solid #667eea;">
                                <span style="font-size: 1.5rem;">üè®</span>
                                <div>
                                    <div style="font-weight: 600; color: #333;">Hotel Seleccionado</div>
                                    <div style="color: #666;">${cotizacion.hotel}</div>
                                </div>
                            </div>
                            
                            <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: white; border-radius: 8px; border-left: 4px solid #28a745;">
                                <span style="font-size: 1.5rem;">üìÖ</span>
                                <div>
                                    <div style="font-weight: 600; color: #333;">Fechas de Estancia</div>
                                    <div style="color: #666;">${cotizacion.dateRange}</div>
                                    <div style="font-size: 0.8rem; color: #888;">Check-in: ${cotizacion.checkIn} | Check-out: ${cotizacion.checkOut}</div>
                                </div>
                            </div>
                            
                            <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: white; border-radius: 8px; border-left: 4px solid #ffc107;">
                                <span style="font-size: 1.5rem;">üë•</span>
                                <div>
                                    <div style="font-weight: 600; color: #333;">Hu√©spedes</div>
                                    <div style="color: #666;">${cotizacion.travelers}</div>
                                    ${cotizacion.children > 0 ? `<div style="font-size: 0.8rem; color: #888;">Edades: ${cotizacion.childrenAges.join(', ')} a√±os</div>` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            carruselHTML += `
                </div>
                
                ${cotizaciones.length > 1 ? `
                <div style="display: flex; justify-content: center; gap: 10px; margin-top: 20px;">
                    <button onclick="cambiarCotizacion(-1)" class="form-button" style="background: #6c757d; color: white; padding: 8px 15px;">
                        ‚óÄÔ∏è Anterior
                    </button>
                    <span style="padding: 8px 15px; color: #666;">
                        <span id="cotizacionActual">1</span> de ${cotizaciones.length}
                    </span>
                    <button onclick="cambiarCotizacion(1)" class="form-button" style="background: #6c757d; color: white; padding: 8px 15px;">
                        Siguiente ‚ñ∂Ô∏è
                    </button>
                </div>
                ` : ''}
            `;
            
            content.innerHTML = carruselHTML;
            modal.style.display = 'block';
            currentCotizacionIndex = 0;
        }

        function cambiarCotizacion(direction) {
            const slides = document.querySelectorAll('.cotizacion-slide');
            const currentSpan = document.getElementById('cotizacionActual');
            
            if (slides.length === 0) return;
            
            // Ocultar slide actual
            slides[currentCotizacionIndex].style.display = 'none';
            
            // Calcular nuevo √≠ndice
            currentCotizacionIndex += direction;
            if (currentCotizacionIndex < 0) currentCotizacionIndex = slides.length - 1;
            if (currentCotizacionIndex >= slides.length) currentCotizacionIndex = 0;
            
            // Mostrar nuevo slide
            slides[currentCotizacionIndex].style.display = 'block';
            
            // Actualizar contador
            if (currentSpan) {
                currentSpan.textContent = currentCotizacionIndex + 1;
            }
        }

        function closeQuoteSummary() {
            const modal = document.getElementById('quoteSummaryModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        function limpiarFormulario() {
            console.log('üîç Funci√≥n limpiarFormulario llamada');
            
            // Limpiar los campos del modal de reservas
            const hotelDisplay = document.getElementById('modalHotelSelectDisplay');
            const dateDisplay = document.getElementById('modalDateRangeDisplay');
            const travelersDisplay = document.getElementById('modalTravelersDisplay');
            const hotelSelect = document.getElementById('modalHotelSelect');
            const checkInInput = document.getElementById('modalCheckIn');
            const checkOutInput = document.getElementById('modalCheckOut');
            
            if (hotelDisplay) hotelDisplay.textContent = 'Seleccionar destino';
            if (dateDisplay) dateDisplay.textContent = 'Seleccionar fechas';
            if (travelersDisplay) travelersDisplay.textContent = '2 adultos ‚Ä¢ 0 ni√±os';
            if (hotelSelect) hotelSelect.value = '';
            if (checkInInput) checkInInput.value = '';
            if (checkOutInput) checkOutInput.value = '';
            
            // Resetear variables de fechas
            selectedStartDate = null;
            selectedEndDate = null;
            isSelectingStart = true;
            
            // Resetear datos de hu√©spedes
            travelersData = {
                adults: 2,
                children: 0,
                childrenAges: []
            };
            
            // Actualizar display de hu√©spedes
            updateTravelersDisplay();
            
            // Actualizar botones de cotizaci√≥n
            actualizarBotonesCotizacion();
            
            console.log('‚úÖ Formulario limpiado para nueva cotizaci√≥n');
        }

        function agregarOtraCotizacion() {
            console.log('üîç Funci√≥n agregarOtraCotizacion llamada');
            
            // Cerrar el modal de resumen
            closeQuoteSummary();
            
            // Limpiar formulario
            limpiarFormulario();
            
            // Abrir el modal de reservas
            showReservationModal();
            
            console.log('‚úÖ Modal de reservas abierto para nueva cotizaci√≥n');
        }

        function enviarWhatsApp() {
            const data = window.currentQuoteData;
            if (!data) {
                alert('‚ùå Error: No hay datos para enviar');
                return;
            }
            
            const whatsappNumber = '5492944200748';
            let message = '';
            
            // Verificar si es una sola cotizaci√≥n o m√∫ltiples
            if (Array.isArray(data)) {
                // M√∫ltiples cotizaciones
                message = `üè® *SOLICITUD DE ${data.length} COTIZACIONES*

üëã Hola! Necesito informaci√≥n sobre disponibilidad y precios para las siguientes reservas:

`;
                
                data.forEach((cotizacion, index) => {
                    message += `*COTIZACI√ìN ${index + 1}*
üè® *Hotel:* ${cotizacion.hotel}
üìÖ *Fechas:* ${cotizacion.dateRange}
üïê *Check-in:* ${cotizacion.checkIn}
üïê *Check-out:* ${cotizacion.checkOut}
üë• *Hu√©spedes:* ${cotizacion.travelers}
${cotizacion.children > 0 ? `üë∂ *Edades de ni√±os:* ${cotizacion.childrenAges.join(', ')} a√±os

` : ''}`;
                });
                
                message += `*Solicitud generada:* ${new Date().toLocaleString('es-ES')}

¬øPodr√≠as ayudarme con estas cotizaciones?

Gracias! üôè`;
            } else {
                // Una sola cotizaci√≥n
                message = `üè® *NUEVA SOLICITUD DE COTIZACI√ìN*

*Hotel:* ${data.hotel}
*Fechas:* ${data.dateRange}
*Check-in:* ${data.checkIn}
*Check-out:* ${data.checkOut}
*Hu√©spedes:* ${data.travelers}
${data.children > 0 ? `*Edades de ni√±os:* ${data.childrenAges.join(', ')} a√±os

` : ''}*Solicitud generada:* ${data.timestamp}

üëã Hola! Necesito informaci√≥n sobre disponibilidad y precios para esta reserva. ¬øPodr√≠as ayudarme?

Gracias! üôè`;
            }

            const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
            closeQuoteSummary();
            alert('üì± Redirigiendo a WhatsApp...');
            
            // Marcar cotizaciones como procesadas en el dashboard
            const existingQuotes = JSON.parse(localStorage.getItem('quotesDB') || '[]');
            const quoteData = window.currentQuoteData;
            
            if (Array.isArray(quoteData)) {
                // M√∫ltiples cotizaciones
                quoteData.forEach(quote => {
                    const quoteIndex = existingQuotes.findIndex(q => 
                        q.hotel === quote.hotel && 
                        q.checkIn === quote.checkIn && 
                        q.checkOut === quote.checkOut &&
                        q.travelers === quote.travelers
                    );
                    if (quoteIndex !== -1) {
                        existingQuotes[quoteIndex].status = 'processed';
                        existingQuotes[quoteIndex].processedAt = new Date().toISOString();
                    }
                });
            } else {
                // Una sola cotizaci√≥n
                const quoteIndex = existingQuotes.findIndex(q => 
                    q.hotel === quoteData.hotel && 
                    q.checkIn === quoteData.checkIn && 
                    q.checkOut === quoteData.checkOut &&
                    q.travelers === quoteData.travelers
                );
                if (quoteIndex !== -1) {
                    existingQuotes[quoteIndex].status = 'processed';
                    existingQuotes[quoteIndex].processedAt = new Date().toISOString();
                }
            }
            
            localStorage.setItem('quotesDB', JSON.stringify(existingQuotes));
            
            // Disparar evento para notificar al dashboard
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'quotesDB',
                newValue: localStorage.getItem('quotesDB'),
                oldValue: localStorage.getItem('quotesDB')
            }));
            
            // Limpiar cotizaciones despu√©s de enviar
            cotizaciones = [];
            window.currentQuoteData = null;
            
            // Actualizar botones de cotizaci√≥n
            actualizarBotonesCotizacion();
        }

        // Cerrar modales al hacer clic fuera
        window.onclick = function(event) {
            const calendarModal = document.getElementById('calendarModal');
            const travelersModal = document.getElementById('travelersModal');
            const quoteSummaryModal = document.getElementById('quoteSummaryModal');
            const loginModal = document.getElementById('loginModal');
            const registerModal = document.getElementById('registerModal');
            
            if (event.target === calendarModal) {
                closeCalendar();
            }
            if (event.target === travelersModal) {
                closeTravelersModal();
            }
            if (event.target === quoteSummaryModal) {
                closeQuoteSummary();
            }
            if (event.target === loginModal) {
                closeLoginModal();
            }
            if (event.target === registerModal) {
                closeRegisterModal();
            }
        }

        // Inicializaci√≥n
        updateTravelersDisplay();



        // Funci√≥n para solicitar cotizaci√≥n desde promociones
        function solicitarCotizacionPromocion(hotelName) {
            console.log('üîç Funci√≥n solicitarCotizacionPromocion llamada para:', hotelName);
            
            // Seleccionar autom√°ticamente el hotel en el formulario principal
            const hotelSelect = document.getElementById('quickHotelSelect');
            if (hotelSelect) {
                hotelSelect.value = hotelName;
                console.log('‚úÖ Hotel seleccionado autom√°ticamente en formulario principal:', hotelName);
            }
            
            // Seleccionar autom√°ticamente el hotel en el modal de reservas
            const modalHotelSelect = document.getElementById('modalHotelSelect');
            if (modalHotelSelect) {
                modalHotelSelect.value = hotelName;
                console.log('‚úÖ Hotel seleccionado autom√°ticamente en modal:', hotelName);
            }
            
            // Actualizar el display del hotel en el modal
            const modalHotelDisplay = document.getElementById('modalHotelSelectDisplay');
            if (modalHotelDisplay) {
                modalHotelDisplay.textContent = hotelName;
                console.log('‚úÖ Display del hotel actualizado en modal:', hotelName);
            }
            
            // Cerrar cualquier modal abierto (como el de promociones)
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (modal.style.display === 'block' || modal.style.display === 'flex') {
                    modal.remove();
                }
            });
            
            // Abrir el modal de reservas
            showReservationModal();
            
            console.log('‚úÖ Modal de reservas abierto con hotel seleccionado:', hotelName);
        }

        // Variables para autenticaci√≥n
        let currentUser = null;
        let isLoggedIn = false;

        // Funciones de autenticaci√≥n
        function showLoginModal() {
            const modal = document.getElementById('loginModal');
            if (modal) {
                modal.style.display = 'block';
            }
        }

        function closeLoginModal() {
            const modal = document.getElementById('loginModal');
            if (modal) {
                modal.style.display = 'none';
                // Limpiar campos del formulario
                const form = modal.querySelector('form');
                if (form) {
                    form.reset();
                }
                console.log('‚úÖ Modal de login cerrado');
            } else {
                console.log('‚ùå Modal de login no encontrado');
            }
        }

        function showRegisterModal() {
            const modal = document.getElementById('registerModal');
            if (modal) {
                modal.style.display = 'block';
            }
        }

        function closeRegisterModal() {
            const modal = document.getElementById('registerModal');
            if (modal) {
                modal.style.display = 'none';
                // Limpiar campos del formulario
                const form = modal.querySelector('form');
                if (form) {
                    form.reset();
                }
                console.log('‚úÖ Modal de registro cerrado');
            } else {
                console.log('‚ùå Modal de registro no encontrado');
            }
        }

        function loginUser(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // Validar formato de email
            const validacionEmail = validarEmail(email);
            if (!validacionEmail.esValido) {
                alert('‚ùå Por favor ingresa un email v√°lido.');
                return;
            }
            
            // Buscar cliente en la base de datos
            const cliente = buscarClientePorEmail(email);
            
            if (!cliente) {
                alert('‚ùå No existe una cuenta con este email. Por favor reg√≠strate.');
                return;
            }
            
            // Verificar contrase√±a
            if (cliente.password !== password) {
                alert('‚ùå Contrase√±a incorrecta. Por favor intenta de nuevo.');
                return;
            }
            
            // Verificar si la cuenta est√° activa
            if (cliente.status !== 'activo') {
                alert('‚ùå Tu cuenta est√° suspendida. Contacta soporte.');
                return;
            }
            
            // Actualizar √∫ltima actividad
            actualizarCliente(cliente.id, { ultimaActividad: new Date().toISOString() });
            
            // Actualizar usuario actual
            currentUser = {
                id: cliente.id,
                name: cliente.name,
                email: cliente.email,
                phone: cliente.phone,
                birthDay: cliente.birthDay,
                birthMonth: cliente.birthMonth,
                tipoCuenta: cliente.tipoCuenta,
                cotizaciones: cliente.cotizaciones || []
            };
            isLoggedIn = true;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // Cerrar modal y actualizar header
            closeLoginModal();
            updateHeaderForLoggedInUser();
            
            // Asegurar que el modal est√© cerrado
            setTimeout(() => {
                const modal = document.getElementById('loginModal');
                if (modal && modal.style.display !== 'none') {
                    modal.style.display = 'none';
                    console.log('‚úÖ Modal cerrado con timeout');
                }
            }, 100);
            
            console.log('üë§ Usuario logueado:', currentUser);
        }

        function registerUser(event) {
            event.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const phone = document.getElementById('registerPhone').value;
            const day = document.getElementById('registerDay').value;
            const month = document.getElementById('registerMonth').value;
            const password = document.getElementById('registerPassword').value;
            const passwordConfirm = document.getElementById('registerPasswordConfirm').value;
            
            // Validaci√≥n b√°sica
            if (!name || !email || !phone || !day || !month || !password || !passwordConfirm) {
                alert('‚ùå Por favor completa todos los campos');
                return;
            }
            
            // Validar fecha de nacimiento
            if (day < 1 || day > 31 || month < 1 || month > 12) {
                alert('‚ùå Por favor ingresa una fecha de nacimiento v√°lida');
                return;
            }
            
            // Validar contrase√±a
            if (password.length < 6) {
                alert('‚ùå La contrase√±a debe tener al menos 6 caracteres');
                return;
            }
            
            if (password !== passwordConfirm) {
                alert('‚ùå Las contrase√±as no coinciden');
                return;
            }
            
            // Validar formato de email
            const validacionEmail = validarEmail(email);
            if (!validacionEmail.esValido) {
                alert('‚ùå Por favor ingresa un email v√°lido.');
                return;
            }
            
            // Verificar si el email ya existe
            const clienteExistente = buscarClientePorEmail(email);
            if (clienteExistente) {
                alert('‚ùå Ya existe una cuenta con este email. Por favor inicia sesi√≥n.');
                return;
            }
            
            // Crear objeto cliente
            const nuevoCliente = {
                name: name,
                email: email,
                phone: phone,
                birthDay: parseInt(day),
                birthMonth: parseInt(month),
                password: password, // En producci√≥n deber√≠a estar hasheada
                status: 'activo',
                tipoCuenta: 'registrado'
            };
            
            // Guardar en base de datos
            const clienteId = guardarCliente(nuevoCliente);
            
            // Actualizar usuario actual
            currentUser = { 
                id: clienteId,
                name: name, 
                email: email, 
                phone: phone, 
                birthDay: day,
                birthMonth: month,
                tipoCuenta: 'registrado'
            };
            isLoggedIn = true;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            closeRegisterModal();
            alert(`‚úÖ ¬°Cuenta creada exitosamente! Cliente ID: ${clienteId}`);
            
            // Mostrar estad√≠sticas
            const stats = obtenerEstadisticasDB();
            console.log('üìä Estad√≠sticas de BD:', stats);
        }

        // Funci√≥n para validar fortaleza de contrase√±a
        function validatePassword(password) {
            const strengthDiv = document.getElementById('passwordStrength');
            let strength = 0;
            let message = '';
            let color = '#666';
            
            if (password.length >= 6) strength++;
            if (password.match(/[a-z]/)) strength++;
            if (password.match(/[A-Z]/)) strength++;
            if (password.match(/[0-9]/)) strength++;
            if (password.match(/[^a-zA-Z0-9]/)) strength++;
            
            switch(strength) {
                case 0:
                case 1:
                    message = '‚ùå Muy d√©bil';
                    color = '#dc3545';
                    break;
                case 2:
                    message = '‚ö†Ô∏è D√©bil';
                    color = '#ffc107';
                    break;
                case 3:
                    message = '‚úÖ Media';
                    color = '#28a745';
                    break;
                case 4:
                    message = '‚úÖ Fuerte';
                    color = '#28a745';
                    break;
                case 5:
                    message = '‚úÖ Muy fuerte';
                    color = '#28a745';
                    break;
            }
            
            strengthDiv.textContent = message;
            strengthDiv.style.color = color;
        }

        // Funci√≥n para validar coincidencia de contrase√±as
        function validatePasswordMatch() {
            const password = document.getElementById('registerPassword').value;
            const passwordConfirm = document.getElementById('registerPasswordConfirm').value;
            const matchDiv = document.getElementById('passwordMatch');
            
            if (passwordConfirm === '') {
                matchDiv.textContent = '';
                return;
            }
            
            if (password === passwordConfirm) {
                matchDiv.textContent = '‚úÖ Las contrase√±as coinciden';
                matchDiv.style.color = '#28a745';
            } else {
                matchDiv.textContent = '‚ùå Las contrase√±as no coinciden';
                matchDiv.style.color = '#dc3545';
            }
        }

        // Funci√≥n para sugerir contrase√±a segura
        function suggestPassword() {
            const email = document.getElementById('registerEmail').value;
            const name = document.getElementById('registerName').value;
            
            // Generar contrase√±a basada en datos del usuario si est√°n disponibles
            let suggestedPassword = '';
            
            if (email && name) {
                // Crear contrase√±a basada en email y nombre
                const emailPart = email.split('@')[0];
                const namePart = name.split(' ')[0].toLowerCase();
                const randomNum = Math.floor(Math.random() * 1000);
                const specialChar = ['!', '@', '#', '$', '%', '&', '*'][Math.floor(Math.random() * 7)];
                
                suggestedPassword = `${namePart}${emailPart}${randomNum}${specialChar}`;
            } else {
                // Contrase√±a completamente aleatoria
                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';
                const length = 12;
                
                for (let i = 0; i < length; i++) {
                    suggestedPassword += chars.charAt(Math.floor(Math.random() * chars.length));
                }
            }
            
            // Aplicar la contrase√±a sugerida
            const passwordInput = document.getElementById('registerPassword');
            const confirmInput = document.getElementById('registerPasswordConfirm');
            
            passwordInput.value = suggestedPassword;
            confirmInput.value = suggestedPassword;
            
            // Actualizar validaciones
            validatePassword(suggestedPassword);
            validatePasswordMatch();
            
            // Mostrar mensaje de confirmaci√≥n
            const strengthDiv = document.getElementById('passwordStrength');
            strengthDiv.innerHTML = `‚úÖ Contrase√±a sugerida aplicada: <strong>${suggestedPassword}</strong>`;
            strengthDiv.style.color = '#28a745';
            
            // Hacer foco en el campo de confirmaci√≥n
            confirmInput.focus();
        }

        // Funci√≥n para mostrar/ocultar contrase√±a
        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            const button = input.nextElementSibling;
            
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'üôà';
                button.title = 'Ocultar contrase√±a';
            } else {
                input.type = 'password';
                button.textContent = 'üëÅÔ∏è';
                button.title = 'Mostrar contrase√±a';
            }
        }

        function loginWithGoogle() {
            // Simulaci√≥n de login con Google
            currentUser = { name: 'Usuario Google', email: 'usuario@gmail.com', phone: '+56 9 1234 5678' };
            isLoggedIn = true;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // Cerrar tanto el modal de login como el de registro si est√°n abiertos
            closeLoginModal();
            closeRegisterModal();
            alert('‚úÖ ¬°Bienvenido! Has iniciado sesi√≥n con Google.');
        }

        function loginWithFacebook() {
            // Simulaci√≥n de login con Facebook
            currentUser = { name: 'Usuario Facebook', email: 'usuario@facebook.com', phone: '+56 9 1234 5678' };
            isLoggedIn = true;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // Cerrar tanto el modal de login como el de registro si est√°n abiertos
            closeLoginModal();
            closeRegisterModal();
            alert('‚úÖ ¬°Bienvenido! Has iniciado sesi√≥n con Facebook.');
        }

        function loginAsGuest() {
            currentUser = { name: 'Invitado', email: 'invitado@checkin24hs.com' };
            isLoggedIn = true;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            closeFloatingLogin();
            alert('‚úÖ ¬°Bienvenido! Continuando como invitado.');
        }

        // Funciones para el men√∫ hamburguesa
        function toggleHamburgerMenu() {
            const menu = document.getElementById('hamburgerMenu');
            const overlay = document.getElementById('sidebarOverlay');
            
            if (menu && overlay) {
                menu.classList.toggle('active');
                overlay.classList.toggle('active');
            }
        }

        // Funciones adicionales del men√∫
        function showRewardsInfo() {
            alert('üéÅ My Rewards es nuestro programa de fidelizaci√≥n que te permite acumular puntos por cada reserva y canjearlos por descuentos exclusivos, upgrades de habitaci√≥n y beneficios especiales.');
        }

        function showHistory() {
            alert('üìã Aqu√≠ podr√°s ver tu historial de reservas, cotizaciones y actividades recientes.');
        }

        function showSettings() {
            alert('‚öôÔ∏è Configura tus preferencias de notificaciones, idioma y tema de la aplicaci√≥n.');
        }

        function updateHeaderForLoggedInUser() {
            const headerButtons = document.querySelector('.header-buttons');
            if (headerButtons && currentUser) {
                headerButtons.innerHTML = `
                    <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 5px;">
                        <div style="text-align: right;">
                            <div style="color: #28a745; font-weight: 600; font-size: 0.9rem;">¬°Hola de nuevo, ${currentUser.name}!</div>
                            <div style="color: #666; font-size: 0.8rem;">${currentUser.email}</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <button onclick="logout()" class="form-button" style="background: #dc3545; color: white; padding: 8px 15px; font-size: 0.9rem;">
                                üö™ Cerrar Sesi√≥n
                            </button>
                            <div class="hamburger-menu" onclick="toggleHamburgerMenu()" style="cursor: pointer; font-size: 1.5rem; margin-left: 10px;">
                                ‚ò∞
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function updateHeaderForLoggedOutUser() {
            const headerButtons = document.querySelector('.header-buttons');
            if (headerButtons) {
                headerButtons.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <button onclick="showLoginModal()" class="form-button" style="background: #667eea; color: white; padding: 8px 15px; font-size: 0.9rem;">
                            üîê Iniciar Sesi√≥n
                        </button>
                        <button onclick="showRegisterModal()" class="form-button" style="background: #28a745; color: white; padding: 8px 15px; font-size: 0.9rem;">
                            üìù Registrarse
                        </button>
                        <div class="hamburger-menu" onclick="toggleHamburgerMenu()" style="cursor: pointer; font-size: 1.5rem; margin-left: 10px;">
                            ‚ò∞
                        </div>
                    </div>
                `;
            }
        }



        function logout() {
            if (confirm('¬øEst√°s seguro de que quieres cerrar sesi√≥n?')) {
                currentUser = null;
                isLoggedIn = false;
                localStorage.removeItem('currentUser');
                updateHeaderForLoggedOutUser();
                toggleHamburgerMenu();
            }
        }

        // Funciones para el tema
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Aplicar estilos del tema
            if (newTheme === 'dark') {
                body.style.background = 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)';
                document.querySelectorAll('.section').forEach(section => {
                    section.style.background = '#34495e';
                    section.style.color = 'white';
                });
            } else {
                body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                document.querySelectorAll('.section').forEach(section => {
                    section.style.background = 'white';
                    section.style.color = '#333';
                });
            }
            
            alert(`üåô Tema ${newTheme === 'dark' ? 'oscuro' : 'claro'} aplicado`);
        }

        // Cargar tema guardado
        function loadSavedTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.body.setAttribute('data-theme', savedTheme);
                if (savedTheme === 'dark') {
                    toggleTheme(); // Aplicar estilos oscuros
                }
            }
        }

        // Mostrar modal flotante al cargar la p√°gina
        setTimeout(() => {
            showFloatingLogin();
        }, 1000);

        // Cargar tema al iniciar
        loadSavedTheme();

        // Funciones para los modales de las tarjetas
        function showProfileModal() {
            // Ahora abre el modal de reservas en lugar del modal de perfil
            showReservationModal();
        }

        function showPromotionsModal() {
            // Cargar hoteles y promociones desde localStorage
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            let allPromotions = [];
            
            // Recopilar todas las promociones activas
            hotels.forEach(hotel => {
                const hotelPromotions = JSON.parse(localStorage.getItem(`promotions_${hotel.id}`) || '[]');
                const activePromotions = hotelPromotions.filter(promo => promo.status === 'active');
                activePromotions.forEach(promo => {
                    allPromotions.push({
                        ...promo,
                        hotelName: hotel.name,
                        hotelId: hotel.id,
                        hotelImage: hotel.image || 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=600&h=400&fit=crop'
                    });
                });
            });
            
            // Si no hay promociones activas, mostrar promociones por defecto
            if (allPromotions.length === 0) {
                allPromotions = [
                    {
                        name: 'Descuento de Verano',
                        description: 'Descuento especial en estad√≠as de 3 o m√°s noches. Incluye acceso a termas y spa.',
                        discount: 30,
                        endDate: '2024-12-31',
                        hotelName: 'Hotel Terma de Puyehue',
                        hotelImage: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=600&h=400&fit=crop'
                    },
                    {
                        name: 'Experiencia Bosque Nativo',
                        description: 'Experiencia √∫nica en el bosque nativo. Incluye actividades de aventura y gastronom√≠a local.',
                        discount: 25,
                        endDate: '2024-11-30',
                        hotelName: 'Hotel Huilo-Huilo',
                        hotelImage: 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=600&h=400&fit=crop'
                    },
                    {
                        name: 'Paquete Esqu√≠ Completo',
                        description: 'Paquete completo con esqu√≠ incluido. Equipamiento y clases para principiantes.',
                        discount: 20,
                        endDate: '2024-08-31',
                        hotelName: 'Hotel Corralco Resort',
                        hotelImage: 'https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=600&h=400&fit=crop'
                    }
                ];
            }
            
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="background: url('https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=800&h=600&fit=crop') center/cover; padding: 20px; border-radius: 12px; max-width: 450px; width: 85%; max-height: 70vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.3); border: none; position: relative; font-family: 'Segoe UI', sans-serif;">
                    <!-- Overlay oscuro para mejor legibilidad -->
                    <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); border-radius: 12px;"></div>
                    <!-- Contenido del modal -->
                    <div style="position: relative; z-index: 2;">
                    
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.3);">
                            <h2 style="margin: 0; color: white; font-size: 1.5rem; font-weight: 300; letter-spacing: 1px;">Promociones</h2>
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; width: 32px; height: 32px; font-size: 1.2rem; cursor: pointer; color: white; transition: color 0.3s ease; display: flex; align-items: center; justify-content: center;">√ó</button>
                        </div>
                    
                        <!-- Banner Promocional con Gradiente -->
                        <div style="position: relative; margin-bottom: 20px; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.3);">
                            <!-- Imagen de fondo promocional -->
                            <div style="position: relative; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); padding: 20px; text-align: center; min-height: 140px; display: flex; align-items: center; justify-content: center;">
                                
                                <!-- Imagen promocional de Imgur con filtro -->
                                <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url('https://i.imgur.com/uPWa3Da.jpg') center/cover; opacity: 0.15;"></div>
                                
                                <!-- Contenido principal -->
                                <div style="position: relative; z-index: 3; color: white;">
                                    <!-- Texto principal -->
                                    <div style="margin-bottom: 15px;">
                                        <div style="font-size: 0.8rem; font-weight: 400; color: rgba(255,255,255,0.8); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 2px;">Oferta especial</div>
                                        <div style="font-size: 1.6rem; font-weight: 300; color: white; line-height: 1.2; margin-bottom: 8px;">Descuentos Exclusivos</div>
                                    </div>
                                    
                                    <!-- Oferta especial -->
                                    <div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 10px 20px; border-radius: 4px; display: inline-block; margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.3);">
                                        <div style="font-size: 0.9rem; font-weight: 400; color: white; text-transform: uppercase; letter-spacing: 1px;">Hasta 40% de descuento</div>
                                    </div>
                                    
                                    <!-- Informaci√≥n adicional -->
                                    <div style="font-size: 0.8rem; color: rgba(255,255,255,0.8); margin-top: 8px;">
                                        Descubre nuestras mejores ofertas en hoteles seleccionados
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="modal-carousel">
                            <div class="modal-carousel-container">
                                ${allPromotions.map(promo => `
                                    <div class="modal-carousel-slide">
                                        <div class="modal-promotion-card">
                                            <div class="modal-promotion-image">
                                                <img src="${promo.hotelImage}" alt="${promo.hotelName}" onerror="this.src='https://images.unsplash.com/photo-1566073771259-6a8506099945?w=600&h=400&fit=crop'">
                                                <div class="modal-promotion-badge">-${promo.discount}%</div>
                                            </div>
                                            <div class="modal-promotion-content">
                                                <h4>üè® ${promo.hotelName}</h4>
                                                <p>${promo.description}</p>
                                                <div class="modal-promotion-info">
                                                    <div>üìÖ V√°lido hasta: ${new Date(promo.endDate).toLocaleDateString('es-ES')}</div>
                                                    <div>üí∞ Descuento: ${promo.discount}%</div>
                                                    ${promo.type ? `<div>üéØ Tipo: ${promo.type}</div>` : ''}
                                                </div>
                                                <button onclick="solicitarCotizacionPromocion('${promo.hotelName}')" class="modal-promotion-btn">
                                                    üìã Solicitar Cotizaci√≥n
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Funciones para el carrusel del modal
        function changeModalSlide(direction) {
            const container = document.querySelector('.modal-carousel-container');
            const dots = document.querySelectorAll('.modal-carousel-dot');
            
            if (!container) return;
            
            window.currentModalSlide += direction;
            
            if (window.currentModalSlide < 0) {
                window.currentModalSlide = window.totalModalSlides - 1;
            } else if (window.currentModalSlide >= window.totalModalSlides) {
                window.currentModalSlide = 0;
            }
            
            container.style.transform = `translateX(-${window.currentModalSlide * 100}%)`;
            
            // Actualizar dots
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === window.currentModalSlide);
            });
        }

        function goToModalSlide(slideIndex) {
            const container = document.querySelector('.modal-carousel-container');
            const dots = document.querySelectorAll('.modal-carousel-dot');
            
            if (!container) return;
            
            window.currentModalSlide = slideIndex;
            container.style.transform = `translateX(-${window.currentModalSlide * 100}%)`;
            
            // Actualizar dots
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === window.currentModalSlide);
            });
        }

        function showRewardsModal() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="margin: 0; color: #333;">‚≠ê My Rewards</h2>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">√ó</button>
                    </div>
                    
                    <div style="text-align: center; margin-bottom: 30px;">
                        <div style="font-size: 4rem; margin-bottom: 15px;">‚≠ê</div>
                        <h3 style="margin: 0 0 10px 0; color: #333;">Nivel Oro</h3>
                        <p style="margin: 0; color: #666;">Membres√≠a Premium</p>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h4 style="margin: 0 0 15px 0; color: #333;">üéÅ Beneficios Activos</h4>
                        <ul style="margin: 0; padding-left: 20px; text-align: left;">
                            <li style="margin-bottom: 8px;">Descuentos exclusivos del 15-40%</li>
                            <li style="margin-bottom: 8px;">Check-in prioritario</li>
                            <li style="margin-bottom: 8px;">Upgrade de habitaci√≥n gratuito</li>
                            <li style="margin-bottom: 8px;">Acceso a √°reas VIP</li>
                            <li style="margin-bottom: 8px;">Puntos Rewards x2</li>
                        </ul>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                        <h4 style="margin: 0 0 15px 0; color: #333;">üìà Pr√≥ximo Nivel</h4>
                        <div style="margin-bottom: 10px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>Nivel Platino</span>
                                <span>250/500 puntos</span>
                            </div>
                            <div style="background: #e0e0e0; height: 8px; border-radius: 4px; overflow: hidden;">
                                <div style="background: #fcb69f; height: 100%; width: 50%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Funciones para el modal de reservas
        function showReservationModal() {
            const modal = document.getElementById('reservationModal');
            if (modal) {
                modal.style.display = 'flex';
                // Sincronizar los valores del modal con los valores principales
                const hotelSelect = document.getElementById('modalHotelSelect');
                const dateDisplay = document.getElementById('modalDateRangeDisplay');
                const travelersDisplay = document.getElementById('modalTravelersDisplay');
                
                if (hotelSelect) hotelSelect.value = document.getElementById('quickHotelSelect')?.value || '';
                if (dateDisplay) dateDisplay.textContent = document.getElementById('dateRangeDisplay')?.textContent || 'Seleccionar fechas';
                if (travelersDisplay) travelersDisplay.textContent = document.getElementById('travelersDisplay')?.textContent || '2 adultos ‚Ä¢ 0 ni√±os';
            }
        }

        function closeReservationModal() {
            const modal = document.getElementById('reservationModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        function toggleHotelSelect() {
            console.log('üîç Funci√≥n toggleHotelSelect llamada');
            
            // Obtener hoteles desde localStorage (prioridad del dashboard)
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            console.log('üîç DEBUG: Hoteles para modal de selecci√≥n:', hotels);
            
            // Crear un modal simple para selecci√≥n de hoteles
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1006;
            `;
            
            let optionsList = '';
            
            // Usar hoteles del dashboard si est√°n disponibles
            if (hotels.length > 0) {
                console.log('üîç DEBUG: Usando hoteles del dashboard para modal');
                hotels.forEach((hotel, index) => {
                    optionsList += `<div onclick="selectHotel('${hotel.name}', 'üè® ${hotel.name}')" style="padding: 15px; cursor: pointer; border-bottom: 1px solid #eee; transition: background 0.2s;" onmouseover="this.style.background='#f8f9fa'" onmouseout="this.style.background='white'">üè® ${hotel.name}</div>`;
                    console.log(`üîç DEBUG: Agregando hotel al modal: ${hotel.name}`);
                });
            } else {
                // Fallback a hoteles por defecto si no hay hoteles en dashboard
                console.log('üîç DEBUG: No hay hoteles en dashboard, usando hoteles por defecto');
                const defaultHotels = [
                    'Hotel Terma de Puyehue',
                    'Hotel Huilo-Huilo',
                    'Hotel Corralco Resort',
                    'Hotel Futangue',
                    'Caba√±as Termas de Aguas Calientes'
                ];
                
                defaultHotels.forEach(hotel => {
                    optionsList += `<div onclick="selectHotel('${hotel}', 'üè® ${hotel}')" style="padding: 15px; cursor: pointer; border-bottom: 1px solid #eee; transition: background 0.2s;" onmouseover="this.style.background='#f8f9fa'" onmouseout="this.style.background='white'">üè® ${hotel}</div>`;
                });
                         }
            
            modal.innerHTML = `
                    <div style="background: white; padding: 25px; border-radius: 12px; max-width: 450px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="margin: 0; color: #333;">üè® Seleccionar Destino</h3>
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">√ó</button>
                        </div>
                        <div style="max-height: 300px; overflow-y: auto; border-radius: 8px; border: 1px solid #eee;">
                            ${optionsList}
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // Cerrar modal al hacer clic fuera
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
        }

        function selectHotel(value, text) {
            const select = document.getElementById('modalHotelSelect');
            const display = document.getElementById('modalHotelSelectDisplay');
            
            if (select && display) {
                select.value = value;
                display.textContent = text;
            }
            
            // Cerrar modal
            const modal = document.querySelector('div[style*="z-index: 1006"]');
            if (modal) {
                modal.remove();
            }
        }

        // Event listener para el select de hoteles
        document.addEventListener('DOMContentLoaded', function() {
            const hotelSelect = document.getElementById('modalHotelSelect');
            const hotelDisplay = document.getElementById('modalHotelSelectDisplay');
            
            if (hotelSelect && hotelDisplay) {
                hotelSelect.addEventListener('change', function() {
                    hotelDisplay.textContent = this.options[this.selectedIndex].text;
                });
            }
        });

        // Funci√≥n para verificar duplicados
        function checkForDuplicates() {
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            const hotelsContainer = document.getElementById('hotels-container');
            
            if (hotels.length === 0) {
                console.log('‚ÑπÔ∏è No hay hoteles en localStorage para verificar');
                return;
            }
            
            // Verificar duplicados en localStorage
            const seenNames = new Set();
            const duplicates = [];
            
            hotels.forEach(hotel => {
                if (seenNames.has(hotel.name)) {
                    duplicates.push(hotel.name);
                } else {
                    seenNames.add(hotel.name);
                }
            });
            
            // Verificar duplicados en el DOM
            const domHotels = hotelsContainer ? hotelsContainer.querySelectorAll('.hotel-card-new') : [];
            const domNames = new Set();
            const domDuplicates = [];
            
            domHotels.forEach(hotelCard => {
                const hotelName = hotelCard.querySelector('h3')?.textContent;
                if (hotelName) {
                    if (domNames.has(hotelName)) {
                        domDuplicates.push(hotelName);
                    } else {
                        domNames.add(hotelName);
                    }
                }
            });
            
            console.log(`üîç Verificaci√≥n de duplicados:`);
            console.log(`   üìä localStorage: ${hotels.length} hoteles, ${duplicates.length} duplicados`);
            console.log(`   üè† DOM: ${domHotels.length} hoteles, ${domDuplicates.length} duplicados`);
            
            if (duplicates.length > 0) {
                console.log(`   ‚ö†Ô∏è Duplicados en localStorage: ${duplicates.join(', ')}`);
            }
            if (domDuplicates.length > 0) {
                console.log(`   ‚ö†Ô∏è Duplicados en DOM: ${domDuplicates.join(', ')}`);
            }
        }
        
        // Funci√≥n global para contar destinos disponibles
        function contarDestinosDisponibles() {
            // Contar solo los hoteles dentro del contenedor de hoteles destacados
            const hotelsContainer = document.getElementById('hotels-container');
            let count = 0;
            
            if (hotelsContainer) {
                const destinos = hotelsContainer.querySelectorAll('.hotel-card-new');
                count = destinos.length;
            }
            
            const destinosCountElement = document.getElementById('destinosCount');
            if (destinosCountElement) {
                destinosCountElement.textContent = count;
                console.log(`üè® Destinos destacados contados: ${count}`);
                
                // Verificar si hay hoteles en dashboard
                const dashboardHotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
                if (dashboardHotels.length > 0) {
                    console.log(`üìä Hoteles en dashboard: ${dashboardHotels.length}`);
                }
                
                // Verificar duplicados despu√©s de contar
                checkForDuplicates();
            }
        }
        
        // Event listeners para validaciones en tiempo real
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar base de datos de clientes
            initClientesDB();
            
            const passwordInput = document.getElementById('registerPassword');
            const passwordConfirmInput = document.getElementById('registerPasswordConfirm');
            const emailInput = document.getElementById('registerEmail');
            
            if (passwordInput) {
                passwordInput.addEventListener('input', function() {
                    validatePassword(this.value);
                });
            }
            
            if (passwordConfirmInput) {
                passwordConfirmInput.addEventListener('input', function() {
                    validatePasswordMatch();
                });
            }
            
            if (emailInput) {
                emailInput.addEventListener('input', function() {
                    if (this.value.length > 0) {
                        mostrarErroresEmail(this.value, this);
                    } else {
                        // Limpiar errores si el campo est√° vac√≠o
                        const errorDiv = document.getElementById('emailError');
                        if (errorDiv) {
                            errorDiv.innerHTML = '';
                        }
                        this.style.borderColor = '#e0e0e0';
                    }
                });
                
                emailInput.addEventListener('blur', function() {
                    if (this.value.length > 0) {
                        mostrarErroresEmail(this.value, this);
                    }
                });
            }
            
            // Validaci√≥n de email para login
            const loginEmailInput = document.getElementById('loginEmail');
            if (loginEmailInput) {
                loginEmailInput.addEventListener('input', function() {
                    if (this.value.length > 0) {
                        mostrarErroresEmail(this.value, this);
                    } else {
                        // Limpiar errores si el campo est√° vac√≠o
                        const errorDiv = document.getElementById('emailError');
                        if (errorDiv) {
                            errorDiv.innerHTML = '';
                        }
                        this.style.borderColor = '#e0e0e0';
                    }
                });
                
                loginEmailInput.addEventListener('blur', function() {
                    if (this.value.length > 0) {
                        mostrarErroresEmail(this.value, this);
                    }
                });
            }
            
            // Mostrar estad√≠sticas de la base de datos
            const stats = obtenerEstadisticasDB();
            console.log('üìä Base de datos inicializada:', stats);
            
            // Contar destinos al cargar la p√°gina
            contarDestinosDisponibles();
            
            // Verificar si hay un usuario logueado y actualizar el header
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    isLoggedIn = true;
                    updateHeaderForLoggedInUser();
                    console.log('üë§ Usuario logueado encontrado:', currentUser.name);
                } catch (error) {
                    console.error('Error al cargar usuario:', error);
                    localStorage.removeItem('currentUser');
                }
            }
        });

        // Verificar que el script se carga
        console.log('‚úÖ Script cargado correctamente');
        console.log('toggleCalendar:', typeof toggleCalendar);
        console.log('toggleTravelersModal:', typeof toggleTravelersModal);
        console.log('solicitarCotizacion:', typeof solicitarCotizacion);
        console.log('changePromotionSlide:', typeof changePromotionSlide);
        
        // Funci√≥n para cerrar todos los modales
        function closeAllModals() {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                modal.style.display = 'none';
            });
            console.log('‚úÖ Todos los modales cerrados');
        }
        
        // Evento para cerrar modales al hacer clic fuera de ellos
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                    console.log('‚úÖ Modal cerrado al hacer clic fuera');
                }
            });
        }
        
        // ===== FUNCIONES DE SINCRONIZACI√ìN CON DASHBOARD =====
        
        // Funci√≥n para cargar hoteles desde localStorage
        function loadHotelsFromDashboard() {
            console.log('üîÑ Cargando hoteles desde dashboard...');
            
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            console.log('üîç DEBUG: Hoteles le√≠dos de localStorage:', hotels);
            console.log('üîç DEBUG: N√∫mero de hoteles en localStorage:', hotels.length);
            
            const hotelsContainer = document.getElementById('hotels-container');
            
            if (!hotelsContainer) {
                console.error('‚ùå Contenedor de hoteles no encontrado');
                return;
            }
            
            // SIEMPRE usar hoteles del dashboard si existen (prioridad absoluta)
            if (hotels.length > 0) {
                console.log(`üîÑ Cargando ${hotels.length} hoteles desde dashboard...`);
                
                // Limpiar contenedor completamente para evitar duplicados
                hotelsContainer.innerHTML = '';
                
                // Control de duplicados: usar Set para nombres √∫nicos
                const uniqueHotels = [];
                const seenNames = new Set();
                
                console.log('üîç DEBUG: Procesando hoteles del dashboard...');
                hotels.forEach((hotel, index) => {
                    console.log(`üîç DEBUG: Hotel ${index + 1}: ${hotel.name}`);
                    // Verificar si el hotel ya existe por nombre
                    if (!seenNames.has(hotel.name)) {
                        seenNames.add(hotel.name);
                        uniqueHotels.push(hotel);
                        console.log(`‚úÖ Agregando hotel √∫nico: ${hotel.name}`);
                    } else {
                        console.log(`‚ö†Ô∏è Hotel duplicado ignorado: ${hotel.name}`);
                    }
                });
                
                // Crear tarjetas solo para hoteles √∫nicos
                uniqueHotels.forEach((hotel, index) => {
                    const hotelCard = createHotelCard(hotel);
                    hotelsContainer.appendChild(hotelCard);
                });
                
                console.log(`‚úÖ ${uniqueHotels.length} hoteles √∫nicos cargados (${hotels.length - uniqueHotels.length} duplicados eliminados)`);
            } else {
                console.log('‚ÑπÔ∏è No hay hoteles en dashboard, manteniendo hoteles est√°ticos del HTML');
                // Mantener los hoteles est√°ticos del HTML si no hay hoteles en dashboard
            }
            
            // Actualizar el contador de destinos despu√©s de cargar los hoteles
            contarDestinosDisponibles();
            
            console.log(`‚úÖ Total: ${hotelsContainer.children.length} hoteles cargados`);
        }
        
        // Funci√≥n para crear una tarjeta de hotel por defecto
        function createDefaultHotelCard(hotel) {
            const card = document.createElement('div');
            card.className = 'hotel-card-new';
            
            // Solo mostrar 2 amenities principales
            const mainAmenities = hotel.amenities.slice(0, 2).map(amenity => `<span>${amenity}</span>`).join('');
            
            card.innerHTML = `
                <div class="hotel-image-container">
                    <img src="${hotel.image}" alt="${hotel.name}" class="hotel-image">
                    <div class="hotel-badge">${hotel.badge}</div>
                </div>
                <div class="hotel-card-body">
                    <h3>${hotel.name}</h3>
                    <p>${hotel.description}</p>
                    <div class="hotel-features">
                        ${mainAmenities}
                    </div>
                </div>
                <div class="hotel-card-footer">
                    <button class="hotel-btn" onclick="event.stopPropagation(); solicitarCotizacionPromocion('${hotel.name}')">Solicitar Cotizaci√≥n</button>
                    <button class="hotel-details-btn" onclick="event.stopPropagation(); showHotelDetailsModal('default', '${hotel.name}')">Detalles</button>
                </div>
            `;
            
            return card;
        }
        
        // Funci√≥n para crear una tarjeta de hotel
        function createHotelCard(hotel) {
            const card = document.createElement('div');
            card.className = 'hotel-card-new';
            
            // Determinar imagen por defecto basada en amenities
            let defaultImage = 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop';
            let badge = 'Hotel';
            
            if (hotel.amenities && hotel.amenities.length > 0) {
                const amenities = hotel.amenities.join(' ').toLowerCase();
                if (amenities.includes('spa') || amenities.includes('termas')) {
                    defaultImage = 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop';
                    badge = 'Termas';
                } else if (amenities.includes('esqu√≠') || amenities.includes('monta√±a')) {
                    defaultImage = 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop';
                    badge = 'Esqu√≠';
                } else if (amenities.includes('naturaleza') || amenities.includes('bosque')) {
                    defaultImage = 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop';
                    badge = 'Bosque';
                } else if (amenities.includes('lujo') || amenities.includes('5 estrellas')) {
                    defaultImage = 'https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop';
                    badge = 'Lujo';
                }
            }
            
            // Usar imagen del hotel si est√° disponible, sino imagen por defecto
            const imageUrl = hotel.images && hotel.images.length > 0 ? hotel.images[0] : defaultImage;
            
            // Solo mostrar 2 amenities principales
            const mainAmenities = hotel.amenities && hotel.amenities.length > 0 
                ? hotel.amenities.slice(0, 2).map(amenity => `<span>${amenity}</span>`).join('')
                : '<span>üè® Hotel</span><span>üçΩÔ∏è Restaurante</span>';
            
            // Crear informaci√≥n del aeropuerto si est√° disponible
            let airportInfo = '';
            if (hotel.airport) {
                airportInfo = `
                    <div class="hotel-airport-info" style="margin-top: 10px; padding: 8px; background: #f8f9fa; border-radius: 6px; font-size: 0.85rem;">
                        <div style="display: flex; align-items: center; gap: 5px; color: #666;">
                            <span>‚úàÔ∏è</span>
                            <span>${hotel.airport.name} (${hotel.airport.code})</span>
                        </div>
                        <div style="color: #28a745; font-weight: 600; margin-top: 2px;">${hotel.airport.distance} desde ${hotel.airport.city}</div>
                    </div>
                `;
            }
            
            // Comentado: Informaci√≥n de pasos fronterizos removida
            let borderInfo = '';
            // if (hotel.borderCrossing) {
            //     borderInfo = `
            //         <div class="hotel-border-info" style="margin-top: 8px; padding: 8px; background: #fff3cd; border-radius: 6px; font-size: 0.85rem;">
            //             <div style="display: flex; align-items: center; gap: 5px; color: #856404;">
            //                 <span>üõÇ</span>
            //                 <span>${hotel.borderCrossing.name}</span>
            //             </div>
            //             <div style="color: #856404; font-weight: 600; margin-top: 2px;">${hotel.borderCrossing.distance} - ${hotel.borderCrossing.route}</div>
            //         </div>
            //     `;
            // }
            
            card.innerHTML = `
                <div class="hotel-image-container">
                    <img src="${imageUrl}" alt="${hotel.name}" class="hotel-image" onerror="this.src='${defaultImage}'">
                    <div class="hotel-badge">${badge}</div>
                </div>
                <div class="hotel-card-body">
                    <h3>${hotel.name}</h3>
                    <p>${hotel.description || hotel.location}</p>
                    <div class="hotel-features">
                        ${mainAmenities}
                    </div>
                    ${airportInfo}
                    ${borderInfo}
                </div>
                <div class="hotel-card-footer" style="display: flex; gap: 10px; justify-content: space-between;">
                    <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); solicitarCotizacionPromocion('${hotel.name}')">Solicitar Cotizaci√≥n</button>
                    <button class="hotel-btn" style="flex: 1;" onclick="event.stopPropagation(); showHotelDetailsModal('dashboard', '${hotel.id}')">Detalles</button>
                </div>
            `;
            
            return card;
        }
        
        // Funci√≥n para limpiar duplicados en localStorage
        function cleanDuplicateHotels() {
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            if (hotels.length === 0) return;
            
            const uniqueHotels = [];
            const seenNames = new Set();
            let duplicatesRemoved = 0;
            
            hotels.forEach(hotel => {
                if (!seenNames.has(hotel.name)) {
                    seenNames.add(hotel.name);
                    uniqueHotels.push(hotel);
                } else {
                    duplicatesRemoved++;
                }
            });
            
            if (duplicatesRemoved > 0) {
                localStorage.setItem('hotelsDB', JSON.stringify(uniqueHotels));
                console.log(`üßπ Limpieza completada: ${duplicatesRemoved} duplicados eliminados de localStorage`);
            }
        }
        
        // Funci√≥n para actualizar hoteles con informaci√≥n de aeropuertos y pasos fronterizos
        function updateHotelsWithAirportInfo() {
            console.log('‚úàÔ∏è Actualizando hoteles con informaci√≥n de aeropuertos y pasos fronterizos...');
            
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            const updatedHotels = hotels.map(hotel => {
                // Mapeo de aeropuertos por nombre de hotel
                const airportMap = {
                    'Hotel Termas Chill√°n': {
                        name: 'Aeropuerto Carriel Sur',
                        code: 'CCP',
                        distance: '85 km',
                        city: 'Concepci√≥n'
                    },
                    'Hotel Terma de Puyehue': {
                        name: 'Aeropuerto El Tepual',
                        code: 'PMC',
                        distance: '120 km',
                        city: 'Puerto Montt'
                    },
                    'Hotel Huilo-Huilo': {
                        name: 'Aeropuerto Puc√≥n',
                        code: 'ZPC',
                        distance: '45 km',
                        city: 'Puc√≥n'
                    },
                    'Hotel Corralco Resort': {
                        name: 'Aeropuerto La Araucan√≠a',
                        code: 'ZCO',
                        distance: '65 km',
                        city: 'Temuco'
                    },
                    'Hotel Futangue': {
                        name: 'Aeropuerto El Tepual',
                        code: 'PMC',
                        distance: '95 km',
                        city: 'Puerto Montt'
                    },
                    'Caba√±as Termas de Aguas Calientes': {
                        name: 'Aeropuerto El Tepual',
                        code: 'PMC',
                        distance: '85 km',
                        city: 'Puerto Montt'
                    }
                };
                
                // Mapeo de pasos fronterizos por nombre de hotel
                const borderMap = {
                    'Hotel Termas Chill√°n': {
                        name: 'Paso Pehuenche',
                        distance: '120 km',
                        route: 'Ruta CH-115'
                    },
                    'Hotel Terma de Puyehue': {
                        name: 'Paso Cardenal Samor√©',
                        distance: '45 km',
                        route: 'Ruta CH-215'
                    },
                    'Hotel Huilo-Huilo': {
                        name: 'Paso Mamuil Malal',
                        distance: '85 km',
                        route: 'Ruta CH-199'
                    },
                    'Hotel Corralco Resort': {
                        name: 'Paso Icalma',
                        distance: '95 km',
                        route: 'Ruta CH-181'
                    },
                    'Hotel Futangue': {
                        name: 'Paso Cardenal Samor√©',
                        distance: '110 km',
                        route: 'Ruta CH-215'
                    },
                    'Caba√±as Termas de Aguas Calientes': {
                        name: 'Paso Cardenal Samor√©',
                        distance: '35 km',
                        route: 'Ruta CH-215'
                    }
                };
                
                // Agregar informaci√≥n de aeropuerto si no existe
                if (!hotel.airport && airportMap[hotel.name]) {
                    hotel.airport = airportMap[hotel.name];
                    console.log(`‚úÖ Aeropuerto agregado a ${hotel.name}: ${hotel.airport.name}`);
                }
                
                // Agregar informaci√≥n de paso fronterizo si no existe
                if (!hotel.borderCrossing && borderMap[hotel.name]) {
                    hotel.borderCrossing = borderMap[hotel.name];
                    console.log(`üõÇ Paso fronterizo agregado a ${hotel.name}: ${hotel.borderCrossing.name}`);
                }
                
                return hotel;
            });
            
            // Guardar hoteles actualizados en localStorage
            localStorage.setItem('hotelsDB', JSON.stringify(updatedHotels));
            console.log(`‚úÖ ${updatedHotels.length} hoteles actualizados con informaci√≥n de aeropuertos y pasos fronterizos`);
            
            return updatedHotels;
        }
        
        // Funci√≥n para sincronizar con dashboard
        function syncWithDashboard() {
            console.log('üîÑ Sincronizando con dashboard...');
            
            // Limpiar duplicados en localStorage primero
            cleanDuplicateHotels();
            
            // Actualizar hoteles con informaci√≥n de aeropuertos
            updateHotelsWithAirportInfo();
            
            // Cargar hoteles del dashboard
            loadHotelsFromDashboard();
            
            // Actualizar select de hoteles en formularios
            updateHotelSelects();
            
            // Forzar recarga de hoteles para mostrar informaci√≥n de aeropuertos
            setTimeout(() => {
                loadHotelsFromDashboard();
            }, 500);
            
            // Notificar el cambio en el contador
            const destinosCountElement = document.getElementById('destinosCount');
            if (destinosCountElement) {
                const hotelsContainer = document.getElementById('hotels-container');
                const count = hotelsContainer ? hotelsContainer.children.length : 0;
                console.log(`üìä Contador actualizado: ${count} destinos disponibles`);
            }
        }
        
        // Funci√≥n para actualizar selects de hoteles
        function updateHotelSelects() {
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            console.log('üîç DEBUG: Hoteles le√≠dos de localStorage para selects:', hotels);
            console.log('üîç DEBUG: N√∫mero de hoteles en localStorage:', hotels.length);
            
            // Hoteles por defecto para los selects (solo si no hay hoteles en dashboard)
            const defaultHotelOptions = [
                'Hotel Terma de Puyehue',
                'Hotel Huilo-Huilo', 
                'Hotel Corralco Resort',
                'Hotel Futangue',
                'Caba√±as Termas de Aguas Calientes'
            ];
            
            // Funci√≥n para crear opciones √∫nicas
            function createUniqueOptions() {
                const allHotels = new Set();
                const options = [];
                
                console.log('üîç DEBUG: createUniqueOptions - hotels.length:', hotels.length);
                console.log('üîç DEBUG: createUniqueOptions - hotels:', hotels);
                
                // SIEMPRE usar hoteles del dashboard si existen (prioridad absoluta)
                if (hotels.length > 0) {
                    // Usar hoteles del dashboard
                    console.log('üîç DEBUG: Usando hoteles del dashboard para selects');
                    hotels.forEach(hotel => {
                        console.log('üîç DEBUG: Procesando hotel para select:', hotel.name);
                        if (!allHotels.has(hotel.name)) {
                            allHotels.add(hotel.name);
                            options.push(`<option value="${hotel.name}">üè® ${hotel.name}</option>`);
                            console.log('üîç DEBUG: Hotel agregado al select:', hotel.name);
                        } else {
                            console.log('üîç DEBUG: Hotel duplicado ignorado en select:', hotel.name);
                        }
                    });
                    console.log(`‚úÖ Selects actualizados con ${options.length} hoteles √∫nicos del dashboard`);
                } else {
                    // Usar hoteles por defecto solo si no hay hoteles en dashboard
                    console.log('üîç DEBUG: No hay hoteles en dashboard, usando hoteles por defecto');
                    defaultHotelOptions.forEach(hotel => {
                        if (!allHotels.has(hotel)) {
                            allHotels.add(hotel);
                            options.push(`<option value="${hotel}">üè® ${hotel}</option>`);
                        }
                    });
                    console.log(`‚úÖ Selects actualizados con ${defaultHotelOptions.length} hoteles por defecto`);
                }
                
                console.log('üîç DEBUG: Opciones finales creadas para selects:', options.length);
                return options.join('');
            }
            
            const uniqueOptions = createUniqueOptions();
            
            // Actualizar select del modal de cotizaci√≥n
            const modalHotelSelect = document.getElementById('modalHotelSelect');
            if (modalHotelSelect) {
                modalHotelSelect.innerHTML = uniqueOptions;
            }
            
            // Actualizar select r√°pido
            const quickHotelSelect = document.getElementById('quickHotelSelect');
            if (quickHotelSelect) {
                quickHotelSelect.innerHTML = uniqueOptions;
            }
        }
        
        // Escuchar cambios en localStorage
        window.addEventListener('storage', function(e) {
            if (e.key === 'hotelsDB') {
                console.log('üîÑ Cambio detectado en hotelsDB, sincronizando...');
                syncWithDashboard();
            }
        });
        
        // Escuchar actualizaciones del mapa interactivo
        window.addEventListener('hotelsMapUpdated', function(e) {
            console.log('üó∫Ô∏è Actualizando mapa interactivo con nuevos datos:', e.detail);
            if (e.detail && e.detail.coordinates) {
                // Recargar hoteles y actualizar mapa
                loadHotelsForMap();
                if (typeof addHotelMarkers === 'function') {
                    addHotelMarkers();
                }
                console.log(`‚úÖ Mapa actualizado para ${e.detail.hotelName} con coordenadas:`, e.detail.coordinates);
            }
        });
        
        // Funci√≥n para forzar actualizaci√≥n de coordenadas de Caba√±as Termas de Aguas Calientes
        function forceUpdateAguasCalientesCoordinates() {
            console.log('üéØ Forzando actualizaci√≥n de coordenadas de Caba√±as Termas de Aguas Calientes...');
            
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            const updatedHotels = hotels.map(hotel => {
                if (hotel.name === 'Caba√±as Termas de Aguas Calientes') {
                    hotel.coordinates = { lat: -40.735366, lng: -72.307616 };
                    hotel.location = 'Osorno, Los Lagos, Chile';
                    console.log('‚úÖ Coordenadas actualizadas para Caba√±as Termas de Aguas Calientes:', hotel.coordinates);
                }
                return hotel;
            });
            
            localStorage.setItem('hotelsDB', JSON.stringify(updatedHotels));
            console.log('‚úÖ Coordenadas forzadas en localStorage');
            
            // Recargar mapa si est√° abierto
            if (window.map) {
                loadHotelsForMap();
                addHotelMarkers();
            }
        }
        
        // Tambi√©n escuchar cambios en la misma ventana
        window.addEventListener('hotelsDBChanged', function() {
            console.log('üîÑ Evento local detectado, sincronizando...');
            syncWithDashboard();
        });
        
        // Funci√≥n para forzar sincronizaci√≥n desde dashboard
        function forceSyncFromDashboard() {
            console.log('üîÑ Forzando sincronizaci√≥n desde dashboard...');
            
            // Limpiar localStorage para forzar recarga desde dashboard
            localStorage.removeItem('hotelsDB');
            
            // Disparar evento para que dashboard recargue hoteles
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'hotelsDB',
                newValue: null,
                oldValue: localStorage.getItem('hotelsDB')
            }));
            
            // Sincronizar despu√©s de un delay
            setTimeout(() => {
                syncWithDashboard();
            }, 1000);
        }
        
        // Funci√≥n para verificar estado de localStorage
        function checkLocalStorageStatus() {
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            console.log('üîç DEBUG: Estado actual de localStorage:');
            console.log('   üìä N√∫mero de hoteles:', hotels.length);
            console.log('   üìã Nombres de hoteles:', hotels.map(h => h.name));
            return hotels;
        }
        
        // Funci√≥n para forzar carga de hoteles por defecto
        function forceLoadDefaultHotels() {
            console.log('üîÑ Forzando carga de hoteles por defecto...');
            
            // Verificar estado antes de cargar
            console.log('üîç DEBUG: Estado ANTES de cargar hoteles por defecto:');
            checkLocalStorageStatus();
            
            // Hoteles por defecto que deber√≠an estar en dashboard
            const defaultHotels = [
                {
                    id: 'hotel-termas-chillan',
                    name: 'Hotel Termas Chill√°n',
                    location: 'Chill√°n, √ëuble, Chile',
                    description: 'Termas y Spa en la cordillera de Chill√°n',
                    rating: 4.3,
                    price: '$160',
                    status: 'Activo',
                    amenities: ['Termas', 'Spa', 'Restaurante', 'WiFi', 'Estacionamiento'],
                    badge: 'Termas',
                    image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop'
                    ],
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                },
                {
                    id: 'hotel-puyehue',
                    name: 'Hotel Terma de Puyehue',
                    location: 'Osorno, Los Lagos, Chile',
                    description: 'Termas y Spa de lujo en la Patagonia',
                    rating: 4.5,
                    price: '$200',
                    status: 'Activo',
                    amenities: ['Piscina', 'Spa', 'Restaurante', 'WiFi', 'Estacionamiento'],
                    badge: 'Termas',
                    image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop'
                    ],
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                },
                {
                    id: 'hotel-huilo-huilo',
                    name: 'Hotel Huilo-Huilo',
                    location: 'Panguipulli, Los R√≠os, Chile',
                    description: 'Inmersi√≥n en el bosque nativo',
                    rating: 4.2,
                    price: '$160',
                    status: 'Activo',
                    amenities: ['Naturaleza', 'Trekking', 'Aves', 'Restaurante', 'WiFi'],
                    badge: 'Bosque',
                    image: 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop'
                    ],
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                },
                {
                    id: 'hotel-corralco',
                    name: 'Hotel Corralco Resort',
                    location: 'Lonquimay, La Araucan√≠a, Chile',
                    description: 'Esqu√≠ y aventura en la monta√±a',
                    rating: 4.7,
                    price: '$240',
                    status: 'Activo',
                    amenities: ['Esqu√≠', 'Monta√±a', 'Chimenea', 'Restaurante', 'WiFi'],
                    badge: 'Esqu√≠',
                    image: 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop'
                    ],
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                },
                {
                    id: 'hotel-futangue',
                    name: 'Hotel Futangue',
                    location: 'Lago Ranco, Los R√≠os, Chile',
                    description: 'Lujo y naturaleza en su m√°xima expresi√≥n',
                    rating: 5.0,
                    price: '$330',
                    status: 'Activo',
                    amenities: ['5 Estrellas', 'Vinos', 'Piscina', 'Spa', 'Restaurante'],
                    badge: 'Lujo',
                    image: 'https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop'
                    ],
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                },
                {
                    id: 'cabanas-aguas-calientes',
                    name: 'Caba√±as Termas de Aguas Calientes',
                    location: 'Osorno, Los Lagos, Chile',
                    description: 'Aguas Calientes - Experiencia √∫nica',
                    rating: 4.0,
                    price: '$110',
                    status: 'Activo',
                    amenities: ['Caba√±as', 'Termas', 'Naturaleza', 'WiFi', 'Estacionamiento'],
                    badge: 'Caba√±as',
                    image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop'
                    ],
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                }
            ];
            
            // Guardar hoteles por defecto en localStorage
            localStorage.setItem('hotelsDB', JSON.stringify(defaultHotels));
            
            console.log(`‚úÖ ${defaultHotels.length} hoteles por defecto cargados directamente`);
            console.log('üìã Hoteles cargados:', defaultHotels.map(h => h.name));
            
            // Verificar estado despu√©s de cargar
            console.log('üîç DEBUG: Estado DESPU√âS de cargar hoteles por defecto:');
            checkLocalStorageStatus();
            
            // Sincronizar inmediatamente
            syncWithDashboard();
        }
        
        // Cargar hoteles al inicializar la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ P√°gina cargada, iniciando sincronizaci√≥n...');
            
            // Verificar estado inicial
            console.log('üîç DEBUG: Estado INICIAL de localStorage:');
            checkLocalStorageStatus();
            
            // Actualizar hoteles con informaci√≥n de aeropuertos inmediatamente
            updateHotelsWithAirportInfo();
            
            // Cargar hoteles inmediatamente
            syncWithDashboard();
            
            // Tambi√©n despu√©s de un delay para asegurar que todo est√© listo
            setTimeout(() => {
                console.log('üîç DEBUG: Estado despu√©s de primera sincronizaci√≥n:');
                checkLocalStorageStatus();
                updateHotelsWithAirportInfo();
                syncWithDashboard();
            }, 500);
            
            // Forzar sincronizaci√≥n desde dashboard despu√©s de 2 segundos
            setTimeout(() => {
                console.log('üîÑ Forzando sincronizaci√≥n final desde dashboard...');
                updateHotelsWithAirportInfo();
                syncWithDashboard();
                
                // Verificar estado final
                console.log('üîç DEBUG: Estado FINAL despu√©s de sincronizaci√≥n:');
                checkLocalStorageStatus();
            }, 2000);
        });
        
        // ===== FUNCIONES PARA EL MODAL DE DETALLES DEL HOTEL =====
        
        // Funci√≥n para mostrar el modal de detalles del hotel
        function showHotelDetailsModal(type, hotelId) {
            console.log('üè® Mostrando detalles del hotel:', type, hotelId);
            
            const modal = document.getElementById('hotelDetailsModal');
            if (!modal) {
                console.error('‚ùå Modal de detalles no encontrado');
                return;
            }
            
            let hotelData = null;
            
            if (type === 'dashboard') {
                // Buscar hotel en localStorage (hoteles del dashboard)
                const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
                hotelData = hotels.find(h => h.id === hotelId);
                
                if (!hotelData) {
                    console.error('‚ùå Hotel no encontrado en dashboard');
                    return;
                }
            } else if (type === 'default') {
                // Datos de hoteles por defecto
                const defaultHotels = {
                    'Hotel Terma de Puyehue': {
                        name: 'Hotel Terma de Puyehue',
                        description: 'Termas y Spa de lujo en la Patagonia',
                        location: 'Puyehue, Chile',
                        amenities: ['Piscina', 'Spa', 'Restaurante', 'WiFi', 'Estacionamiento'],
                        badge: 'Termas',
                        image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                        rating: 4.5,
                        price: '$150.000',
                        status: 'Activo',
                        images: [
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop'
                        ]
                    },
                    'Hotel Huilo-Huilo': {
                        name: 'Hotel Huilo-Huilo',
                        description: 'Inmersi√≥n en el bosque nativo',
                        location: 'Huilo-Huilo, Chile',
                        amenities: ['Naturaleza', 'Trekking', 'Aves', 'Restaurante', 'WiFi'],
                        badge: 'Bosque',
                        image: 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                        rating: 4.2,
                        price: '$120.000',
                        status: 'Activo',
                        images: [
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop'
                        ]
                    },
                    'Hotel Corralco Resort': {
                        name: 'Hotel Corralco Resort',
                        description: 'Esqu√≠ y aventura en la monta√±a',
                        location: 'Corralco, Chile',
                        amenities: ['Esqu√≠', 'Monta√±a', 'Chimenea', 'Restaurante', 'WiFi'],
                        badge: 'Esqu√≠',
                        image: 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop',
                        rating: 4.7,
                        price: '$180.000',
                        status: 'Activo',
                        images: [
                            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop'
                        ]
                    },
                    'Hotel Futangue': {
                        name: 'Hotel Futangue',
                        description: 'Lujo y naturaleza en su m√°xima expresi√≥n',
                        location: 'Futangue, Chile',
                        amenities: ['5 Estrellas', 'Vinos', 'Piscina', 'Spa', 'Restaurante'],
                        badge: 'Lujo',
                        image: 'https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop',
                        rating: 5.0,
                        price: '$250.000',
                        status: 'Activo',
                        images: [
                            'https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop'
                        ]
                    },
                    'Hotel Termas Chill√°n': {
                        name: 'Hotel Termas Chill√°n',
                        description: 'Hotel incre√≠ble con ski y termas',
                        location: 'Chill√°n, Chile',
                        amenities: ['Ski', 'Termas', 'Spa', 'Restaurante', 'WiFi', 'Estacionamiento'],
                        badge: 'Termas',
                        image: 'https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop',
                        rating: 4.3,
                        price: '$140.000',
                        status: 'Activo',
                        images: [
                            'https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop'
                        ]
                    },
                    'Caba√±as Termas de Aguas Calientes': {
                        name: 'Caba√±as Termas de Aguas Calientes',
                        description: 'Aguas Calientes - Experiencia √∫nica',
                        location: 'Aguas Calientes, Chile',
                        amenities: ['Caba√±as', 'Termas', 'Naturaleza', 'WiFi', 'Estacionamiento'],
                        badge: 'Caba√±as',
                        image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                        rating: 4.0,
                        price: '$80.000',
                        status: 'Activo',
                        images: [
                            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=200&fit=crop',
                            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=200&fit=crop'
                        ]
                    }
                };
                
                hotelData = defaultHotels[hotelId];
                if (!hotelData) {
                    console.error('‚ùå Hotel por defecto no encontrado:', hotelId);
                    return;
                }
            }
            
            // Llenar el modal con los datos del hotel
            fillHotelDetailsModal(hotelData);
            
            // Mostrar el modal
            modal.style.display = 'block';
        }
        
        // Funci√≥n para llenar el modal con los datos del hotel
        function fillHotelDetailsModal(hotel) {
            // Informaci√≥n b√°sica
            document.getElementById('modalDetailHotelName').textContent = hotel.name;
            document.getElementById('modalDetailHotelLocation').textContent = hotel.location || '';
            document.getElementById('modalDetailHotelRating').textContent = hotel.rating ? `${hotel.rating} ‚≠ê` : 'No especificada';
            document.getElementById('modalDetailHotelPrice').textContent = hotel.price || 'No especificado';
            document.getElementById('modalDetailHotelStatus').textContent = hotel.status || 'Activo';
            document.getElementById('modalDetailHotelDescription').textContent = hotel.description || '';
            
            // Amenities
            const amenitiesText = hotel.amenities && hotel.amenities.length > 0 
                ? hotel.amenities.join(', ')
                : 'No especificadas';
            document.getElementById('modalDetailHotelAmenities').textContent = amenitiesText;
            
            // Galer√≠a de im√°genes
            const imagesContainer = document.getElementById('modalDetailHotelImages');
            imagesContainer.innerHTML = '';
            
            if (hotel.images && hotel.images.length > 0) {
                hotel.images.forEach((imageUrl, index) => {
                    const img = document.createElement('img');
                    img.src = imageUrl;
                    img.alt = `${hotel.name} - Imagen ${index + 1}`;
                    img.onclick = () => openImageLightbox(imageUrl, hotel.name);
                    imagesContainer.appendChild(img);
                });
            } else {
                // Imagen por defecto si no hay galer√≠a
                const img = document.createElement('img');
                img.src = hotel.image || 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=200&fit=crop';
                img.alt = hotel.name;
                img.onclick = () => openImageLightbox(img.src, hotel.name);
                imagesContainer.appendChild(img);
            }
        }
        
        // Funci√≥n para cerrar el modal de detalles
        function closeHotelDetailsModal() {
            const modal = document.getElementById('hotelDetailsModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // Funci√≥n para abrir lightbox de imagen
        function openImageLightbox(imageUrl, hotelName) {
            // Crear lightbox din√°micamente
            const lightbox = document.createElement('div');
            lightbox.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                cursor: pointer;
            `;
            
            const img = document.createElement('img');
            img.src = imageUrl;
            img.alt = hotelName;
            img.style.cssText = `
                max-width: 90%;
                max-height: 90%;
                object-fit: contain;
                border-radius: 10px;
            `;
            
            lightbox.appendChild(img);
            document.body.appendChild(lightbox);
            
            // Cerrar al hacer clic
            lightbox.onclick = () => {
                document.body.removeChild(lightbox);
            };
        }

        // Funci√≥n para forzar actualizaci√≥n de coordenadas y aeropuertos de todos los hoteles
        function forceUpdateAllHotelCoordinates() {
            console.log('üéØ Forzando actualizaci√≥n de coordenadas y aeropuertos de todos los hoteles...');
            
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            const updatedHotels = hotels.map(hotel => {
                // Hotel Termas Chill√°n
                if (hotel.name === 'Hotel Termas Chill√°n') {
                    hotel.coordinates = { lat: -36.6064, lng: -71.2167 };
                    hotel.location = 'Chill√°n, √ëuble, Chile';
                    hotel.airport = {
                        name: 'Aeropuerto Carriel Sur',
                        code: 'CCP',
                        distance: '85 km',
                        city: 'Concepci√≥n'
                    };
                    hotel.borderCrossing = {
                        name: 'Paso Pehuenche',
                        distance: '120 km',
                        route: 'Ruta CH-115'
                    };
                    console.log('‚úÖ Datos actualizados para Hotel Termas Chill√°n');
                }
                // Hotel Terma de Puyehue
                else if (hotel.name === 'Hotel Terma de Puyehue') {
                    hotel.coordinates = { lat: -40.683222, lng: -72.274986 };
                    hotel.location = 'Osorno, Los Lagos, Chile';
                    hotel.airport = {
                        name: 'Aeropuerto Ca√±al Bajo Carlos Hott Siebert',
                        code: 'ZOS',
                        distance: '45 km',
                        city: 'Osorno'
                    };
                    hotel.borderCrossing = {
                        name: 'Paso Cardenal Samor√©',
                        distance: '45 km',
                        route: 'Ruta CH-215'
                    };
                    console.log('‚úÖ Datos actualizados para Hotel Terma de Puyehue');
                }
                // Hotel Huilo-Huilo
                else if (hotel.name === 'Hotel Huilo-Huilo') {
                    hotel.coordinates = { lat: -39.8500, lng: -72.0000 };
                    hotel.location = 'Panguipulli, Los R√≠os, Chile';
                    hotel.airport = {
                        name: 'Aeropuerto Puc√≥n',
                        code: 'ZPC',
                        distance: '45 km',
                        city: 'Puc√≥n'
                    };
                    hotel.borderCrossing = {
                        name: 'Paso Mamuil Malal',
                        distance: '85 km',
                        route: 'Ruta CH-199'
                    };
                    console.log('‚úÖ Datos actualizados para Hotel Huilo-Huilo');
                }
                // Hotel Corralco Resort
                else if (hotel.name === 'Hotel Corralco Resort') {
                    hotel.coordinates = { lat: -38.6500, lng: -71.6500 };
                    hotel.location = 'Lonquimay, La Araucan√≠a, Chile';
                    hotel.airport = {
                        name: 'Aeropuerto La Araucan√≠a',
                        code: 'ZCO',
                        distance: '65 km',
                        city: 'Temuco'
                    };
                    hotel.borderCrossing = {
                        name: 'Paso Icalma',
                        distance: '95 km',
                        route: 'Ruta CH-181'
                    };
                    console.log('‚úÖ Datos actualizados para Hotel Corralco Resort');
                }
                // Hotel Futangue
                else if (hotel.name === 'Hotel Futangue') {
                    hotel.coordinates = { lat: -40.3500, lng: -72.4500 };
                    hotel.location = 'Lago Ranco, Los R√≠os, Chile';
                    hotel.airport = {
                        name: 'Aeropuerto Ca√±al Bajo Carlos Hott Siebert',
                        code: 'ZOS',
                        distance: '75 km',
                        city: 'Osorno'
                    };
                    hotel.borderCrossing = {
                        name: 'Paso Cardenal Samor√©',
                        distance: '110 km',
                        route: 'Ruta CH-215'
                    };
                    console.log('‚úÖ Datos actualizados para Hotel Futangue');
                }
                // Caba√±as Termas de Aguas Calientes
                else if (hotel.name === 'Caba√±as Termas de Aguas Calientes') {
                    hotel.coordinates = { lat: -40.735366, lng: -72.307616 };
                    hotel.location = 'Osorno, Los Lagos, Chile';
                    hotel.airport = {
                        name: 'Aeropuerto Ca√±al Bajo Carlos Hott Siebert',
                        code: 'ZOS',
                        distance: '25 km',
                        city: 'Osorno'
                    };
                    hotel.borderCrossing = {
                        name: 'Paso Cardenal Samor√©',
                        distance: '35 km',
                        route: 'Ruta CH-215'
                    };
                    console.log('‚úÖ Datos actualizados para Caba√±as Termas de Aguas Calientes');
                }
                return hotel;
            });
            
            localStorage.setItem('hotelsDB', JSON.stringify(updatedHotels));
            console.log('‚úÖ Datos forzados en localStorage para todos los hoteles');
            
            // Recargar mapa si est√° abierto
            if (window.map) {
                loadHotelsForMap();
                addHotelMarkers();
            }
            
            // Recargar hoteles en la p√°gina
            loadHotelsFromDashboard();
        }

        document.addEventListener('DOMContentLoaded', function() {
            // ... existing code ...
            setTimeout(() => {
                forceUpdateAllHotelCoordinates();
            }, 1000);
        });
    </script>
    
    <!-- Modal de Detalles del Hotel -->
    <div id="hotelDetailsModal" class="modal">
                        <div class="modal-content" style="max-width: 700px; padding: 0; border-radius: 15px;">
            <span class="close-button" onclick="closeHotelDetailsModal()" style="position: absolute; top: 15px; right: 20px; font-size: 30px; color: #aaa; cursor: pointer; z-index: 1001;">&times;</span>
            
            <div class="modal-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-top-left-radius: 15px; border-top-right-radius: 15px;">
                <h2 id="modalDetailHotelName" style="margin: 0; font-size: 1.8rem; font-weight: 600;">Nombre del Hotel</h2>
                <p id="modalDetailHotelLocation" style="margin: 8px 0 0; font-size: 1rem; opacity: 0.9;">Ubicaci√≥n</p>
            </div>
            
            <div class="modal-body" style="padding: 25px;">
                <!-- Galer√≠a de Im√°genes -->
                <div style="margin-bottom: 25px;">
                    <h3 style="margin: 0 0 15px 0; color: #333; font-size: 1.2rem;">üì∏ Galer√≠a de Im√°genes</h3>
                    <div class="image-gallery" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;" id="modalDetailHotelImages">
                        <!-- Las im√°genes se cargar√°n aqu√≠ din√°micamente -->
                    </div>
                </div>
                
                <!-- Informaci√≥n Detallada -->
                <div class="hotel-details-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 25px;">
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #333; font-size: 1.2rem;">üìä Informaci√≥n General</h3>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                            <p style="margin: 0 0 10px 0; font-size: 1rem;"><strong>‚≠ê Calificaci√≥n:</strong> <span id="modalDetailHotelRating" style="color: #667eea;"></span></p>
                            <p style="margin: 0 0 10px 0; font-size: 1rem;"><strong>üí∞ Precio por Noche:</strong> <span id="modalDetailHotelPrice" style="color: #28a745; font-weight: 600;"></span></p>
                            <p style="margin: 0 0 10px 0; font-size: 1rem;"><strong>üìã Estado:</strong> <span id="modalDetailHotelStatus" style="color: #20c997;"></span></p>
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #333; font-size: 1.2rem;">üè® Servicios y Amenities</h3>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                            <p style="margin: 0 0 10px 0; font-size: 1rem;"><strong>üéØ Amenities:</strong></p>
                            <p style="margin: 0 0 15px 0; font-size: 0.95rem; color: #666; line-height: 1.5;" id="modalDetailHotelAmenities"></p>
                            <p style="margin: 0 0 10px 0; font-size: 1rem;"><strong>üìù Descripci√≥n:</strong></p>
                            <p style="margin: 0; font-size: 0.95rem; color: #666; line-height: 1.5;" id="modalDetailHotelDescription"></p>
                        </div>
                    </div>
                </div>
                
                <!-- Bot√≥n de Acci√≥n -->
                <div style="text-align: center; margin-top: 25px;">
                    <button class="form-button" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 30px; font-size: 1.1rem; border-radius: 25px;" onclick="solicitarCotizacionPromocion(document.getElementById('modalDetailHotelName').innerText)">
                        üè® Solicitar Cotizaci√≥n
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <style>
        /* Estilos para el modal de detalles del hotel */
        #hotelDetailsModal .modal-content {
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeInScale 0.3s ease-out;
        }
        
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .image-gallery img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .image-gallery img:hover {
            transform: scale(1.05);
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .hotel-details-grid p {
            margin-bottom: 8px;
            font-size: 0.95em;
            color: #444;
        }
        
        .hotel-details-grid strong {
            color: #222;
        }
        
        /* Responsive para el modal */
        @media (max-width: 768px) {
            #hotelDetailsModal .modal-content {
                margin: 10px;
                max-width: calc(100% - 20px);
            }
            
            .hotel-details-grid {
                grid-template-columns: 1fr !important;
            }
            
            .image-gallery {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)) !important;
            }
        }
    </style>
    
    <!-- Modal del Mapa Interactivo -->
    <div id="interactiveMapModal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8);">
                        <div class="modal-content" style="background-color: white; margin: 2% auto; padding: 0; border-radius: 15px; width: 90%; max-width: 900px; height: 85%; max-height: 700px; position: relative; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            <!-- Header del Modal -->
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px 25px; border-bottom: 2px solid #f0f0f0; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 15px 15px 0 0;">
                <h2 style="margin: 0; font-size: 1.5rem; font-weight: 600;">üó∫Ô∏è Mapa Interactivo de Hoteles</h2>
                <button onclick="closeInteractiveMap()" style="background: none; border: none; color: white; font-size: 1.8rem; cursor: pointer; padding: 5px; border-radius: 50%; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='none'">√ó</button>
            </div>
            
            <!-- Contenido del Modal -->
            <div style="height: calc(100% - 80px);">
                <!-- Mapa -->
                <div style="width: 100%; height: 100%; position: relative;">
                    <div id="interactiveMap" style="width: 100%; height: 100%; border-radius: 0 0 15px 0;"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Variables globales para el mapa
        let map;
        let mapMarkers = [];
        let allHotels = [];
        
        // Funci√≥n para mostrar el mapa interactivo
        function showInteractiveMap() {
            console.log('üó∫Ô∏è Abriendo mapa interactivo...');
            
            // Mostrar modal
            document.getElementById('interactiveMapModal').style.display = 'block';
            
            // Limpiar mapa existente si hay uno
            if (window.map) {
                window.map.remove();
                window.map = null;
                window.mapMarkers = [];
            }
            
            // Inicializar mapa despu√©s de un peque√±o delay para asegurar que el modal est√© visible
            setTimeout(() => {
                initInteractiveMap();
            }, 100);
        }
        
        // Funci√≥n para cerrar el mapa interactivo
        function closeInteractiveMap() {
            console.log('üó∫Ô∏è Cerrando mapa interactivo...');
            document.getElementById('interactiveMapModal').style.display = 'none';
            
            // Limpiar mapa si existe
            if (map) {
                map.remove();
                map = null;
                mapMarkers = [];
            }
        }
        
        // Funci√≥n para inicializar el mapa interactivo
        function initInteractiveMap() {
            console.log('üó∫Ô∏è Inicializando mapa interactivo...');
            
            // Cargar hoteles desde localStorage
            loadHotelsForMap();
            
            // Crear mapa centrado en Chile
            map = L.map('interactiveMap').setView([-35.6751, -71.5430], 6);
            
            // Agregar capa de mapa con mejor contraste y legibilidad
            L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
                attribution: '¬© Esri ¬© OpenStreetMap contributors',
                maxZoom: 19
            }).addTo(map);
            
            // Agregar marcadores de hoteles
            addHotelMarkers();
            
            // Actualizar estad√≠sticas
            updateMapStats();
        }
        
        // Funci√≥n para extraer coordenadas de URL de Google Maps
        function extractCoordinatesFromGoogleMaps(url) {
            if (!url) return null;
            
            try {
                // Patr√≥n 1: URL con coordenadas directas
                // https://maps.google.com/?q=-36.6064,-71.2167
                const coordPattern1 = /q=(-?\d+\.\d+),(-?\d+\.\d+)/;
                const match1 = url.match(coordPattern1);
                if (match1) {
                    return {
                        lat: parseFloat(match1[1]),
                        lng: parseFloat(match1[2])
                    };
                }
                
                // Patr√≥n 2: URL con coordenadas en formato @lat,lng
                // https://maps.google.com/?q=Hotel+Termas+Chill√°n@-36.6064,-71.2167
                const coordPattern2 = /@(-?\d+\.\d+),(-?\d+\.\d+)/;
                const match2 = url.match(coordPattern2);
                if (match2) {
                    return {
                        lat: parseFloat(match2[1]),
                        lng: parseFloat(match2[2])
                    };
                }
                
                // Patr√≥n 3: URL con coordenadas en formato ll=lat,lng
                // https://maps.google.com/?ll=-36.6064,-71.2167
                const coordPattern3 = /ll=(-?\d+\.\d+),(-?\d+\.\d+)/;
                const match3 = url.match(coordPattern3);
                if (match3) {
                    return {
                        lat: parseFloat(match3[1]),
                        lng: parseFloat(match3[2])
                    };
                }
                
                // Patr√≥n 4: URLs modernas de Google Maps (maps.app.goo.gl)
                // https://maps.app.goo.gl/cxC7gREKNFuoiuj4A
                if (url.includes('maps.app.goo.gl') || url.includes('goo.gl/maps')) {
                    console.log('üåê URL moderna de Google Maps detectada, usando coordenadas por defecto...');
                    return null; // Retornamos null para usar coordenadas por defecto
                }
                
                // Patr√≥n 5: URLs con coordenadas en formato decimal
                // https://maps.google.com/?q=-36.6064,-71.2167&z=15
                const coordPattern5 = /[?&]q=(-?\d+\.\d+),(-?\d+\.\d+)/;
                const match5 = url.match(coordPattern5);
                if (match5) {
                    return {
                        lat: parseFloat(match5[1]),
                        lng: parseFloat(match5[2])
                    };
                }
                
                console.log('‚ö†Ô∏è No se pudieron extraer coordenadas de la URL:', url);
                return null;
            } catch (error) {
                console.error('‚ùå Error al extraer coordenadas:', error);
                return null;
            }
        }
        
        // Funci√≥n para cargar hoteles para el mapa
        function loadHotelsForMap() {
            console.log('üè® Cargando hoteles para el mapa...');
            
            const hotels = JSON.parse(localStorage.getItem('hotelsDB') || '[]');
            
            if (hotels.length > 0) {
                // Asegurar que todos los hoteles tengan coordenadas
                allHotels = hotels.map(hotel => {
                    // Priorizar coordenadas de Google Maps si est√°n disponibles
                    if (hotel.googleMaps) {
                        const extractedCoords = extractCoordinatesFromGoogleMaps(hotel.googleMaps);
                        if (extractedCoords && extractedCoords.lat && extractedCoords.lng) {
                            hotel.coordinates = extractedCoords;
                            console.log(`‚úÖ Coordenadas extra√≠das de Google Maps para ${hotel.name}:`, extractedCoords);
                        }
                    }
                    
                    // Si no hay coordenadas, usar las por defecto
                    if (!hotel.coordinates) {
                        // Asignar coordenadas seg√∫n el nombre del hotel
                        const coordinatesMap = {
                            'Hotel Termas Chill√°n': { lat: -36.6064, lng: -71.2167 },
                            'Hotel Terma de Puyehue': { lat: -40.6500, lng: -72.6167 },
                            'Hotel Huilo-Huilo': { lat: -39.8500, lng: -71.9000 },
                            'Hotel Corralco Resort': { lat: -38.6500, lng: -71.6500 },
                            'Hotel Futangue': { lat: -40.3500, lng: -72.4500 },
                            'Caba√±as Termas de Aguas Calientes': { lat: -40.735366, lng: -72.307616 }
                        };
                        
                        hotel.coordinates = coordinatesMap[hotel.name] || { lat: -35.6751, lng: -71.5430 };
                        console.log(`üìç Usando coordenadas por defecto para ${hotel.name}:`, hotel.coordinates);
                    }
                    
                    // Forzar coordenadas correctas para Caba√±as Termas de Aguas Calientes
                    if (hotel.name === 'Caba√±as Termas de Aguas Calientes') {
                        hotel.coordinates = { lat: -40.735366, lng: -72.307616 };
                        console.log(`üéØ Forzando coordenadas correctas para Caba√±as Termas de Aguas Calientes:`, hotel.coordinates);
                    }
                    
                    return hotel;
                });
                console.log(`‚úÖ ${hotels.length} hoteles cargados desde localStorage con coordenadas`);
            } else {
                // Hoteles por defecto si no hay en localStorage
                allHotels = [
                    {
                        name: 'Hotel Termas Chill√°n',
                        location: 'Chill√°n, √ëuble, Chile',
                        description: 'Termas y Spa en la cordillera de Chill√°n',
                        rating: 4.3,
                        price: '$160',
                        badge: 'Termas',
                        coordinates: { lat: -36.6064, lng: -71.2167 }
                    },
                    {
                        name: 'Hotel Terma de Puyehue',
                        location: 'Osorno, Los Lagos, Chile',
                        description: 'Termas y Spa de lujo en la Patagonia',
                        rating: 4.5,
                        price: '$200',
                        badge: 'Termas',
                        coordinates: { lat: -40.683222, lng: -72.274986 }
                    },
                    {
                        name: 'Hotel Huilo-Huilo',
                        location: 'Panguipulli, Los R√≠os, Chile',
                        description: 'Inmersi√≥n en el bosque nativo',
                        rating: 4.2,
                        price: '$160',
                        badge: 'Bosque',
                        coordinates: { lat: -39.8500, lng: -72.0000 }
                    },
                    {
                        name: 'Hotel Corralco Resort',
                        location: 'Lonquimay, La Araucan√≠a, Chile',
                        description: 'Esqu√≠ y aventura en la monta√±a',
                        rating: 4.7,
                        price: '$240',
                        badge: 'Esqu√≠',
                        coordinates: { lat: -38.6500, lng: -71.6500 }
                    },
                    {
                        name: 'Hotel Futangue',
                        location: 'Lago Ranco, Los R√≠os, Chile',
                        description: 'Lujo y naturaleza en su m√°xima expresi√≥n',
                        rating: 5.0,
                        price: '$330',
                        badge: 'Lujo',
                        coordinates: { lat: -40.3500, lng: -72.4500 }
                    },
                    {
                        name: 'Caba√±as Termas de Aguas Calientes',
                        location: 'Osorno, Los Lagos, Chile',
                        description: 'Aguas Calientes - Experiencia √∫nica',
                        rating: 4.0,
                        price: '$110',
                        badge: 'Caba√±as',
                        coordinates: { lat: -40.735366, lng: -72.307616 }
                    }
                ];
                console.log(`‚úÖ ${allHotels.length} hoteles por defecto cargados`);
            }
            
            console.log(`‚úÖ ${allHotels.length} hoteles cargados para el mapa`);
        }
        
        // Funci√≥n para agregar marcadores de hoteles al mapa
        function addHotelMarkers() {
            console.log('üìç Agregando marcadores de hoteles...');
            
            // Limpiar marcadores existentes
            mapMarkers.forEach(marker => map.removeLayer(marker));
            mapMarkers = [];
            
            // Crear iconos personalizados seg√∫n el tipo de hotel
            const iconTypes = {
                'Termas': L.divIcon({
                    html: 'üè®',
                    className: 'custom-div-icon',
                    iconSize: [30, 30],
                    iconAnchor: [15, 30]
                }),
                'Bosque': L.divIcon({
                    html: 'üå≤',
                    className: 'custom-div-icon',
                    iconSize: [30, 30],
                    iconAnchor: [15, 30]
                }),
                'Esqu√≠': L.divIcon({
                    html: '‚õ∑Ô∏è',
                    className: 'custom-div-icon',
                    iconSize: [30, 30],
                    iconAnchor: [15, 30]
                }),
                'Lujo': L.divIcon({
                    html: 'üåü',
                    className: 'custom-div-icon',
                    iconSize: [30, 30],
                    iconAnchor: [15, 30]
                }),
                'Caba√±as': L.divIcon({
                    html: 'üè°',
                    className: 'custom-div-icon',
                    iconSize: [30, 30],
                    iconAnchor: [15, 30]
                })
            };
            
            // Agregar marcadores para cada hotel
            allHotels.forEach((hotel, index) => {
                if (hotel.coordinates) {
                    const icon = iconTypes[hotel.badge] || iconTypes['Termas'];
                    
                    const marker = L.marker([hotel.coordinates.lat, hotel.coordinates.lng], { icon: icon })
                        .addTo(map)
                        .bindPopup(createHotelPopup(hotel))
                        .bindTooltip(hotel.name, {
                            permanent: false,
                            direction: 'top',
                            className: 'hotel-tooltip',
                            offset: [0, -10]
                        });
                    
                    mapMarkers.push(marker);
                    
                    // Agregar evento de clic para centrar en el hotel
                    marker.on('click', function() {
                        map.setView([hotel.coordinates.lat, hotel.coordinates.lng], 12);
                    });
                }
            });
            
            console.log(`‚úÖ ${mapMarkers.length} marcadores agregados al mapa`);
        }
        
        // Funci√≥n para crear el contenido del popup
        function createHotelPopup(hotel) {
            return `
                <div style="min-width: 250px; padding: 10px;">
                    <h3 style="margin: 0 0 10px 0; color: #333; font-size: 1.1rem;">${hotel.name}</h3>
                    <p style="margin: 0 0 8px 0; color: #666; font-size: 0.9rem;">${hotel.location}</p>
                    <p style="margin: 0 0 10px 0; color: #333; font-size: 0.9rem;">${hotel.description}</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span style="background: #667eea; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem;">${hotel.badge}</span>
                        <span style="color: #28a745; font-weight: 600; font-size: 1rem;">${hotel.price}</span>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: 10px;">
                        <span style="color: #ffc107; font-size: 1.1rem;">‚≠ê</span>
                        <span style="margin-left: 5px; color: #666; font-size: 0.9rem;">${hotel.rating}</span>
                    </div>
                    <button onclick="solicitarCotizacionPromocion('${hotel.name}')" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 0.9rem; cursor: pointer; width: 100%;">Solicitar Cotizaci√≥n</button>
                </div>
            `;
        }
        
        // Funci√≥n para actualizar estad√≠sticas del mapa
        function updateMapStats() {
            const totalHotels = allHotels.length;
            const visibleHotels = mapMarkers.length;
            
            console.log(`üìä Estad√≠sticas del mapa: ${visibleHotels}/${totalHotels} hoteles visibles`);
        }
        
        // Variables para el carrusel de hoteles
        let currentHotelIndex = 0;
        let totalHotels = 0;
        let isDragging = false;
        let startPos = 0;
        let currentTranslate = 0;
        let prevTranslate = 0;
        let animationID = 0;
        let currentIndex = 0;
        
        // Funci√≥n para desplazar el carrusel de hoteles
        function scrollHotels(direction) {
            const carousel = document.getElementById('hotels-carousel');
            const hotelCards = carousel.querySelectorAll('.hotel-card-new');
            const cardWidth = hotelCards[0].offsetWidth + 20; // Ancho de la tarjeta + gap
            
            if (direction === 'right' && currentHotelIndex < hotelCards.length - 2) {
                currentHotelIndex++;
            } else if (direction === 'left' && currentHotelIndex > 0) {
                currentHotelIndex--;
            }
            
            const translateX = -currentHotelIndex * cardWidth;
            carousel.style.transform = `translateX(${translateX}px)`;
            
            // Actualizar visibilidad de botones
            updateCarouselButtons();
        }
        
        // Funci√≥n para actualizar visibilidad de botones del carrusel
        function updateCarouselButtons() {
            const prevBtn = document.getElementById('prevHotelBtn');
            const nextBtn = document.getElementById('nextHotelBtn');
            const carousel = document.getElementById('hotels-carousel');
            const hotelCards = carousel.querySelectorAll('.hotel-card-new');
            
            if (prevBtn && nextBtn) {
                prevBtn.style.display = currentHotelIndex > 0 ? 'flex' : 'none';
                nextBtn.style.display = currentHotelIndex < hotelCards.length - 2 ? 'flex' : 'none';
            }
        }
        
        // Funci√≥n para obtener posici√≥n del evento (mouse o touch)
        function getPositionX(event) {
            return event.type.includes('mouse') ? event.pageX : event.touches[0].clientX;
        }
        
        // Funci√≥n para prevenir comportamiento por defecto
        function preventDefault(e) {
            e.preventDefault();
        }
        
        // Funci√≥n para iniciar el drag
        function dragStart(event) {
            const carousel = document.getElementById('hotels-carousel');
            if (!carousel) return;
            
            isDragging = true;
            startPos = getPositionX(event);
            animationID = requestAnimationFrame(animation);
            carousel.style.cursor = 'grabbing';
            carousel.style.userSelect = 'none';
        }
        
        // Funci√≥n para el drag
        function drag(event) {
            if (!isDragging) return;
            
            const carousel = document.getElementById('hotels-carousel');
            if (!carousel) return;
            
            const currentPosition = getPositionX(event);
            const diff = currentPosition - startPos;
            const cardWidth = carousel.querySelector('.hotel-card-new').offsetWidth + 20;
            
            currentTranslate = prevTranslate + diff;
            
            // Limitar el desplazamiento
            const maxTranslate = -(carousel.querySelectorAll('.hotel-card-new').length - 2) * cardWidth;
            currentTranslate = Math.max(maxTranslate, Math.min(0, currentTranslate));
            
            carousel.style.transform = `translateX(${currentTranslate}px)`;
        }
        
        // Funci√≥n para terminar el drag
        function dragEnd() {
            if (!isDragging) return;
            
            const carousel = document.getElementById('hotels-carousel');
            if (!carousel) return;
            
            isDragging = false;
            cancelAnimationFrame(animationID);
            carousel.style.cursor = 'grab';
            carousel.style.userSelect = 'auto';
            
            const cardWidth = carousel.querySelector('.hotel-card-new').offsetWidth + 20;
            const movedBy = currentTranslate - prevTranslate;
            
            // Determinar si debe cambiar de tarjeta
            if (Math.abs(movedBy) > cardWidth / 3) {
                if (movedBy < 0 && currentIndex < carousel.querySelectorAll('.hotel-card-new').length - 2) {
                    currentIndex++;
                } else if (movedBy > 0 && currentIndex > 0) {
                    currentIndex--;
                }
            }
            
            // Animar al √≠ndice correcto
            const finalTranslate = -currentIndex * cardWidth;
            carousel.style.transition = 'transform 0.3s ease';
            carousel.style.transform = `translateX(${finalTranslate}px)`;
            
            currentTranslate = finalTranslate;
            prevTranslate = finalTranslate;
            currentHotelIndex = currentIndex;
            
            // Actualizar botones
            updateCarouselButtons();
            
            // Remover transici√≥n despu√©s de la animaci√≥n
            setTimeout(() => {
                carousel.style.transition = '';
            }, 300);
        }
        
        // Funci√≥n de animaci√≥n
        function animation() {
            // Esta funci√≥n se ejecuta en cada frame durante el drag
            animationID = requestAnimationFrame(animation);
        }
        
        // Inicializar carrusel
        function initHotelCarousel() {
            const carousel = document.getElementById('hotels-carousel');
            if (carousel) {
                const hotelCards = carousel.querySelectorAll('.hotel-card-new');
                totalHotels = hotelCards.length;
                updateCarouselButtons();
                
                // Hacer las tarjetas del mismo ancho
                hotelCards.forEach(card => {
                    card.style.minWidth = '300px';
                    card.style.flexShrink = '0';
                });
                
                // Agregar eventos de mouse
                carousel.addEventListener('mousedown', dragStart);
                carousel.addEventListener('mousemove', drag);
                carousel.addEventListener('mouseup', dragEnd);
                carousel.addEventListener('mouseleave', dragEnd);
                
                // Agregar eventos de touch
                carousel.addEventListener('touchstart', dragStart, { passive: false });
                carousel.addEventListener('touchmove', drag, { passive: false });
                carousel.addEventListener('touchend', dragEnd);
                
                // Prevenir comportamiento por defecto en touch
                carousel.addEventListener('touchstart', preventDefault, { passive: false });
                carousel.addEventListener('touchmove', preventDefault, { passive: false });
                
                // Estilo inicial
                carousel.style.cursor = 'grab';
            }
        }
        
        // Cerrar modal al hacer clic fuera
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('interactiveMapModal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeInteractiveMap();
                    }
                });
            }
            
            // Inicializar carrusel de hoteles
            initHotelCarousel();
            
            // Forzar actualizaci√≥n de coordenadas de Caba√±as Termas de Aguas Calientes
            setTimeout(() => {
                forceUpdateAguasCalientesCoordinates();
            }, 1000);
        });
    </script>
    
    <style>
        /* Estilos para el mapa interactivo */
        .custom-div-icon {
            background: none;
            border: none;
            font-size: 24px;
            text-align: center;
        }
        
        /* Estilos para el mapa interactivo */
        .custom-div-icon {
            filter: none !important;
        }
        
        /* Estilos para el tooltip personalizado */
        .hotel-tooltip {
            background: rgba(0, 0, 0, 0.8) !important;
            color: white !important;
            border: none !important;
            border-radius: 6px !important;
            padding: 8px 12px !important;
            font-size: 0.9rem !important;
            font-weight: 600 !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
        }
        
        .hotel-tooltip::before {
            border-top-color: rgba(0, 0, 0, 0.8) !important;
        }
        
        #interactiveMapModal .modal-content {
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeInScale 0.3s ease-out;
        }
        
        #mapHotelsList > div:hover {
            background: #f0f8ff !important;
        }
        
        /* Responsive para el modal del mapa */
        @media (max-width: 768px) {
            #interactiveMapModal .modal-content {
                margin: 10px;
                width: calc(100% - 20px);
                height: calc(100% - 20px);
            }
            
            #interactiveMapModal .modal-content > div {
                flex-direction: column;
            }
            
            #interactiveMapModal .modal-content > div > div:first-child {
                width: 100%;
                height: 200px;
                border-right: none;
                border-bottom: 2px solid #f0f0f0;
            }
        }
        
        /* Estilos para el carrusel de hoteles */
        #hotels-carousel {
            scroll-behavior: smooth;
            cursor: grab;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        #hotels-carousel:active {
            cursor: grabbing;
        }
        
        #hotels-carousel .hotel-card-new {
            transition: transform 0.3s ease;
            pointer-events: none;
        }
        
        #hotels-carousel .hotel-card-new:hover {
            transform: translateY(-5px);
        }
        
        #hotels-carousel .hotel-card-new button {
            pointer-events: auto;
        }
        
        /* Botones del carrusel */
        #prevHotelBtn, #nextHotelBtn {
            transition: all 0.3s ease;
        }
        
        #prevHotelBtn:hover, #nextHotelBtn:hover {
            background: rgba(102, 126, 234, 1) !important;
            transform: translateY(-50%) scale(1.1);
        }
        
        /* Responsive para el carrusel */
        @media (max-width: 768px) {
            #hotels-carousel {
                padding: 0 30px !important;
                touch-action: pan-y pinch-zoom;
            }
            
            #prevHotelBtn, #nextHotelBtn {
                width: 35px !important;
                height: 35px !important;
                font-size: 1rem !important;
            }
            
            #hotels-carousel .hotel-card-new {
                min-width: 280px !important;
            }
        }
        
        /* Estilos para dispositivos t√°ctiles */
        @media (hover: none) and (pointer: coarse) {
            #hotels-carousel {
                cursor: default;
            }
            
            #hotels-carousel:active {
                cursor: default;
            }
        }
    </style>
</body>
</html> 